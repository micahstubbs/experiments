!function(){var t={version:"3.5.16"};var n=[].slice,e=function(t){return n.call(t)};var r=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r){try{e(r.documentElement.childNodes)[0].nodeType}catch(u){e=function(t){var n=t.length,e=new Array(n);while(n--)e[n]=t[n];return e}}}if(!Date.now)Date.now=function(){return+new Date};if(r){try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(o){var s=this.Element.prototype,l=s.setAttribute,f=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,h=c.setProperty;s.setAttribute=function(t,n){l.call(this,t,n+"")};s.setAttributeNS=function(t,n,e){f.call(this,t,n,e+"")};c.setProperty=function(t,n,e){h.call(this,t,n+"",e)}}}t.ascending=p;function p(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN};t.min=function(t,n){var e=-1,r=t.length,i,a;if(arguments.length===1){while(++e<r)if((a=t[e])!=null&&a>=a){i=a;break}while(++e<r)if((a=t[e])!=null&&i>a)i=a}else{while(++e<r)if((a=n.call(t,t[e],e))!=null&&a>=a){i=a;break}while(++e<r)if((a=n.call(t,t[e],e))!=null&&i>a)i=a}return i};t.max=function(t,n){var e=-1,r=t.length,i,a;if(arguments.length===1){while(++e<r)if((a=t[e])!=null&&a>=a){i=a;break}while(++e<r)if((a=t[e])!=null&&a>i)i=a}else{while(++e<r)if((a=n.call(t,t[e],e))!=null&&a>=a){i=a;break}while(++e<r)if((a=n.call(t,t[e],e))!=null&&a>i)i=a}return i};t.extent=function(t,n){var e=-1,r=t.length,i,a,u;if(arguments.length===1){while(++e<r)if((a=t[e])!=null&&a>=a){i=u=a;break}while(++e<r)if((a=t[e])!=null){if(i>a)i=a;if(u<a)u=a}}else{while(++e<r)if((a=n.call(t,t[e],e))!=null&&a>=a){i=u=a;break}while(++e<r)if((a=n.call(t,t[e],e))!=null){if(i>a)i=a;if(u<a)u=a}}return[i,u]};function d(t){return t===null?NaN:+t}function g(t){return!isNaN(t)}t.sum=function(t,n){var e=0,r=t.length,i,a=-1;if(arguments.length===1){while(++a<r)if(g(i=+t[a]))e+=i}else{while(++a<r)if(g(i=+n.call(t,t[a],a)))e+=i}return e};t.mean=function(t,n){var e=0,r=t.length,i,a=-1,u=r;if(arguments.length===1){while(++a<r)if(g(i=d(t[a])))e+=i;else--u}else{while(++a<r)if(g(i=d(n.call(t,t[a],a))))e+=i;else--u}if(u)return e/u};t.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],a=e-r;return a?i+a*(t[r]-i):i};t.median=function(n,e){var r=[],i=n.length,a,u=-1;if(arguments.length===1){while(++u<i)if(g(a=d(n[u])))r.push(a)}else{while(++u<i)if(g(a=d(e.call(n,n[u],u))))r.push(a)}if(r.length)return t.quantile(r.sort(p),.5)};t.variance=function(t,n){var e=t.length,r=0,i,a,u=0,o=-1,s=0;if(arguments.length===1){while(++o<e){if(g(i=d(t[o]))){a=i-r;r+=a/++s;u+=a*(i-r)}}}else{while(++o<e){if(g(i=d(n.call(t,t[o],o)))){a=i-r;r+=a/++s;u+=a*(i-r)}}}if(s>1)return u/(s-1)};t.deviation=function(){var n=t.variance.apply(this,arguments);return n?Math.sqrt(n):n};function m(t){return{left:function(n,e,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=n.length;while(r<i){var a=r+i>>>1;if(t(n[a],e)<0)r=a+1;else i=a}return r},right:function(n,e,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=n.length;while(r<i){var a=r+i>>>1;if(t(n[a],e)>0)i=a;else r=a+1}return r}}}var v=m(p);t.bisectLeft=v.left;t.bisect=t.bisectRight=v.right;t.bisector=function(t){return m(t.length===1?function(n,e){return p(t(n),e)}:t)};t.shuffle=function(t,n,e){if((r=arguments.length)<3){e=t.length;if(r<2)n=0}var r=e-n,i,a;while(r){a=Math.random()*r--|0;i=t[r+n],t[r+n]=t[a+n],t[a+n]=i}return t};t.permute=function(t,n){var e=n.length,r=new Array(e);while(e--)r[e]=t[n[e]];return r};t.pairs=function(t){var n=0,e=t.length-1,r,i=t[0],a=new Array(e<0?0:e);while(n<e)a[n]=[r=i,i=t[++n]];return a};t.transpose=function(n){if(!(u=n.length))return[];for(var e=-1,r=t.min(n,y),i=new Array(r);++e<r;){for(var a=-1,u,o=i[e]=new Array(u);++a<u;){o[a]=n[a][e]}}return i};function y(t){return t.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(t){var n=[];for(var e in t)n.push(e);return n};t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n};t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n};t.merge=function(t){var n=t.length,e,r=-1,i=0,a,u;while(++r<n)i+=t[r].length;a=new Array(i);while(--n>=0){u=t[n];e=u.length;while(--e>=0){a[--i]=u[e]}}return a};var _=Math.abs;t.range=function(t,n,e){if(arguments.length<3){e=1;if(arguments.length<2){n=t;t=0}}if((n-t)/e===Infinity)throw new Error("infinite range");var r=[],i=w(_(e)),a=-1,u;t*=i,n*=i,e*=i;if(e<0)while((u=t+e*++a)>n)r.push(u/i);else while((u=t+e*++a)<n)r.push(u/i);return r};function w(t){var n=1;while(t*n%1)n*=10;return n}function x(t,n){for(var e in n){Object.defineProperty(t.prototype,e,{value:n[e],enumerable:false})}}t.map=function(t,n){var e=new b;if(t instanceof b){t.forEach(function(t,n){e.set(t,n)})}else if(Array.isArray(t)){var r=-1,i=t.length,a;if(arguments.length===1)while(++r<i)e.set(r,t[r]);else while(++r<i)e.set(n.call(t,a=t[r],r),a)}else{for(var u in t)e.set(u,t[u])}return e};function b(){this._=Object.create(null)}var M="__proto__",k="\x00";x(b,{has:E,get:function(t){return this._[S(t)]},set:function(t,n){return this._[S(t)]=n},remove:N,keys:D,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:A(n),value:this._[n]});return t},size:C,empty:T,forEach:function(t){for(var n in this._)t.call(this,A(n),this._[n])}});function S(t){return(t+="")===M||t[0]===k?k+t:t}function A(t){return(t+="")[0]===k?t.slice(1):t}function E(t){return S(t)in this._}function N(t){return(t=S(t))in this._&&delete this._[t]}function D(){var t=[];for(var n in this._)t.push(A(n));return t}function C(){var t=0;for(var n in this._)++t;return t}function T(){for(var t in this._)return false;return true}t.nest=function(){var n={},e=[],r=[],i,a;function u(t,r,o){if(o>=e.length)return a?a.call(n,r):i?r.sort(i):r;var s=-1,l=r.length,f=e[o++],c,h,p,d=new b,g;while(++s<l){if(g=d.get(c=f(h=r[s]))){g.push(h)}else{d.set(c,[h])}}if(t){h=t();p=function(n,e){h.set(n,u(t,e,o))}}else{h={};p=function(n,e){h[n]=u(t,e,o)}}d.forEach(p);return h}function o(t,n){if(n>=e.length)return t;var i=[],a=r[n++];t.forEach(function(t,e){i.push({key:t,values:o(e,n)})});return a?i.sort(function(t,n){return a(t.key,n.key)}):i}n.map=function(t,n){return u(n,t,0)};n.entries=function(n){return o(u(t.map,n,0),0)};n.key=function(t){e.push(t);return n};n.sortKeys=function(t){r[e.length-1]=t;return n};n.sortValues=function(t){i=t;return n};n.rollup=function(t){a=t;return n};return n};t.set=function(t){var n=new P;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n};function P(){this._=Object.create(null)}x(P,{has:E,add:function(t){this._[S(t+="")]=true;return t},remove:N,values:D,size:C,empty:T,forEach:function(t){for(var n in this._)t.call(this,A(n))}});t.behavior={};function L(t){return t}t.rebind=function(t,n){var e=1,r=arguments.length,i;while(++e<r)t[i=arguments[e]]=j(t,n,n[i]);return t};function j(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function I(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=O.length;e<r;++e){var i=O[e]+n;if(i in t)return i}}var O=["webkit","ms","moz","Moz","o","O"];function z(){}t.dispatch=function(){var t=new q,n=-1,e=arguments.length;while(++n<e)t[arguments[n]]=B(t);return t};function q(){}q.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0){r=t.slice(e+1);t=t.slice(0,e)}if(t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(arguments.length===2){if(n==null)for(t in this){if(this.hasOwnProperty(t))this[t].on(r,null)}return this}};function B(t){var n=[],e=new b;function r(){var e=n,r=-1,i=e.length,a;while(++r<i)if(a=e[r].on)a.apply(this,arguments);return t}r.on=function(r,i){var a=e.get(r),u;if(arguments.length<2)return a&&a.on;if(a){a.on=null;n=n.slice(0,u=n.indexOf(a)).concat(n.slice(u+1));e.remove(r)}if(i)n.push(e.set(r,{on:i}));return t};return r}t.event=null;function Y(){t.event.preventDefault()}function R(){var n=t.event,e;while(e=n.sourceEvent)n=e;return n}function F(n){var e=new q,r=0,i=arguments.length;while(++r<i)e[arguments[r]]=B(e);e.of=function(r,i){return function(a){try{var u=a.sourceEvent=t.event;a.target=n;t.event=a;e[a.type].apply(r,i)}finally{t.event=u}}};return e}t.requote=function(t){return t.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var H={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]};function X(t){H(t,V);return t}var W=function(t,n){return n.querySelector(t)},Z=function(t,n){return n.querySelectorAll(t)},$=function(t,n){var e=t.matches||t[I(t,"matchesSelector")];$=function(t,n){return e.call(t,n)};return $(t,n)};if(typeof Sizzle==="function"){W=function(t,n){return Sizzle(t,n)[0]||null};Z=Sizzle;$=Sizzle.matchesSelector}t.selection=function(){return t.select(r.documentElement)};var V=t.selection.prototype=[];V.select=function(t){var n=[],e,r,i,a;t=G(t);for(var u=-1,o=this.length;++u<o;){n.push(e=[]);e.parentNode=(i=this[u]).parentNode;for(var s=-1,l=i.length;++s<l;){if(a=i[s]){e.push(r=t.call(a,a.__data__,s,u));if(r&&"__data__"in a)r.__data__=a.__data__}else{e.push(null)}}}return X(n)};function G(t){return typeof t==="function"?t:function(){return W(t,this)}}V.selectAll=function(t){var n=[],r,i;t=J(t);for(var a=-1,u=this.length;++a<u;){for(var o=this[a],s=-1,l=o.length;++s<l;){if(i=o[s]){n.push(r=e(t.call(i,i.__data__,s,a)));r.parentNode=i}}}return X(n)};function J(t){return typeof t==="function"?t:function(){return Z(t,this)}}var K="http://www.w3.org/1999/xhtml";var Q={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:Q,qualify:function(t){var n=t.indexOf(":"),e=t;if(n>=0&&(e=t.slice(0,n))!=="xmlns")t=t.slice(n+1);return Q.hasOwnProperty(e)?{space:Q[e],local:t}:t}};V.attr=function(n,e){if(arguments.length<2){if(typeof n==="string"){var r=this.node();n=t.ns.qualify(n);return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}for(e in n)this.each(tt(e,n[e]));return this}return this.each(tt(n,e))};function tt(n,e){n=t.ns.qualify(n);function r(){this.removeAttribute(n)}function i(){this.removeAttributeNS(n.space,n.local)}function a(){this.setAttribute(n,e)}function u(){this.setAttributeNS(n.space,n.local,e)}function o(){var t=e.apply(this,arguments);if(t==null)this.removeAttribute(n);else this.setAttribute(n,t)}function s(){var t=e.apply(this,arguments);if(t==null)this.removeAttributeNS(n.space,n.local);else this.setAttributeNS(n.space,n.local,t)}return e==null?n.local?i:r:typeof e==="function"?n.local?s:o:n.local?u:a}function nt(t){return t.trim().replace(/\s+/g," ")}V.classed=function(t,n){if(arguments.length<2){if(typeof t==="string"){var e=this.node(),r=(t=rt(t)).length,i=-1;if(n=e.classList){while(++i<r)if(!n.contains(t[i]))return false}else{n=e.getAttribute("class");while(++i<r)if(!et(t[i]).test(n))return false}return true}for(n in t)this.each(it(n,t[n]));return this}return this.each(it(t,n))};function et(n){return new RegExp("(?:^|\\s+)"+t.requote(n)+"(?:\\s+|$)","g")}function rt(t){return(t+"").trim().split(/^|\s+/)}function it(t,n){t=rt(t).map(at);var e=t.length;function r(){var r=-1;while(++r<e)t[r](this,n)}function i(){var r=-1,i=n.apply(this,arguments);while(++r<e)t[r](this,i)}return typeof n==="function"?i:r}function at(t){var n=et(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";if(r){n.lastIndex=0;if(!n.test(i))e.setAttribute("class",nt(i+" "+t))}else{e.setAttribute("class",nt(i.replace(n," ")))}}}V.style=function(t,n,e){var r=arguments.length;if(r<3){if(typeof t!=="string"){if(r<2)n="";for(e in t)this.each(ut(e,t[e],n));return this}if(r<2){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(t)}e=""}return this.each(ut(t,n,e))};function ut(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function a(){var r=n.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,e)}return n==null?r:typeof n==="function"?a:i}V.property=function(t,n){if(arguments.length<2){if(typeof t==="string")return this.node()[t];for(n in t)this.each(ot(n,t[n]));return this}return this.each(ot(t,n))};function ot(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return n==null?e:typeof n==="function"?i:r}V.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};V.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};V.append=function(t){t=st(t);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};function st(n){function e(){var t=this.ownerDocument,e=this.namespaceURI;return e===K&&t.documentElement.namespaceURI===K?t.createElement(n):t.createElementNS(e,n)}function r(){return this.ownerDocument.createElementNS(n.space,n.local)}return typeof n==="function"?n:(n=t.ns.qualify(n)).local?r:e}V.insert=function(t,n){t=st(t);n=G(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})};V.remove=function(){return this.each(lt)};function lt(){var t=this.parentNode;if(t)t.removeChild(this)}V.data=function(t,n){var e=-1,r=this.length,i,a;if(!arguments.length){t=new Array(r=(i=this[0]).length);while(++e<r){if(a=i[e]){t[e]=a.__data__}}return t}function u(t,e){var r,i=t.length,a=e.length,u=Math.min(i,a),f=new Array(a),c=new Array(a),h=new Array(i),p,d;if(n){var g=new b,m=new Array(i),v;for(r=-1;++r<i;){if(p=t[r]){if(g.has(v=n.call(p,p.__data__,r))){h[r]=p}else{g.set(v,p)}m[r]=v}}for(r=-1;++r<a;){if(!(p=g.get(v=n.call(e,d=e[r],r)))){c[r]=ft(d)}else if(p!==true){f[r]=p;p.__data__=d}g.set(v,true)}for(r=-1;++r<i;){if(r in m&&g.get(m[r])!==true){h[r]=t[r]}}}else{for(r=-1;++r<u;){p=t[r];d=e[r];if(p){p.__data__=d;f[r]=p}else{c[r]=ft(d)}}for(;r<a;++r){c[r]=ft(e[r])}for(;r<i;++r){h[r]=t[r]}}c.update=f;c.parentNode=f.parentNode=h.parentNode=t.parentNode;o.push(c);s.push(f);l.push(h)}var o=dt([]),s=X([]),l=X([]);if(typeof t==="function"){while(++e<r){u(i=this[e],t.call(i,i.parentNode.__data__,e))}}else{while(++e<r){u(i=this[e],t)}}s.enter=function(){return o};s.exit=function(){return l};return s};function ft(t){return{__data__:t}}V.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")};V.filter=function(t){var n=[],e,r,i;if(typeof t!=="function")t=ct(t);for(var a=0,u=this.length;a<u;a++){n.push(e=[]);e.parentNode=(r=this[a]).parentNode;for(var o=0,s=r.length;o<s;o++){if((i=r[o])&&t.call(i,i.__data__,o,a)){e.push(i)}}}return X(n)};function ct(t){return function(){return $(this,t)}}V.order=function(){for(var t=-1,n=this.length;++t<n;){for(var e=this[t],r=e.length-1,i=e[r],a;--r>=0;){if(a=e[r]){if(i&&i!==a.nextSibling)i.parentNode.insertBefore(a,i);i=a}}}return this};V.sort=function(t){t=ht.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()};function ht(t){if(!arguments.length)t=p;return function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}V.each=function(t){return pt(this,function(n,e,r){t.call(n,n.__data__,e,r)})};function pt(t,n){for(var e=0,r=t.length;e<r;e++){for(var i=t[e],a=0,u=i.length,o;a<u;a++){if(o=i[a])n(o,a,e)}}return t}V.call=function(t){var n=e(arguments);t.apply(n[0]=this,n);return this};V.empty=function(){return!this.node()};V.node=function(){for(var t=0,n=this.length;t<n;t++){for(var e=this[t],r=0,i=e.length;r<i;r++){var a=e[r];if(a)return a}}return null};V.size=function(){var t=0;pt(this,function(){++t});return t};function dt(t){H(t,gt);return t}var gt=[];t.selection.enter=dt;t.selection.enter.prototype=gt;gt.append=V.append;gt.empty=V.empty;gt.node=V.node;gt.call=V.call;gt.size=V.size;gt.select=function(t){var n=[],e,r,i,a,u;for(var o=-1,s=this.length;++o<s;){i=(a=this[o]).update;n.push(e=[]);e.parentNode=a.parentNode;for(var l=-1,f=a.length;++l<f;){if(u=a[l]){e.push(i[l]=r=t.call(a.parentNode,u.__data__,l,o));r.__data__=u.__data__}else{e.push(null)}}}return X(n)};gt.insert=function(t,n){if(arguments.length<2)n=mt(this);return V.insert.call(this,t,n)};function mt(t){var n,e;return function(r,i,a){var u=t[a].update,o=u.length,s;if(a!=e)e=a,n=0;if(i>=n)n=i+1;while(!(s=u[n])&&++n<o);return s}}t.select=function(t){var n;if(typeof t==="string"){n=[W(t,r)];n.parentNode=r.documentElement}else{n=[t];n.parentNode=i(t)}return X([n])};t.selectAll=function(t){var n;if(typeof t==="string"){n=e(Z(t,r));n.parentNode=r.documentElement}else{n=e(t);n.parentNode=null}return X([n])};V.on=function(t,n,e){var r=arguments.length;if(r<3){if(typeof t!=="string"){if(r<2)n=false;for(e in t)this.each(vt(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=false}return this.each(vt(t,n,e))};function vt(n,r,i){var a="__on"+n,u=n.indexOf("."),o=_t;if(u>0)n=n.slice(0,u);var s=yt.get(n);if(s)n=s,o=wt;function l(){var t=this[a];if(t){this.removeEventListener(n,t,t.$);delete this[a]}}function f(){var t=o(r,e(arguments));l.call(this);this.addEventListener(n,this[a]=t,t.$=i);t._=r}function c(){var e=new RegExp("^__on([^.]+)"+t.requote(n)+"$"),r;for(var i in this){if(r=i.match(e)){var a=this[i];this.removeEventListener(r[1],a,a.$);delete this[i]}}}return u?r?f:l:r?z:c}var yt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(r){yt.forEach(function(t){if("on"+t in r)yt.remove(t)})}function _t(n,e){return function(r){var i=t.event;t.event=r;e[0]=this.__data__;try{n.apply(this,e)}finally{t.event=i}}}function wt(t,n){var e=_t(t,n);return function(t){var n=this,r=t.relatedTarget;if(!r||r!==n&&!(r.compareDocumentPosition(n)&8)){e.call(n,t)}}}var xt,bt=0;function Mt(n){var e=".dragsuppress-"+ ++bt,r="click"+e,u=t.select(a(n)).on("touchmove"+e,Y).on("dragstart"+e,Y).on("selectstart"+e,Y);if(xt==null){xt="onselectstart"in n?false:I(n.style,"userSelect")}if(xt){var o=i(n).style,s=o[xt];o[xt]="none"}return function(t){u.on(e,null);if(xt)o[xt]=s;if(t){var n=function(){u.on(r,null)};u.on(r,function(){Y();n()},true);setTimeout(n,0)}}}t.mouse=function(t){return St(t,R())};var kt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(n,e){if(e.changedTouches)e=e.changedTouches[0];var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();if(kt<0){var u=a(n);if(u.scrollX||u.scrollY){r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();kt=!(o.f||o.e);r.remove()}}if(kt)i.x=e.pageX,i.y=e.pageY;else i.x=e.clientX,i.y=e.clientY;i=i.matrixTransform(n.getScreenCTM().inverse());return[i.x,i.y]}var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}t.touch=function(t,n,e){if(arguments.length<3)e=n,n=R().changedTouches;if(n)for(var r=0,i=n.length,a;r<i;++r){if((a=n[r]).identifier===e){return St(t,a)}}};t.behavior.drag=function(){var n=F(u,"drag","dragstart","dragend"),e=null,r=o(z,t.mouse,a,"mousemove","mouseup"),i=o(At,t.touch,L,"touchmove","touchend");function u(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function o(r,i,a,u,o){return function(){var s=this,l=t.event.target.correspondingElement||t.event.target,f=s.parentNode,c=n.of(s,arguments),h=0,p=r(),d=".drag"+(p==null?"":"-"+p),g,m=t.select(a(l)).on(u+d,_).on(o+d,w),v=Mt(l),y=i(f,p);if(e){g=e.apply(s,arguments);g=[g.x-y[0],g.y-y[1]]}else{g=[0,0]}c({type:"dragstart"});function _(){var t=i(f,p),n,e;if(!t)return;n=t[0]-y[0];e=t[1]-y[1];h|=n|e;y=t;c({type:"drag",x:t[0]+g[0],y:t[1]+g[1],dx:n,dy:e})}function w(){if(!i(f,p))return;m.on(u+d,null).on(o+d,null);v(h);c({type:"dragend"})}}}u.origin=function(t){if(!arguments.length)return e;e=t;return u};return t.rebind(u,n,"on")};function At(){return t.event.changedTouches[0].identifier}t.touches=function(t,n){if(arguments.length<2)n=R().touches;return n?e(n).map(function(n){var e=St(t,n);e.identifier=n.identifier;return e}):[]};var Et=1e-6,Nt=Et*Et,Dt=Math.PI,Ct=2*Dt,Tt=Ct-Et,Pt=Dt/2,Lt=Dt/180,jt=180/Dt;function It(t){return t>0?1:t<0?-1:0}function Ot(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function zt(t){return t>1?0:t<-1?Dt:Math.acos(t)}function qt(t){return t>1?Pt:t<-1?-Pt:Math.asin(t)}function Bt(t){return((t=Math.exp(t))-1/t)/2}function Yt(t){return((t=Math.exp(t))+1/t)/2}function Rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function Ft(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2,Ht=2,Xt=4;t.interpolateZoom=function(t,n){var e=t[0],r=t[1],i=t[2],a=n[0],u=n[1],o=n[2],s=a-e,l=u-r,f=s*s+l*l,c,h;if(f<Nt){h=Math.log(o/i)/Ut;c=function(t){return[e+t*s,r+t*l,i*Math.exp(Ut*t*h)]}}else{var p=Math.sqrt(f),d=(o*o-i*i+Xt*f)/(2*i*Ht*p),g=(o*o-i*i-Xt*f)/(2*o*Ht*p),m=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(g*g+1)-g);h=(v-m)/Ut;c=function(t){var n=t*h,a=Yt(m),u=i/(Ht*p)*(a*Rt(Ut*n+m)-Bt(m));return[e+u*s,r+u*l,i*a/Yt(Ut*n+m)]}}c.duration=h*1e3;return c};t.behavior.zoom=function(){var n={x:0,y:0,k:1},e,i,u,o=[960,500],s=Wt,l=250,f=0,c="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",d,g="touchstart.zoom",m,v=F(b,"zoomstart","zoom","zoomend"),y,_,w,x;if(!$t){$t="onwheel"in r?(Zt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Zt=function(){return t.event.wheelDelta},"mousewheel"):(Zt=function(){return-t.event.detail},"MozMousePixelScroll")}function b(t){t.on(c,P).on($t+".zoom",j).on("dblclick.zoom",I).on(g,L)}b.event=function(e){e.each(function(){var e=v.of(this,arguments),r=n;if(Ps){t.select(this).transition().each("start.zoom",function(){n=this.__chart__||{x:0,y:0,k:1};D(e)}).tween("zoom:zoom",function(){var a=o[0],u=o[1],s=i?i[0]:a/2,l=i?i[1]:u/2,f=t.interpolateZoom([(s-n.x)/n.k,(l-n.y)/n.k,a/n.k],[(s-r.x)/r.k,(l-r.y)/r.k,a/r.k]);return function(t){var r=f(t),i=a/r[2];this.__chart__=n={x:s-r[0]*i,y:l-r[1]*i,k:i};C(e)}}).each("interrupt.zoom",function(){T(e)}).each("end.zoom",function(){T(e)})}else{this.__chart__=n;D(e);C(e);T(e)}})};b.translate=function(t){if(!arguments.length)return[n.x,n.y];n={x:+t[0],y:+t[1],k:n.k};N();return b};b.scale=function(t){if(!arguments.length)return n.k;n={x:n.x,y:n.y,k:null};S(+t);N();return b};b.scaleExtent=function(t){if(!arguments.length)return s;s=t==null?Wt:[+t[0],+t[1]];return b};b.center=function(t){if(!arguments.length)return u;u=t&&[+t[0],+t[1]];return b};b.size=function(t){if(!arguments.length)return o;o=t&&[+t[0],+t[1]];return b};b.duration=function(t){if(!arguments.length)return l;l=+t;return b};b.x=function(t){if(!arguments.length)return _;_=t;y=t.copy();n={x:0,y:0,k:1};return b};b.y=function(t){if(!arguments.length)return x;x=t;w=t.copy();n={x:0,y:0,k:1};return b};function M(t){return[(t[0]-n.x)/n.k,(t[1]-n.y)/n.k]}function k(t){return[t[0]*n.k+n.x,t[1]*n.k+n.y]}function S(t){n.k=Math.max(s[0],Math.min(s[1],t))}function A(t,e){e=k(e);n.x+=t[0]-e[0];n.y+=t[1]-e[1]}function E(e,r,a,u){e.__chart__={x:n.x,y:n.y,k:n.k};S(Math.pow(2,u));A(i=r,a);e=t.select(e);if(l>0)e=e.transition().duration(l);e.call(b.event)}function N(){if(_)_.domain(y.range().map(function(t){return(t-n.x)/n.k}).map(y.invert));if(x)x.domain(w.range().map(function(t){return(t-n.y)/n.k}).map(w.invert))}function D(t){if(!f++)t({type:"zoomstart"})}function C(t){N();t({type:"zoom",scale:n.k,translate:[n.x,n.y]})}function T(t){if(!--f)t({type:"zoomend"}),i=null}function P(){var n=this,e=v.of(n,arguments),r=0,i=t.select(a(n)).on(h,s).on(p,l),u=M(t.mouse(n)),o=Mt(n);Es.call(n);D(e);function s(){r=1;A(t.mouse(n),u);C(e)}function l(){i.on(h,null).on(p,null);o(r);T(e)}}function L(){var e=this,r=v.of(e,arguments),i={},a=0,u,o=".zoom-"+t.event.changedTouches[0].identifier,s="touchmove"+o,l="touchend"+o,f=[],h=t.select(e),p=Mt(e);y();D(r);h.on(c,null).on(g,y);function d(){var r=t.touches(e);u=n.k;r.forEach(function(t){if(t.identifier in i)i[t.identifier]=M(t)});return r}function y(){var r=t.event.target;t.select(r).on(s,_).on(l,w);f.push(r);var u=t.event.changedTouches;for(var o=0,c=u.length;o<c;++o){i[u[o].identifier]=null}var h=d(),p=Date.now();if(h.length===1){if(p-m<500){var g=h[0];E(e,g,i[g.identifier],Math.floor(Math.log(n.k)/Math.LN2)+1);Y()}m=p}else if(h.length>1){var g=h[0],v=h[1],y=g[0]-v[0],x=g[1]-v[1];a=y*y+x*x}}function _(){var n=t.touches(e),o,s,l,f;Es.call(e);for(var c=0,h=n.length;c<h;++c,f=null){l=n[c];if(f=i[l.identifier]){if(s)break;o=l,s=f}}if(f){var p=(p=l[0]-o[0])*p+(p=l[1]-o[1])*p,d=a&&Math.sqrt(p/a);o=[(o[0]+l[0])/2,(o[1]+l[1])/2];s=[(s[0]+f[0])/2,(s[1]+f[1])/2];S(d*u)}m=null;A(o,s);C(r)}function w(){if(t.event.touches.length){var n=t.event.changedTouches;for(var e=0,a=n.length;e<a;++e){delete i[n[e].identifier]}for(var u in i){return void d()}}t.selectAll(f).on(o,null);h.on(c,P).on(g,L);p();T(r)}}function j(){var r=v.of(this,arguments);if(d)clearTimeout(d);else Es.call(this),e=M(i=u||t.mouse(this)),D(r);d=setTimeout(function(){d=null;T(r)},50);Y();S(Math.pow(2,Zt()*.002)*n.k);A(i,e);C(r)}function I(){var e=t.mouse(this),r=Math.log(n.k)/Math.LN2;E(this,e,M(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return t.rebind(b,v,"on")};var Wt=[0,Infinity],Zt,$t;t.color=Vt;function Vt(){}Vt.prototype.toString=function(){return this.rgb()+""};t.hsl=Gt;function Gt(t,n,e){return this instanceof Gt?void(this.h=+t,this.s=+n,this.l=+e):arguments.length<2?t instanceof Gt?new Gt(t.h,t.s,t.l):_n(""+t,wn,Gt):new Gt(t,n,e)}var Jt=Gt.prototype=new Vt;Jt.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);return new Gt(this.h,this.s,this.l/t)};Jt.darker=function(t){t=Math.pow(.7,arguments.length?t:1);return new Gt(this.h,this.s,t*this.l)};Jt.rgb=function(){return Kt(this.h,this.s,this.l)};function Kt(t,n,e){var r,i;t=isNaN(t)?0:(t%=360)<0?t+360:t;n=isNaN(n)?0:n<0?0:n>1?1:n;e=e<0?0:e>1?1:e;i=e<=.5?e*(1+n):e+n-e*n;r=2*e-i;function a(t){if(t>360)t-=360;else if(t<0)t+=360;if(t<60)return r+(i-r)*t/60;if(t<180)return i;if(t<240)return r+(i-r)*(240-t)/60;return r}function u(t){return Math.round(a(t)*255)}return new dn(u(t+120),u(t),u(t-120))}t.hcl=Qt;function Qt(n,e,r){return this instanceof Qt?void(this.h=+n,this.c=+e,this.l=+r):arguments.length<2?n instanceof Qt?new Qt(n.h,n.c,n.l):n instanceof en?fn(n.l,n.a,n.b):fn((n=xn((n=t.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new Qt(n,e,r)}var tn=Qt.prototype=new Vt;tn.brighter=function(t){return new Qt(this.h,this.c,Math.min(100,this.l+rn*(arguments.length?t:1)))};tn.darker=function(t){return new Qt(this.h,this.c,Math.max(0,this.l-rn*(arguments.length?t:1)))};tn.rgb=function(){return nn(this.h,this.c,this.l).rgb()};function nn(t,n,e){if(isNaN(t))t=0;if(isNaN(n))n=0;return new en(e,Math.cos(t*=Lt)*n,Math.sin(t)*n)}t.lab=en;function en(t,n,e){return this instanceof en?void(this.l=+t,this.a=+n,this.b=+e):arguments.length<2?t instanceof en?new en(t.l,t.a,t.b):t instanceof Qt?nn(t.h,t.c,t.l):xn((t=dn(t)).r,t.g,t.b):new en(t,n,e)}var rn=18;var an=.95047,un=1,on=1.08883;var sn=en.prototype=new Vt;sn.brighter=function(t){return new en(Math.min(100,this.l+rn*(arguments.length?t:1)),this.a,this.b)};sn.darker=function(t){return new en(Math.max(0,this.l-rn*(arguments.length?t:1)),this.a,this.b)};sn.rgb=function(){return ln(this.l,this.a,this.b)};function ln(t,n,e){var r=(t+16)/116,i=r+n/500,a=r-e/200;i=cn(i)*an;r=cn(r)*un;a=cn(a)*on;return new dn(pn(3.2404542*i-1.5371385*r-.4985314*a),pn(-.969266*i+1.8760108*r+.041556*a),pn(.0556434*i-.2040259*r+1.0572252*a))}function fn(t,n,e){return t>0?new Qt(Math.atan2(e,n)*jt,Math.sqrt(n*n+e*e),t):new Qt(NaN,NaN,t)}function cn(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function hn(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function pn(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}t.rgb=dn;function dn(t,n,e){return this instanceof dn?void(this.r=~~t,this.g=~~n,this.b=~~e):arguments.length<2?t instanceof dn?new dn(t.r,t.g,t.b):_n(""+t,dn,Kt):new dn(t,n,e)}function gn(t){return new dn(t>>16,t>>8&255,t&255)}function mn(t){return gn(t)+""}var vn=dn.prototype=new Vt;vn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;if(!n&&!e&&!r)return new dn(i,i,i);if(n&&n<i)n=i;if(e&&e<i)e=i;if(r&&r<i)r=i;return new dn(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))};vn.darker=function(t){t=Math.pow(.7,arguments.length?t:1);return new dn(t*this.r,t*this.g,t*this.b)};vn.hsl=function(){return wn(this.r,this.g,this.b)};vn.toString=function(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)};function yn(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _n(t,n,e){var r=0,i=0,a=0,u,o,s;u=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase());if(u){o=u[2].split(",");switch(u[1]){case"hsl":{return e(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100)}case"rgb":{return n(Mn(o[0]),Mn(o[1]),Mn(o[2]))}}}if(s=kn.get(t)){return n(s.r,s.g,s.b)}if(t!=null&&t.charAt(0)==="#"&&!isNaN(s=parseInt(t.slice(1),16))){if(t.length===4){r=(s&3840)>>4;r=r>>4|r;i=s&240;i=i>>4|i;a=s&15;a=a<<4|a}else if(t.length===7){r=(s&16711680)>>16;i=(s&65280)>>8;a=s&255}}return n(r,i,a)}function wn(t,n,e){var r=Math.min(t/=255,n/=255,e/=255),i=Math.max(t,n,e),a=i-r,u,o,s=(i+r)/2;if(a){o=s<.5?a/(i+r):a/(2-i-r);if(t==i)u=(n-e)/a+(n<e?6:0);else if(n==i)u=(e-t)/a+2;else u=(t-n)/a+4;u*=60}else{u=NaN;o=s>0&&s<1?0:u}return new Gt(u,o,s)}function xn(t,n,e){t=bn(t);n=bn(n);e=bn(e);var r=hn((.4124564*t+.3575761*n+.1804375*e)/an),i=hn((.2126729*t+.7151522*n+.072175*e)/un),a=hn((.0193339*t+.119192*n+.9503041*e)/on);return en(116*i-16,500*(r-i),200*(i-a))}function bn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mn(t){var n=parseFloat(t);return t.charAt(t.length-1)==="%"?Math.round(n*2.55):n}var kn=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,
orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});kn.forEach(function(t,n){kn.set(t,gn(n))});function Sn(t){return typeof t==="function"?t:function(){return t}}t.functor=Sn;t.xhr=An(L);function An(t){return function(n,e,r){if(arguments.length===2&&typeof e==="function")r=e,e=null;return En(n,e,t,r)}}function En(n,r,i,a){var u={},o=t.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,f=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(n))l=new XDomainRequest;"onload"in l?l.onload=l.onerror=c:l.onreadystatechange=function(){l.readyState>3&&c()};function c(){var t=l.status,n;if(!t&&Dn(l)||t>=200&&t<300||t===304){try{n=i.call(u,l)}catch(e){o.error.call(u,e);return}o.load.call(u,n)}else{o.error.call(u,l)}}l.onprogress=function(n){var e=t.event;t.event=n;try{o.progress.call(u,l)}finally{t.event=e}};u.header=function(t,n){t=(t+"").toLowerCase();if(arguments.length<2)return s[t];if(n==null)delete s[t];else s[t]=n+"";return u};u.mimeType=function(t){if(!arguments.length)return r;r=t==null?null:t+"";return u};u.responseType=function(t){if(!arguments.length)return f;f=t;return u};u.response=function(t){i=t;return u};["get","post"].forEach(function(t){u[t]=function(){return u.send.apply(u,[t].concat(e(arguments)))}});u.send=function(t,e,i){if(arguments.length===2&&typeof e==="function")i=e,e=null;l.open(t,n,true);if(r!=null&&!("accept"in s))s["accept"]=r+",*/*";if(l.setRequestHeader)for(var a in s)l.setRequestHeader(a,s[a]);if(r!=null&&l.overrideMimeType)l.overrideMimeType(r);if(f!=null)l.responseType=f;if(i!=null)u.on("error",i).on("load",function(t){i(null,t)});o.beforesend.call(u,l);l.send(e==null?null:e);return u};u.abort=function(){l.abort();return u};t.rebind(u,o,"on");return a==null?u:u.get(Nn(a))}function Nn(t){return t.length===1?function(n,e){t(n==null?e:null)}:t}function Dn(t){var n=t.responseType;return n&&n!=="text"?t.response:t.responseText}t.dsv=function(t,n){var e=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,e,r){if(arguments.length<3)r=e,e=null;var i=En(t,n,e==null?a:u(e),r);i.row=function(t){return arguments.length?i.response((e=t)==null?a:u(t)):e};return i}function a(t){return i.parse(t.responseText)}function u(t){return function(n){return i.parse(n.responseText,t)}}i.parse=function(t,n){var e;return i.parseRows(t,function(t,r){if(e)return e(t,r-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");e=n?function(t,e){return n(i(t),e)}:i})};i.parseRows=function(t,n){var e={},i={},a=[],u=t.length,o=0,s=0,l,f;function c(){if(o>=u)return i;if(f)return f=false,e;var n=o;if(t.charCodeAt(n)===34){var a=n;while(a++<u){if(t.charCodeAt(a)===34){if(t.charCodeAt(a+1)!==34)break;++a}}o=a+2;var s=t.charCodeAt(a+1);if(s===13){f=true;if(t.charCodeAt(a+2)===10)++o}else if(s===10){f=true}return t.slice(n+1,a).replace(/""/g,'"')}while(o<u){var s=t.charCodeAt(o++),l=1;if(s===10)f=true;else if(s===13){f=true;if(t.charCodeAt(o)===10)++o,++l}else if(s!==r)continue;return t.slice(n,o-l)}return t.slice(n)}while((l=c())!==i){var h=[];while(l!==e&&l!==i){h.push(l);l=c()}if(n&&(h=n(h,s++))==null)continue;a.push(h)}return a};i.format=function(n){if(Array.isArray(n[0]))return i.formatRows(n);var e=new P,r=[];n.forEach(function(t){for(var n in t){if(!e.has(n)){r.push(e.add(n))}}});return[r.map(s).join(t)].concat(n.map(function(n){return r.map(function(t){return s(n[t])}).join(t)})).join("\n")};i.formatRows=function(t){return t.map(o).join("\n")};function o(n){return n.map(s).join(t)}function s(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("	","text/tab-separated-values");var Cn,Tn,Pn,Ln,jn=this[I(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};t.timer=function(){In.apply(this,arguments)};function In(t,n,e){var r=arguments.length;if(r<2)n=0;if(r<3)e=Date.now();var i=e+n,a={c:t,t:i,n:null};if(Tn)Tn.n=a;else Cn=a;Tn=a;if(!Pn){Ln=clearTimeout(Ln);Pn=1;jn(On)}return a}function On(){var t=zn(),n=qn()-t;if(n>24){if(isFinite(n)){clearTimeout(Ln);Ln=setTimeout(On,n)}Pn=0}else{Pn=1;jn(On)}}t.timer.flush=function(){zn();qn()};function zn(){var t=Date.now(),n=Cn;while(n){if(t>=n.t&&n.c(t-n.t))n.c=null;n=n.n}return t}function qn(){var t,n=Cn,e=Infinity;while(n){if(n.c){if(n.t<e)e=n.t;n=(t=n).n}else{n=t?t.n=n.n:Cn=n.n}}Tn=t;return e}function Bn(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var Yn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(Rn);t.formatPrefix=function(n,e){var r=0;if(n=+n){if(n<0)n*=-1;if(e)n=t.round(n,Bn(n,e));r=1+Math.floor(1e-12+Math.log(n)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return Yn[8+r/3]};function Rn(t,n){var e=Math.pow(10,_(8-n)*3);return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Fn(n){var e=n.decimal,r=n.thousands,i=n.grouping,a=n.currency,u=i&&r?function(t,n){var e=t.length,a=[],u=0,o=i[0],s=0;while(e>0&&o>0){if(s+o+1>n)o=Math.max(1,n-s);a.push(t.substring(e-=o,e+o));if((s+=o+1)>n)break;o=i[u=(u+1)%i.length]}return a.reverse().join(r)}:L;return function(n){var r=Un.exec(n),i=r[1]||" ",o=r[2]||">",s=r[3]||"-",l=r[4]||"",f=r[5],c=+r[6],h=r[7],p=r[8],d=r[9],g=1,m="",v="",y=false,_=true;if(p)p=+p.substring(1);if(f||i==="0"&&o==="="){f=i="0";o="="}switch(d){case"n":h=true;d="g";break;case"%":g=100;v="%";d="f";break;case"p":g=100;v="%";d="r";break;case"b":case"o":case"x":case"X":if(l==="#")m="0"+d.toLowerCase();case"c":_=false;case"d":y=true;p=0;break;case"s":g=-1;d="r";break}if(l==="$")m=a[0],v=a[1];if(d=="r"&&!p)d="g";if(p!=null){if(d=="g")p=Math.max(1,Math.min(21,p));else if(d=="e"||d=="f")p=Math.max(0,Math.min(20,p))}d=Hn.get(d)||Xn;var w=f&&h;return function(n){var r=v;if(y&&n%1)return"";var a=n<0||n===0&&1/n<0?(n=-n,"-"):s==="-"?"":s;if(g<0){var l=t.formatPrefix(n,p);n=l.scale(n);r=l.symbol+v}else{n*=g}n=d(n,p);var x=n.lastIndexOf("."),b,M;if(x<0){var k=_?n.lastIndexOf("e"):-1;if(k<0)b=n,M="";else b=n.substring(0,k),M=n.substring(k)}else{b=n.substring(0,x);M=e+n.substring(x+1)}if(!f&&h)b=u(b,Infinity);var S=m.length+b.length+M.length+(w?0:a.length),A=S<c?new Array(S=c-S+1).join(i):"";if(w)b=u(A+b,A.length?c-M.length:Infinity);a+=m;n=b+M;return(o==="<"?a+n+A:o===">"?A+a+n:o==="^"?A.substring(0,S>>=1)+a+n+A.substring(S):a+(w?n:A+n))+r}}}var Un=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Hn=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(n,e){return(n=t.round(n,Bn(n,e))).toFixed(Math.max(0,Math.min(20,Bn(n*(1+1e-15),e))))}});function Xn(t){return t+""}var Wn=t.time={},Zn=Date;function $n(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}$n.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Vn.setUTCDate.apply(this._,arguments)},setDay:function(){Vn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Vn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Vn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Vn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Vn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Vn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Vn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Vn.setTime.apply(this._,arguments)}};var Vn=Date.prototype;function Gn(t,n,e){function r(n){var e=t(n),r=a(e,1);return n-e<r-n?e:r}function i(e){n(e=t(new Zn(e-1)),1);return e}function a(t,e){n(t=new Zn(+t),e);return t}function u(t,r,a){var u=i(t),o=[];if(a>1){while(u<r){if(!(e(u)%a))o.push(new Date(+u));n(u,1)}}else{while(u<r)o.push(new Date(+u)),n(u,1)}return o}function o(t,n,e){try{Zn=$n;var r=new $n;r._=t;return u(r,n,e)}finally{Zn=Date}}t.floor=t;t.round=r;t.ceil=i;t.offset=a;t.range=u;var s=t.utc=Jn(t);s.floor=s;s.round=Jn(r);s.ceil=Jn(i);s.offset=Jn(a);s.range=o;return t}function Jn(t){return function(n,e){try{Zn=$n;var r=new $n;r._=n;return t(r,e)._}finally{Zn=Date}}}Wn.year=Gn(function(t){t=Wn.day(t);t.setMonth(0,1);return t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()});Wn.years=Wn.year.range;Wn.years.utc=Wn.year.utc.range;Wn.day=Gn(function(t){var n=new Zn(2e3,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());return n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1});Wn.days=Wn.day.range;Wn.days.utc=Wn.day.utc.range;Wn.dayOfYear=function(t){var n=Wn.year(t);return Math.floor((t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Wn[t]=Gn(function(t){(t=Wn.day(t)).setDate(t.getDate()-(t.getDay()+n)%7);return t},function(t,n){t.setDate(t.getDate()+Math.floor(n)*7)},function(t){var e=Wn.year(t).getDay();return Math.floor((Wn.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Wn[t+"s"]=e.range;Wn[t+"s"].utc=e.utc.range;Wn[t+"OfYear"]=function(t){var e=Wn.year(t).getDay();return Math.floor((Wn.dayOfYear(t)+(e+n)%7)/7)}});Wn.week=Wn.sunday;Wn.weeks=Wn.sunday.range;Wn.weeks.utc=Wn.sunday.utc.range;Wn.weekOfYear=Wn.sundayOfYear;function Kn(n){var e=n.dateTime,r=n.date,i=n.time,a=n.periods,u=n.days,o=n.shortDays,s=n.months,l=n.shortMonths;function f(t){var n=t.length;function e(e){var r=[],i=-1,a=0,u,o,s;while(++i<n){if(t.charCodeAt(i)===37){r.push(t.slice(a,i));if((o=Qn[u=t.charAt(++i)])!=null)u=t.charAt(++i);if(s=x[u])u=s(e,o==null?u==="e"?" ":"0":o);r.push(u);a=i+1}}r.push(t.slice(a,i));return r.join("")}e.parse=function(n){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(e,t,n,0);if(r!=n.length)return null;if("p"in e)e.H=e.H%12+e.p*12;var i=e.Z!=null&&Zn!==$n,a=new(i?$n:Zn);if("j"in e)a.setFullYear(e.y,0,e.j);else if("W"in e||"U"in e){if(!("w"in e))e.w="W"in e?1:0;a.setFullYear(e.y,0,1);a.setFullYear(e.y,0,"W"in e?(e.w+6)%7+e.W*7-(a.getDay()+5)%7:e.w+e.U*7-(a.getDay()+6)%7)}else a.setFullYear(e.y,e.m,e.d);a.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L);return i?a._:a};e.toString=function(){return t};return e}function c(t,n,e,r){var i,a,u,o=0,s=n.length,l=e.length;while(o<s){if(r>=l)return-1;i=n.charCodeAt(o++);if(i===37){u=n.charAt(o++);a=b[u in Qn?n.charAt(o++):u];if(!a||(r=a(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++)){return-1}}return r}f.utc=function(t){var n=f(t);function e(t){try{Zn=$n;var e=new Zn;e._=t;return n(e)}finally{Zn=Date}}e.parse=function(t){try{Zn=$n;var e=n.parse(t);return e&&e._}finally{Zn=Date}};e.toString=n.toString;return e};f.multi=f.utc.multi=xe;var h=t.map(),p=re(u),d=ie(u),g=re(o),m=ie(o),v=re(s),y=ie(s),_=re(l),w=ie(l);a.forEach(function(t,n){h.set(t.toLowerCase(),n)});var x={a:function(t){return o[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:f(e),d:function(t,n){return ee(t.getDate(),n,2)},e:function(t,n){return ee(t.getDate(),n,2)},H:function(t,n){return ee(t.getHours(),n,2)},I:function(t,n){return ee(t.getHours()%12||12,n,2)},j:function(t,n){return ee(1+Wn.dayOfYear(t),n,3)},L:function(t,n){return ee(t.getMilliseconds(),n,3)},m:function(t,n){return ee(t.getMonth()+1,n,2)},M:function(t,n){return ee(t.getMinutes(),n,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,n){return ee(t.getSeconds(),n,2)},U:function(t,n){return ee(Wn.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return ee(Wn.mondayOfYear(t),n,2)},x:f(r),X:f(i),y:function(t,n){return ee(t.getFullYear()%100,n,2)},Y:function(t,n){return ee(t.getFullYear()%1e4,n,4)},Z:_e,"%":function(){return"%"}};var b={a:M,A:k,b:S,B:A,c:E,d:pe,e:pe,H:ge,I:ge,j:de,L:ye,m:he,M:me,p:C,S:ve,U:ue,w:ae,W:oe,x:N,X:D,y:le,Y:se,Z:fe,"%":we};function M(t,n,e){g.lastIndex=0;var r=g.exec(n.slice(e));return r?(t.w=m.get(r[0].toLowerCase()),e+r[0].length):-1}function k(t,n,e){p.lastIndex=0;var r=p.exec(n.slice(e));return r?(t.w=d.get(r[0].toLowerCase()),e+r[0].length):-1}function S(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e));return r?(t.m=w.get(r[0].toLowerCase()),e+r[0].length):-1}function A(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1}function E(t,n,e){return c(t,x.c.toString(),n,e)}function N(t,n,e){return c(t,x.x.toString(),n,e)}function D(t,n,e){return c(t,x.X.toString(),n,e)}function C(t,n,e){var r=h.get(n.slice(e,e+=2).toLowerCase());return r==null?-1:(t.p=r,e)}return f}var Qn={"-":"",_:" ",0:"0"},te=/^\s*\d+/,ne=/^%/;function ee(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function re(n){return new RegExp("^(?:"+n.map(t.requote).join("|")+")","i")}function ie(t){var n=new b,e=-1,r=t.length;while(++e<r)n.set(t[e].toLowerCase(),e);return n}function ae(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function ue(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function oe(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function se(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function le(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.y=ce(+r[0]),e+r[0].length):-1}function fe(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function ce(t){return t+(t>68?1900:2e3)}function he(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function pe(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function de(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function ge(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function me(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ve(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ye(t,n,e){te.lastIndex=0;var r=te.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function _e(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=_(n)/60|0,i=_(n)%60;return e+ee(r,"0",2)+ee(i,"0",2)}function we(t,n,e){ne.lastIndex=0;var r=ne.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function xe(t){var n=t.length,e=-1;while(++e<n)t[e][0]=this(t[e][0]);return function(n){var e=0,r=t[e];while(!r[1](n))r=t[++e];return r[0](n)}}t.locale=function(t){return{numberFormat:Fn(t),timeFormat:Kn(t)}};var be=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=be.numberFormat;t.geo={};function Me(){}Me.prototype={s:0,t:0,add:function(t){Se(t,this.t,ke);Se(ke.s,this.s,this);if(this.s)this.t+=ke.t;else this.s=ke.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ke=new Me;function Se(t,n,e){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}t.geo.stream=function(t,n){if(t&&Ee.hasOwnProperty(t.type)){Ee[t.type](t,n)}else{Ae(t,n)}};function Ae(t,n){if(t&&Ne.hasOwnProperty(t.type)){Ne[t.type](t,n)}}var Ee={Feature:function(t,n){Ae(t.geometry,n)},FeatureCollection:function(t,n){var e=t.features,r=-1,i=e.length;while(++r<i)Ae(e[r].geometry,n)}};var Ne={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates;n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){De(t.coordinates,n,0)},MultiLineString:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)De(e[r],n,0)},Polygon:function(t,n){Ce(t.coordinates,n)},MultiPolygon:function(t,n){var e=t.coordinates,r=-1,i=e.length;while(++r<i)Ce(e[r],n)},GeometryCollection:function(t,n){var e=t.geometries,r=-1,i=e.length;while(++r<i)Ae(e[r],n)}};function De(t,n,e){var r=-1,i=t.length-e,a;n.lineStart();while(++r<i)a=t[r],n.point(a[0],a[1],a[2]);n.lineEnd()}function Ce(t,n){var e=-1,r=t.length;n.polygonStart();while(++e<r)De(t[e],n,1);n.polygonEnd()}t.geo.area=function(n){Te=0;t.geo.stream(n,Le);return Te};var Te,Pe=new Me;var Le={sphere:function(){Te+=4*Dt},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Pe.reset();Le.lineStart=je},polygonEnd:function(){var t=2*Pe;Te+=t<0?4*Dt+t:t;Le.lineStart=Le.lineEnd=Le.point=z}};function je(){var t,n,e,r,i;Le.point=function(u,o){Le.point=a;e=(t=u)*Lt,r=Math.cos(o=(n=o)*Lt/2+Dt/4),i=Math.sin(o)};function a(t,n){t*=Lt;n=n*Lt/2+Dt/4;var a=t-e,u=a>=0?1:-1,o=u*a,s=Math.cos(n),l=Math.sin(n),f=i*l,c=r*s+f*Math.cos(o),h=f*u*Math.sin(o);Pe.add(Math.atan2(h,c));e=t,r=s,i=l}Le.lineEnd=function(){a(t,n)}}function Ie(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function Oe(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ze(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function qe(t,n){t[0]+=n[0];t[1]+=n[1];t[2]+=n[2]}function Be(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Ye(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n;t[1]/=n;t[2]/=n}function Re(t){return[Math.atan2(t[1],t[0]),qt(t[2])]}function Fe(t,n){return _(t[0]-n[0])<Et&&_(t[1]-n[1])<Et}t.geo.bounds=function(){var n,e,r,i,a,u,o,s,l,f,c;var h={point:p,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v;h.lineStart=y;h.lineEnd=w;l=0;Le.polygonStart()},polygonEnd:function(){Le.polygonEnd();h.point=p;h.lineStart=g;h.lineEnd=m;if(Pe<0)n=-(r=180),e=-(i=90);else if(l>Et)i=90;else if(l<-Et)e=-90;c[0]=n,c[1]=r}};function p(t,a){f.push(c=[n=t,r=t]);if(a<e)e=a;if(a>i)i=a}function d(t,u){var o=Ie([t*Lt,u*Lt]);if(s){var l=ze(s,o),f=[l[1],-l[0],0],c=ze(f,l);Ye(c);c=Re(c);var h=t-a,d=h>0?1:-1,g=c[0]*jt*d,m=_(h)>180;if(m^(d*a<g&&g<d*t)){var v=c[1]*jt;if(v>i)i=v}else if(g=(g+360)%360-180,m^(d*a<g&&g<d*t)){var v=-c[1]*jt;if(v<e)e=v}else{if(u<e)e=u;if(u>i)i=u}if(m){if(t<a){if(x(n,t)>x(n,r))r=t}else{if(x(t,r)>x(n,r))n=t}}else{if(r>=n){if(t<n)n=t;if(t>r)r=t}else{if(t>a){if(x(n,t)>x(n,r))r=t}else{if(x(t,r)>x(n,r))n=t}}}}else{p(t,u)}s=o,a=t}function g(){h.point=d}function m(){c[0]=n,c[1]=r;h.point=p;s=null}function v(t,n){if(s){var e=t-a;l+=_(e)>180?e+(e>0?360:-360):e}else u=t,o=n;Le.point(t,n);d(t,n)}function y(){Le.lineStart()}function w(){v(u,o);Le.lineEnd();if(_(l)>Et)n=-(r=180);c[0]=n,c[1]=r;s=null}function x(t,n){return(n-=t)<0?n+360:n}function b(t,n){return t[0]-n[0]}function M(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}return function(a){i=r=-(n=e=Infinity);f=[];t.geo.stream(a,h);var u=f.length;if(u){f.sort(b);for(var o=1,s=f[0],l,p=[s];o<u;++o){l=f[o];if(M(l[0],s)||M(l[1],s)){if(x(s[0],l[1])>x(s[0],s[1]))s[1]=l[1];if(x(l[0],s[1])>x(s[0],s[1]))s[0]=l[0]}else{p.push(s=l)}}var d=-Infinity,g;for(var u=p.length-1,o=0,s=p[u],l;o<=u;s=l,++o){l=p[o];if((g=x(s[1],l[0]))>d)d=g,n=l[0],r=s[1]}}f=c=null;return n===Infinity||e===Infinity?[[NaN,NaN],[NaN,NaN]]:[[n,e],[r,i]]}}();t.geo.centroid=function(n){Ue=He=Xe=We=Ze=$e=Ve=Ge=Je=Ke=Qe=0;t.geo.stream(n,tr);var e=Je,r=Ke,i=Qe,a=e*e+r*r+i*i;if(a<Nt){e=$e,r=Ve,i=Ge;if(He<Et)e=Xe,r=We,i=Ze;a=e*e+r*r+i*i;if(a<Nt)return[NaN,NaN]}return[Math.atan2(r,e)*jt,qt(i/Math.sqrt(a))*jt]};var Ue,He,Xe,We,Ze,$e,Ve,Ge,Je,Ke,Qe;var tr={sphere:z,point:nr,lineStart:rr,lineEnd:ir,polygonStart:function(){tr.lineStart=ar},polygonEnd:function(){tr.lineStart=rr}};function nr(t,n){t*=Lt;var e=Math.cos(n*=Lt);er(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function er(t,n,e){++Ue;Xe+=(t-Xe)/Ue;We+=(n-We)/Ue;Ze+=(e-Ze)/Ue}function rr(){var t,n,e;tr.point=function(i,a){i*=Lt;var u=Math.cos(a*=Lt);t=u*Math.cos(i);n=u*Math.sin(i);e=Math.sin(a);tr.point=r;er(t,n,e)};function r(r,i){r*=Lt;var a=Math.cos(i*=Lt),u=a*Math.cos(r),o=a*Math.sin(r),s=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*s-e*o)*l+(l=e*u-t*s)*l+(l=t*o-n*u)*l),t*u+n*o+e*s);He+=l;$e+=l*(t+(t=u));Ve+=l*(n+(n=o));Ge+=l*(e+(e=s));er(t,n,e)}}function ir(){tr.point=nr}function ar(){var t,n,e,r,i;tr.point=function(u,o){t=u,n=o;tr.point=a;u*=Lt;var s=Math.cos(o*=Lt);e=s*Math.cos(u);r=s*Math.sin(u);i=Math.sin(o);er(e,r,i)};tr.lineEnd=function(){a(t,n);tr.lineEnd=ir;tr.point=nr};function a(t,n){t*=Lt;var a=Math.cos(n*=Lt),u=a*Math.cos(t),o=a*Math.sin(t),s=Math.sin(n),l=r*s-i*o,f=i*u-e*s,c=e*o-r*u,h=Math.sqrt(l*l+f*f+c*c),p=e*u+r*o+i*s,d=h&&-zt(p)/h,g=Math.atan2(h,p);Je+=d*l;Ke+=d*f;Qe+=d*c;He+=g;$e+=g*(e+(e=u));Ve+=g*(r+(r=o));Ge+=g*(i+(i=s));er(e,r,i)}}function ur(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}if(t.invert&&n.invert)e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])};return e}function or(){return true}function sr(t,n,e,r,i){var a=[],u=[];t.forEach(function(t){if((n=t.length-1)<=0)return;var n,e=t[0],r=t[n];if(Fe(e,r)){i.lineStart();for(var o=0;o<n;++o)i.point((e=t[o])[0],e[1]);i.lineEnd();return}var s=new fr(e,t,null,true),l=new fr(e,null,s,false);s.o=l;a.push(s);u.push(l);s=new fr(r,t,null,false);l=new fr(r,null,s,true);s.o=l;a.push(s);u.push(l)});u.sort(n);lr(a);lr(u);if(!a.length)return;for(var o=0,s=e,l=u.length;o<l;++o){u[o].e=s=!s}var f=a[0],c,h;while(1){var p=f,d=true;while(p.v)if((p=p.n)===f)return;c=p.z;i.lineStart();do{p.v=p.o.v=true;if(p.e){if(d){for(var o=0,l=c.length;o<l;++o)i.point((h=c[o])[0],h[1])}else{r(p.x,p.n.x,1,i)}p=p.n}else{if(d){c=p.p.z;for(var o=c.length-1;o>=0;--o)i.point((h=c[o])[0],h[1])}else{r(p.x,p.p.x,-1,i)}p=p.p}p=p.o;c=p.z;d=!d}while(!p.v);i.lineEnd()}}function lr(t){if(!(n=t.length))return;var n,e=0,r=t[0],i;while(++e<n){r.n=i=t[e];i.p=r;r=i}r.n=i=t[0];i.p=r}function fr(t,n,e,r){this.x=t;this.z=n;this.o=e;this.e=r;this.v=false;this.n=this.p=null}function cr(n,e,r,i){return function(a,u){var o=e(u),s=a.invert(i[0],i[1]);var l={point:f,lineStart:h,lineEnd:p,polygonStart:function(){l.point=w;l.lineStart=x;l.lineEnd=b;d=[];y=[]},polygonEnd:function(){l.point=f;l.lineStart=h;l.lineEnd=p;d=t.merge(d);var n=_r(s,y);if(d.length){if(!v)u.polygonStart(),v=true;sr(d,dr,n,r,u)}else if(n){if(!v)u.polygonStart(),v=true;u.lineStart();r(null,null,1,u);u.lineEnd()}if(v)u.polygonEnd(),v=false;d=y=null},sphere:function(){u.polygonStart();u.lineStart();r(null,null,1,u);u.lineEnd();u.polygonEnd()}};function f(t,e){var r=a(t,e);if(n(t=r[0],e=r[1]))u.point(t,e)}function c(t,n){var e=a(t,n);o.point(e[0],e[1])}function h(){l.point=c;o.lineStart()}function p(){l.point=f;o.lineEnd()}var d;var g=pr(),m=e(g),v=false,y,_;function w(t,n){_.push([t,n]);var e=a(t,n);m.point(e[0],e[1])}function x(){m.lineStart();_=[]}function b(){w(_[0][0],_[0][1]);m.lineEnd();var t=m.clean(),n=g.buffer(),e,r=n.length;_.pop();y.push(_);_=null;if(!r)return;if(t&1){e=n[0];var r=e.length-1,i=-1,a;if(r>0){if(!v)u.polygonStart(),v=true;u.lineStart();while(++i<r)u.point((a=e[i])[0],a[1]);u.lineEnd()}return}if(r>1&&t&2)n.push(n.pop().concat(n.shift()));d.push(n.filter(hr))}return l}}function hr(t){return t.length>1}function pr(){var t=[],n;return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:z,buffer:function(){var e=t;t=[];n=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function dr(t,n){return((t=t.x)[0]<0?t[1]-Pt-Et:Pt-t[1])-((n=n.x)[0]<0?n[1]-Pt-Et:Pt-n[1])}var gr=cr(or,mr,yr,[-Dt,-Dt/2]);function mr(t){var n=NaN,e=NaN,r=NaN,i;return{lineStart:function(){t.lineStart();i=1},point:function(a,u){var o=a>0?Dt:-Dt,s=_(a-n);if(_(s-Dt)<Et){t.point(n,e=(e+u)/2>0?Pt:-Pt);t.point(r,e);t.lineEnd();t.lineStart();t.point(o,e);t.point(a,e);i=0}else if(r!==o&&s>=Dt){if(_(n-r)<Et)n-=r*Et;if(_(a-o)<Et)a-=o*Et;e=vr(n,e,a,u);t.point(r,e);t.lineEnd();t.lineStart();t.point(o,e);i=0}t.point(n=a,e=u);r=o},lineEnd:function(){t.lineEnd();n=e=NaN},clean:function(){return 2-i}}}function vr(t,n,e,r){var i,a,u=Math.sin(t-e);return _(u)>Et?Math.atan((Math.sin(n)*(a=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*a*u)):(n+r)/2}function yr(t,n,e,r){var i;if(t==null){i=e*Pt;r.point(-Dt,i);r.point(0,i);r.point(Dt,i);r.point(Dt,0);r.point(Dt,-i);r.point(0,-i);r.point(-Dt,-i);r.point(-Dt,0);r.point(-Dt,i)}else if(_(t[0]-n[0])>Et){var a=t[0]<n[0]?Dt:-Dt;i=e*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(n[0],n[1])}}function _r(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],a=0,u=0;Pe.reset();for(var o=0,s=n.length;o<s;++o){var l=n[o],f=l.length;if(!f)continue;var c=l[0],h=c[0],p=c[1]/2+Dt/4,d=Math.sin(p),g=Math.cos(p),m=1;while(true){if(m===f)m=0;t=l[m];var v=t[0],y=t[1]/2+Dt/4,_=Math.sin(y),w=Math.cos(y),x=v-h,b=x>=0?1:-1,M=b*x,k=M>Dt,S=d*_;Pe.add(Math.atan2(S*b*Math.sin(M),g*w+S*Math.cos(M)));a+=k?x+b*Ct:x;if(k^h>=e^v>=e){var A=ze(Ie(c),Ie(t));Ye(A);var E=ze(i,A);Ye(E);var N=(k^x>=0?-1:1)*qt(E[2]);if(r>N||r===N&&(A[0]||A[1])){u+=k^x>=0?1:-1}}if(!m++)break;h=v,d=_,g=w,c=t}}return(a<-Et||a<Et&&Pe<0)^u&1}function wr(t){var n=Math.cos(t),e=n>0,r=_(n)>Et,i=ri(t,6*Lt);return cr(a,u,i,e?[0,-t]:[-Dt,t-Dt]);function a(t,e){return Math.cos(t)*Math.cos(e)>n}function u(t){var n,i,u,l,f;return{lineStart:function(){l=u=false;f=1},point:function(c,h){var p=[c,h],d,g=a(c,h),m=e?g?0:s(c,h):g?s(c+(c<0?Dt:-Dt),h):0;if(!n&&(l=u=g))t.lineStart();if(g!==u){d=o(n,p);if(Fe(n,d)||Fe(p,d)){p[0]+=Et;p[1]+=Et;g=a(p[0],p[1])}}if(g!==u){f=0;if(g){t.lineStart();d=o(p,n);t.point(d[0],d[1])}else{d=o(n,p);t.point(d[0],d[1]);t.lineEnd()}n=d}else if(r&&n&&e^g){var v;if(!(m&i)&&(v=o(p,n,true))){f=0;if(e){t.lineStart();t.point(v[0][0],v[0][1]);t.point(v[1][0],v[1][1]);t.lineEnd()}else{t.point(v[1][0],v[1][1]);t.lineEnd();t.lineStart();t.point(v[0][0],v[0][1])}}}if(g&&(!n||!Fe(n,p))){t.point(p[0],p[1])}n=p,u=g,i=m},lineEnd:function(){if(u)t.lineEnd();n=null},clean:function(){return f|(l&&u)<<1}}}function o(t,e,r){var i=Ie(t),a=Ie(e);var u=[1,0,0],o=ze(i,a),s=Oe(o,o),l=o[0],f=s-l*l;if(!f)return!r&&t;var c=n*s/f,h=-n*l/f,p=ze(u,o),d=Be(u,c),g=Be(o,h);qe(d,g);var m=p,v=Oe(d,m),y=Oe(m,m),w=v*v-y*(Oe(d,d)-1);if(w<0)return;var x=Math.sqrt(w),b=Be(m,(-v-x)/y);qe(b,d);b=Re(b);if(!r)return b;var M=t[0],k=e[0],S=t[1],A=e[1],E;if(k<M)E=M,M=k,k=E;var N=k-M,D=_(N-Dt)<Et,C=D||N<Et;if(!D&&A<S)E=S,S=A,A=E;if(C?D?S+A>0^b[1]<(_(b[0]-M)<Et?S:A):S<=b[1]&&b[1]<=A:N>Dt^(M<=b[0]&&b[0]<=k)){var T=Be(m,(-v+x)/y);qe(T,d);return[b,Re(T)]}}function s(n,r){var i=e?t:Dt-t,a=0;if(n<-i)a|=1;else if(n>i)a|=2;if(r<-i)a|=4;else if(r>i)a|=8;return a}}function xr(t,n,e,r){return function(i){var a=i.a,u=i.b,o=a.x,s=a.y,l=u.x,f=u.y,c=0,h=1,p=l-o,d=f-s,g;g=t-o;if(!p&&g>0)return;g/=p;if(p<0){if(g<c)return;if(g<h)h=g}else if(p>0){if(g>h)return;if(g>c)c=g}g=e-o;if(!p&&g<0)return;g/=p;if(p<0){if(g>h)return;if(g>c)c=g}else if(p>0){if(g<c)return;if(g<h)h=g}g=n-s;if(!d&&g>0)return;g/=d;if(d<0){if(g<c)return;if(g<h)h=g}else if(d>0){if(g>h)return;if(g>c)c=g}g=r-s;if(!d&&g<0)return;g/=d;if(d<0){if(g>h)return;if(g>c)c=g}else if(d>0){if(g<c)return;if(g<h)h=g}if(c>0)i.a={x:o+c*p,y:s+c*d};if(h<1)i.b={x:o+h*p,y:s+h*d};return i}}var br=1e9;t.geo.clipExtent=function(){var t,n,e,r,i,a,u={stream:function(t){if(i)i.valid=false;i=a(t);i.valid=true;return i},extent:function(o){if(!arguments.length)return[[t,n],[e,r]];a=Mr(t=+o[0][0],n=+o[0][1],e=+o[1][0],r=+o[1][1]);if(i)i.valid=false,i=null;return u}};return u.extent([[0,0],[960,500]])};function Mr(n,e,r,i){return function(s){var l=s,f=pr(),c=xr(n,e,r,i),h,p,d;var g={point:_,lineStart:N,lineEnd:D,polygonStart:function(){s=f;h=[];p=[];E=true},polygonEnd:function(){s=l;h=t.merge(h);var e=m([n,i]),r=E&&e,a=h.length;if(r||a){s.polygonStart();if(r){s.lineStart();v(null,null,1,s);s.lineEnd()}if(a){sr(h,u,e,v,s)}s.polygonEnd()}h=p=d=null}};function m(t){var n=0,e=p.length,r=t[1];for(var i=0;i<e;++i){for(var a=1,u=p[i],o=u.length,s=u[0],l;a<o;++a){l=u[a];if(s[1]<=r){if(l[1]>r&&Ot(s,l,t)>0)++n}else{if(l[1]<=r&&Ot(s,l,t)<0)--n}s=l}}return n!==0}function v(t,u,s,l){var f=0,c=0;if(t==null||(f=a(t,s))!==(c=a(u,s))||o(t,u)<0^s>0){do{l.point(f===0||f===3?n:r,f>1?i:e)}while((f=(f+s+4)%4)!==c)}else{l.point(u[0],u[1])}}function y(t,a){return n<=t&&t<=r&&e<=a&&a<=i}function _(t,n){if(y(t,n))s.point(t,n)}var w,x,b,M,k,S,A,E;function N(){g.point=C;if(p)p.push(d=[]);A=true;S=false;M=k=NaN}function D(){if(h){C(w,x);if(b&&S)f.rejoin();h.push(f.buffer())}g.point=_;if(S)s.lineEnd()}function C(t,n){t=Math.max(-br,Math.min(br,t));n=Math.max(-br,Math.min(br,n));var e=y(t,n);if(p)d.push([t,n]);if(A){w=t,x=n,b=e;A=false;if(e){s.lineStart();s.point(t,n)}}else{if(e&&S)s.point(t,n);else{var r={a:{x:M,y:k},b:{x:t,y:n}};if(c(r)){if(!S){s.lineStart();s.point(r.a.x,r.a.y)}s.point(r.b.x,r.b.y);if(!e)s.lineEnd();E=false}else if(e){s.lineStart();s.point(t,n);E=false}}}M=t,k=n,S=e}return g};function a(t,i){return _(t[0]-n)<Et?i>0?0:3:_(t[0]-r)<Et?i>0?2:1:_(t[1]-e)<Et?i>0?1:0:i>0?3:2}function u(t,n){return o(t.x,n.x)}function o(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:e===0?n[1]-t[1]:e===1?t[0]-n[0]:e===2?t[1]-n[1]:n[0]-t[0]}}function kr(t){var n=0,e=Dt/3,r=Vr(t),i=r(n,e);i.parallels=function(t){if(!arguments.length)return[n/Dt*180,e/Dt*180];return r(n=t[0]*Dt/180,e=t[1]*Dt/180)};return i}function Sr(t,n){var e=Math.sin(t),r=(e+Math.sin(n))/2,i=1+e*(2*r-e),a=Math.sqrt(i)/r;function u(t,n){var e=Math.sqrt(i-2*r*Math.sin(n))/r;return[e*Math.sin(t*=r),a-e*Math.cos(t)]}u.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/r,qt((i-(t*t+e*e)*r*r)/(2*r))]};return u}(t.geo.conicEqualArea=function(){return kr(Sr)}).raw=Sr;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var n=t.geo.albers();var e=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var r=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var i,a={point:function(t,n){i=[t,n]}},u,o,s;function l(t){var n=t[0],e=t[1];i=null;(u(n,e),i)||(o(n,e),i)||s(n,e);return i}l.invert=function(t){var i=n.scale(),a=n.translate(),u=(t[0]-a[0])/i,o=(t[1]-a[1])/i;return(o>=.12&&o<.234&&u>=-.425&&u<-.214?e:o>=.166&&o<.234&&u>=-.214&&u<-.115?r:n).invert(t)};l.stream=function(t){var i=n.stream(t),a=e.stream(t),u=r.stream(t);return{point:function(t,n){i.point(t,n);a.point(t,n);u.point(t,n)},sphere:function(){i.sphere();a.sphere();u.sphere()},lineStart:function(){i.lineStart();a.lineStart();u.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();u.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();u.polygonStart();

},polygonEnd:function(){i.polygonEnd();a.polygonEnd();u.polygonEnd()}}};l.precision=function(t){if(!arguments.length)return n.precision();n.precision(t);e.precision(t);r.precision(t);return l};l.scale=function(t){if(!arguments.length)return n.scale();n.scale(t);e.scale(t*.35);r.scale(t);return l.translate(n.translate())};l.translate=function(t){if(!arguments.length)return n.translate();var i=n.scale(),f=+t[0],c=+t[1];u=n.translate(t).clipExtent([[f-.455*i,c-.238*i],[f+.455*i,c+.238*i]]).stream(a).point;o=e.translate([f-.307*i,c+.201*i]).clipExtent([[f-.425*i+Et,c+.12*i+Et],[f-.214*i-Et,c+.234*i-Et]]).stream(a).point;s=r.translate([f-.205*i,c+.212*i]).clipExtent([[f-.214*i+Et,c+.166*i+Et],[f-.115*i-Et,c+.234*i-Et]]).stream(a).point;return l};return l.scale(1070)};var Ar,Er,Nr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){Er=0;Nr.lineStart=Dr},polygonEnd:function(){Nr.lineStart=Nr.lineEnd=Nr.point=z;Ar+=_(Er/2)}};function Dr(){var t,n,e,r;Nr.point=function(a,u){Nr.point=i;t=e=a,n=r=u};function i(t,n){Er+=r*t-e*n;e=t,r=n}Nr.lineEnd=function(){i(t,n)}}var Cr,Tr,Pr,Lr;var jr={point:Ir,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function Ir(t,n){if(t<Cr)Cr=t;if(t>Pr)Pr=t;if(n<Tr)Tr=n;if(n>Lr)Lr=n}function Or(){var t=zr(4.5),n=[];var e={point:r,lineStart:function(){e.point=i},lineEnd:u,polygonStart:function(){e.lineEnd=o},polygonEnd:function(){e.lineEnd=u;e.point=r},pointRadius:function(n){t=zr(n);return e},result:function(){if(n.length){var t=n.join("");n=[];return t}}};function r(e,r){n.push("M",e,",",r,t)}function i(t,r){n.push("M",t,",",r);e.point=a}function a(t,e){n.push("L",t,",",e)}function u(){e.point=r}function o(){n.push("Z")}return e}function zr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var qr={point:Br,lineStart:Yr,lineEnd:Rr,polygonStart:function(){qr.lineStart=Fr},polygonEnd:function(){qr.point=Br;qr.lineStart=Yr;qr.lineEnd=Rr}};function Br(t,n){Xe+=t;We+=n;++Ze}function Yr(){var t,n;qr.point=function(r,i){qr.point=e;Br(t=r,n=i)};function e(e,r){var i=e-t,a=r-n,u=Math.sqrt(i*i+a*a);$e+=u*(t+e)/2;Ve+=u*(n+r)/2;Ge+=u;Br(t=e,n=r)}}function Rr(){qr.point=Br}function Fr(){var t,n,e,r;qr.point=function(a,u){qr.point=i;Br(t=e=a,n=r=u)};function i(t,n){var i=t-e,a=n-r,u=Math.sqrt(i*i+a*a);$e+=u*(e+t)/2;Ve+=u*(r+n)/2;Ge+=u;u=r*t-e*n;Je+=u*(e+t);Ke+=u*(r+n);Qe+=u*3;Br(e=t,r=n)}qr.lineEnd=function(){i(t,n)}}function Ur(t){var n=4.5;var e={point:r,lineStart:function(){e.point=i},lineEnd:u,polygonStart:function(){e.lineEnd=o},polygonEnd:function(){e.lineEnd=u;e.point=r},pointRadius:function(t){n=t;return e},result:z};function r(e,r){t.moveTo(e+n,r);t.arc(e,r,n,0,Ct)}function i(n,r){t.moveTo(n,r);e.point=a}function a(n,e){t.lineTo(n,e)}function u(){e.point=r}function o(){t.closePath()}return e}function Hr(t){var n=.5,e=Math.cos(30*Lt),r=16;function i(t){return(r?u:a)(t)}function a(n){return Zr(n,function(e,r){e=t(e,r);n.point(e[0],e[1])})}function u(n){var e,i,a,u,s,l,f,c,h,p,d,g,m;var v={point:y,lineStart:_,lineEnd:x,polygonStart:function(){n.polygonStart();v.lineStart=b},polygonEnd:function(){n.polygonEnd();v.lineStart=_}};function y(e,r){e=t(e,r);n.point(e[0],e[1])}function _(){h=NaN;v.point=w;n.lineStart()}function w(e,i){var a=Ie([e,i]),u=t(e,i);o(h,p,c,d,g,m,h=u[0],p=u[1],c=e,d=a[0],g=a[1],m=a[2],r,n);n.point(h,p)}function x(){v.point=y;n.lineEnd()}function b(){_();v.point=M;v.lineEnd=k}function M(t,n){w(e=t,i=n),a=h,u=p,s=d,l=g,f=m;v.point=w}function k(){o(h,p,c,d,g,m,a,u,e,s,l,f,r,n);v.lineEnd=x;x()}return v}function o(r,i,a,u,s,l,f,c,h,p,d,g,m,v){var y=f-r,w=c-i,x=y*y+w*w;if(x>4*n&&m--){var b=u+p,M=s+d,k=l+g,S=Math.sqrt(b*b+M*M+k*k),A=Math.asin(k/=S),E=_(_(k)-1)<Et||_(a-h)<Et?(a+h)/2:Math.atan2(M,b),N=t(E,A),D=N[0],C=N[1],T=D-r,P=C-i,L=w*T-y*P;if(L*L/x>n||_((y*T+w*P)/x-.5)>.3||u*p+s*d+l*g<e){o(r,i,a,u,s,l,D,C,E,b/=S,M/=S,k,m,v);v.point(D,C);o(D,C,E,b,M,k,f,c,h,p,d,g,m,v)}}}i.precision=function(t){if(!arguments.length)return Math.sqrt(n);r=(n=t*t)>0&&16;return i};return i}t.geo.path=function(){var n=4.5,e,r,i,a,u;function o(e){if(e){if(typeof n==="function")a.pointRadius(+n.apply(this,arguments));if(!u||!u.valid)u=i(a);t.geo.stream(e,u)}return a.result()}o.area=function(n){Ar=0;t.geo.stream(n,i(Nr));return Ar};o.centroid=function(n){Xe=We=Ze=$e=Ve=Ge=Je=Ke=Qe=0;t.geo.stream(n,i(qr));return Qe?[Je/Qe,Ke/Qe]:Ge?[$e/Ge,Ve/Ge]:Ze?[Xe/Ze,We/Ze]:[NaN,NaN]};o.bounds=function(n){Pr=Lr=-(Cr=Tr=Infinity);t.geo.stream(n,i(jr));return[[Cr,Tr],[Pr,Lr]]};o.projection=function(t){if(!arguments.length)return e;i=(e=t)?t.stream||Xr(t):L;return s()};o.context=function(t){if(!arguments.length)return r;a=(r=t)==null?new Or:new Ur(t);if(typeof n!=="function")a.pointRadius(n);return s()};o.pointRadius=function(t){if(!arguments.length)return n;n=typeof t==="function"?t:(a.pointRadius(+t),+t);return o};function s(){u=null;return o}return o.projection(t.geo.albersUsa()).context(null)};function Xr(t){var n=Hr(function(n,e){return t([n*jt,e*jt])});return function(t){return Gr(n(t))}}t.geo.transform=function(t){return{stream:function(n){var e=new Wr(n);for(var r in t)e[r]=t[r];return e}}};function Wr(t){this.stream=t}Wr.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zr(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}t.geo.projection=$r;t.geo.projectionMutator=Vr;function $r(t){return Vr(function(){return t})()}function Vr(n){var e,r,i,a=Hr(function(t,n){t=e(t,n);return[t[0]*u+d,g-t[1]*u]}),u=150,o=480,s=250,l=0,f=0,c=0,h=0,p=0,d,g,m=gr,v=L,y=null,_=null,w;function x(t){t=i(t[0]*Lt,t[1]*Lt);return[t[0]*u+d,g-t[1]*u]}function b(t){t=i.invert((t[0]-d)/u,(g-t[1])/u);return t&&[t[0]*jt,t[1]*jt]}x.stream=function(t){if(w)w.valid=false;w=Gr(m(r,a(v(t))));w.valid=true;return w};x.clipAngle=function(t){if(!arguments.length)return y;m=t==null?(y=t,gr):wr((y=+t)*Lt);return k()};x.clipExtent=function(t){if(!arguments.length)return _;_=t;v=t?Mr(t[0][0],t[0][1],t[1][0],t[1][1]):L;return k()};x.scale=function(t){if(!arguments.length)return u;u=+t;return M()};x.translate=function(t){if(!arguments.length)return[o,s];o=+t[0];s=+t[1];return M()};x.center=function(t){if(!arguments.length)return[l*jt,f*jt];l=t[0]%360*Lt;f=t[1]%360*Lt;return M()};x.rotate=function(t){if(!arguments.length)return[c*jt,h*jt,p*jt];c=t[0]%360*Lt;h=t[1]%360*Lt;p=t.length>2?t[2]%360*Lt:0;return M()};t.rebind(x,a,"precision");function M(){i=ur(r=Qr(c,h,p),e);var t=e(l,f);d=o-t[0]*u;g=s+t[1]*u;return k()}function k(){if(w)w.valid=false,w=null;return x}return function(){e=n.apply(this,arguments);x.invert=e.invert&&b;return M()}}function Gr(t){return Zr(t,function(n,e){t.point(n*Lt,e*Lt)})}function Jr(t,n){return[t,n]}(t.geo.equirectangular=function(){return $r(Jr)}).raw=Jr.invert=Jr;t.geo.rotation=function(t){t=Qr(t[0]%360*Lt,t[1]*Lt,t.length>2?t[2]*Lt:0);function n(n){n=t(n[0]*Lt,n[1]*Lt);return n[0]*=jt,n[1]*=jt,n}n.invert=function(n){n=t.invert(n[0]*Lt,n[1]*Lt);return n[0]*=jt,n[1]*=jt,n};return n};function Kr(t,n){return[t>Dt?t-Ct:t<-Dt?t+Ct:t,n]}Kr.invert=Jr;function Qr(t,n,e){return t?n||e?ur(ni(t),ei(n,e)):ni(t):n||e?ei(n,e):Kr}function ti(t){return function(n,e){return n+=t,[n>Dt?n-Ct:n<-Dt?n+Ct:n,e]}}function ni(t){var n=ti(t);n.invert=ti(-t);return n}function ei(t,n){var e=Math.cos(t),r=Math.sin(t),i=Math.cos(n),a=Math.sin(n);function u(t,n){var u=Math.cos(n),o=Math.cos(t)*u,s=Math.sin(t)*u,l=Math.sin(n),f=l*e+o*r;return[Math.atan2(s*i-f*a,o*e-l*r),qt(f*i+s*a)]}u.invert=function(t,n){var u=Math.cos(n),o=Math.cos(t)*u,s=Math.sin(t)*u,l=Math.sin(n),f=l*i-s*a;return[Math.atan2(s*i+l*a,o*e+f*r),qt(f*e-o*r)]};return u}t.geo.circle=function(){var t=[0,0],n,e=6,r;function i(){var n=typeof t==="function"?t.apply(this,arguments):t,e=Qr(-n[0]*Lt,-n[1]*Lt,0).invert,i=[];r(null,null,1,{point:function(t,n){i.push(t=e(t,n));t[0]*=jt,t[1]*=jt}});return{type:"Polygon",coordinates:[i]}}i.origin=function(n){if(!arguments.length)return t;t=n;return i};i.angle=function(t){if(!arguments.length)return n;r=ri((n=+t)*Lt,e*Lt);return i};i.precision=function(t){if(!arguments.length)return e;r=ri(n*Lt,(e=+t)*Lt);return i};return i.angle(90)};function ri(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,a,u,o){var s=u*n;if(i!=null){i=ii(e,i);a=ii(e,a);if(u>0?i<a:i>a)i+=u*Ct}else{i=t+u*Ct;a=t-.5*s}for(var l,f=i;u>0?f>a:f<a;f-=s){o.point((l=Re([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],l[1])}}}function ii(t,n){var e=Ie(n);e[0]-=t;Ye(e);var r=zt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Et)%(2*Math.PI)}t.geo.distance=function(t,n){var e=(n[0]-t[0])*Lt,r=t[1]*Lt,i=n[1]*Lt,a=Math.sin(e),u=Math.cos(e),o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),f=Math.cos(i),c;return Math.atan2(Math.sqrt((c=f*a)*c+(c=s*l-o*f*u)*c),o*l+s*f*u)};t.geo.graticule=function(){var n,e,r,i,a,u,o,s,l=10,f=l,c=90,h=360,p,d,g,m,v=2.5;function y(){return{type:"MultiLineString",coordinates:w()}}function w(){return t.range(Math.ceil(i/c)*c,r,c).map(g).concat(t.range(Math.ceil(s/h)*h,o,h).map(m)).concat(t.range(Math.ceil(e/l)*l,n,l).filter(function(t){return _(t%c)>Et}).map(p)).concat(t.range(Math.ceil(u/f)*f,a,f).filter(function(t){return _(t%h)>Et}).map(d))}y.lines=function(){return w().map(function(t){return{type:"LineString",coordinates:t}})};y.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(r).reverse().slice(1),m(s).reverse().slice(1))]}};y.extent=function(t){if(!arguments.length)return y.minorExtent();return y.majorExtent(t).minorExtent(t)};y.majorExtent=function(t){if(!arguments.length)return[[i,s],[r,o]];i=+t[0][0],r=+t[1][0];s=+t[0][1],o=+t[1][1];if(i>r)t=i,i=r,r=t;if(s>o)t=s,s=o,o=t;return y.precision(v)};y.minorExtent=function(t){if(!arguments.length)return[[e,u],[n,a]];e=+t[0][0],n=+t[1][0];u=+t[0][1],a=+t[1][1];if(e>n)t=e,e=n,n=t;if(u>a)t=u,u=a,a=t;return y.precision(v)};y.step=function(t){if(!arguments.length)return y.minorStep();return y.majorStep(t).minorStep(t)};y.majorStep=function(t){if(!arguments.length)return[c,h];c=+t[0],h=+t[1];return y};y.minorStep=function(t){if(!arguments.length)return[l,f];l=+t[0],f=+t[1];return y};y.precision=function(t){if(!arguments.length)return v;v=+t;p=ai(u,a,90);d=ui(e,n,v);g=ai(s,o,90);m=ui(i,r,v);return y};return y.majorExtent([[-180,-90+Et],[180,90-Et]]).minorExtent([[-180,-80-Et],[180,80+Et]])};function ai(n,e,r){var i=t.range(n,e-Et,r).concat(e);return function(t){return i.map(function(n){return[t,n]})}}function ui(n,e,r){var i=t.range(n,e-Et,r).concat(e);return function(t){return i.map(function(n){return[n,t]})}}function oi(t){return t.source}function si(t){return t.target}t.geo.greatArc=function(){var n=oi,e,r=si,i;function a(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),i||r.apply(this,arguments)]}}a.distance=function(){return t.geo.distance(e||n.apply(this,arguments),i||r.apply(this,arguments))};a.source=function(t){if(!arguments.length)return n;n=t,e=typeof t==="function"?null:t;return a};a.target=function(t){if(!arguments.length)return r;r=t,i=typeof t==="function"?null:t;return a};a.precision=function(){return arguments.length?a:0};return a};t.geo.interpolate=function(t,n){return li(t[0]*Lt,t[1]*Lt,n[0]*Lt,n[1]*Lt)};function li(t,n,e,r){var i=Math.cos(n),a=Math.sin(n),u=Math.cos(r),o=Math.sin(r),s=i*Math.cos(t),l=i*Math.sin(t),f=u*Math.cos(e),c=u*Math.sin(e),h=2*Math.asin(Math.sqrt(Ft(r-n)+i*u*Ft(e-t))),p=1/Math.sin(h);var d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*s+n*f,i=e*l+n*c,u=e*a+n*o;return[Math.atan2(i,r)*jt,Math.atan2(u,Math.sqrt(r*r+i*i))*jt]}:function(){return[t*jt,n*jt]};d.distance=h;return d}t.geo.length=function(n){fi=0;t.geo.stream(n,ci);return fi};var fi;var ci={sphere:z,point:z,lineStart:hi,lineEnd:z,polygonStart:z,polygonEnd:z};function hi(){var t,n,e;ci.point=function(i,a){t=i*Lt,n=Math.sin(a*=Lt),e=Math.cos(a);ci.point=r};ci.lineEnd=function(){ci.point=ci.lineEnd=z};function r(r,i){var a=Math.sin(i*=Lt),u=Math.cos(i),o=_((r*=Lt)-t),s=Math.cos(o);fi+=Math.atan2(Math.sqrt((o=u*Math.sin(o))*o+(o=e*a-n*u*s)*o),n*a+e*u*s);t=r,n=a,e=u}}function pi(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),a=t(r*i);return[a*i*Math.sin(n),a*Math.sin(e)]}e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),a=Math.sin(i),u=Math.cos(i);return[Math.atan2(t*a,r*u),Math.asin(r&&e*a/r)]};return e}var di=pi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return $r(di)}).raw=di;var gi=pi(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},L);(t.geo.azimuthalEquidistant=function(){return $r(gi)}).raw=gi;function mi(t,n){var e=Math.cos(t),r=function(t){return Math.tan(Dt/4+t/2)},i=t===n?Math.sin(t):Math.log(e/Math.cos(n))/Math.log(r(n)/r(t)),a=e*Math.pow(r(t),i)/i;if(!i)return _i;function u(t,n){if(a>0){if(n<-Pt+Et)n=-Pt+Et}else{if(n>Pt-Et)n=Pt-Et}var e=a/Math.pow(r(n),i);return[e*Math.sin(i*t),a-e*Math.cos(i*t)]}u.invert=function(t,n){var e=a-n,r=It(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Pt]};return u}(t.geo.conicConformal=function(){return kr(mi)}).raw=mi;function vi(t,n){var e=Math.cos(t),r=t===n?Math.sin(t):(e-Math.cos(n))/(n-t),i=e/r+t;if(_(r)<Et)return Jr;function a(t,n){var e=i-n;return[e*Math.sin(r*t),i-e*Math.cos(r*t)]}a.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/r,i-It(r)*Math.sqrt(t*t+e*e)]};return a}(t.geo.conicEquidistant=function(){return kr(vi)}).raw=vi;var yi=pi(function(t){return 1/t},Math.atan);(t.geo.gnomonic=function(){return $r(yi)}).raw=yi;function _i(t,n){return[t,Math.log(Math.tan(Dt/4+n/2))]}_i.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Pt]};function wi(t){var n=$r(t),e=n.scale,r=n.translate,i=n.clipExtent,a;n.scale=function(){var t=e.apply(n,arguments);return t===n?a?n.clipExtent(null):n:t};n.translate=function(){var t=r.apply(n,arguments);return t===n?a?n.clipExtent(null):n:t};n.clipExtent=function(t){var u=i.apply(n,arguments);if(u===n){if(a=t==null){var o=Dt*e(),s=r();i([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])}}else if(a){u=null}return u};return n.clipExtent(null)}(t.geo.mercator=function(){return wi(_i)}).raw=_i;var xi=pi(function(){return 1},Math.asin);(t.geo.orthographic=function(){return $r(xi)}).raw=xi;var bi=pi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(t.geo.stereographic=function(){return $r(bi)}).raw=bi;function Mi(t,n){return[Math.log(Math.tan(Dt/4+n/2)),-t]}Mi.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Pt]};(t.geo.transverseMercator=function(){var t=wi(Mi),n=t.center,e=t.rotate;t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])};t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])};return e([0,0,90])}).raw=Mi;t.geom={};function ki(t){return t[0]}function Si(t){return t[1]}t.geom.hull=function(t){var n=ki,e=Si;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r=Sn(n),i=Sn(e),a,u=t.length,o=[],s=[];for(a=0;a<u;a++){o.push([+r.call(this,t[a],a),+i.call(this,t[a],a),a])}o.sort(Ei);for(a=0;a<u;a++)s.push([o[a][0],-o[a][1]]);var l=Ai(o),f=Ai(s);var c=f[0]===l[0],h=f[f.length-1]===l[l.length-1],p=[];for(a=l.length-1;a>=0;--a)p.push(t[o[l[a]][2]]);for(a=+c;a<f.length-h;++a)p.push(t[o[f[a]][2]]);return p}r.x=function(t){return arguments.length?(n=t,r):n};r.y=function(t){return arguments.length?(e=t,r):e};return r};function Ai(t){var n=t.length,e=[0,1],r=2;for(var i=2;i<n;i++){while(r>1&&Ot(t[e[r-2]],t[e[r-1]],t[i])<=0)--r;e[r++]=i}return e.slice(0,r)}function Ei(t,n){return t[0]-n[0]||t[1]-n[1]}t.geom.polygon=function(t){H(t,Ni);return t};var Ni=t.geom.polygon.prototype=[];Ni.area=function(){var t=-1,n=this.length,e,r=this[n-1],i=0;while(++t<n){e=r;r=this[t];i+=e[1]*r[0]-e[0]*r[1]}return i*.5};Ni.centroid=function(t){var n=-1,e=this.length,r=0,i=0,a,u=this[e-1],o;if(!arguments.length)t=-1/(6*this.area());while(++n<e){a=u;u=this[n];o=a[0]*u[1]-u[0]*a[1];r+=(a[0]+u[0])*o;i+=(a[1]+u[1])*o}return[r*t,i*t]};Ni.clip=function(t){var n,e=Ti(t),r=-1,i=this.length-Ti(this),a,u,o=this[i-1],s,l,f;while(++r<i){n=t.slice();t.length=0;s=this[r];l=n[(u=n.length-e)-1];a=-1;while(++a<u){f=n[a];if(Di(f,o,s)){if(!Di(l,o,s)){t.push(Ci(l,f,o,s))}t.push(f)}else if(Di(l,o,s)){t.push(Ci(l,f,o,s))}l=f}if(e)t.push(t[0]);o=s}return t};function Di(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Ci(t,n,e,r){var i=t[0],a=e[0],u=n[0]-i,o=r[0]-a,s=t[1],l=e[1],f=n[1]-s,c=r[1]-l,h=(o*(s-l)-c*(i-a))/(c*u-o*f);return[i+h*u,s+h*f]}function Ti(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}var Pi,Li,ji,Ii=[],Oi,zi,qi=[];function Bi(){ua(this);this.edge=this.site=this.circle=null}function Yi(t){var n=Ii.pop()||new Bi;n.site=t;return n}function Ri(t){Ji(t);ji.remove(t);Ii.push(t);ua(t)}function Fi(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},a=t.P,u=t.N,o=[t];Ri(t);var s=a;while(s.circle&&_(e-s.circle.x)<Et&&_(r-s.circle.cy)<Et){a=s.P;o.unshift(s);Ri(s);s=a}o.unshift(s);Ji(s);var l=u;while(l.circle&&_(e-l.circle.x)<Et&&_(r-l.circle.cy)<Et){u=l.N;o.push(l);Ri(l);l=u}o.push(l);Ji(l);var f=o.length,c;for(c=1;c<f;++c){l=o[c];s=o[c-1];ra(l.edge,s.site,l.site,i)}s=o[0];l=o[f-1];l.edge=na(s.site,l.site,null,i);Gi(s);Gi(l)}function Ui(t){var n=t.x,e=t.y,r,i,a,u,o=ji._;while(o){a=Hi(o,e)-n;if(a>Et)o=o.L;else{u=n-Xi(o,e);if(u>Et){if(!o.R){r=o;break}o=o.R}else{if(a>-Et){r=o.P;i=o}else if(u>-Et){r=o;i=o.N}else{r=i=o}break}}}var s=Yi(t);ji.insert(r,s);if(!r&&!i)return;if(r===i){Ji(r);i=Yi(r.site);ji.insert(s,i);s.edge=i.edge=na(r.site,s.site);Gi(r);Gi(i);return}if(!i){s.edge=na(r.site,s.site);return}Ji(r);Ji(i);var l=r.site,f=l.x,c=l.y,h=t.x-f,p=t.y-c,d=i.site,g=d.x-f,m=d.y-c,v=2*(h*m-p*g),y=h*h+p*p,_=g*g+m*m,w={x:(m*y-p*_)/v+f,y:(h*_-g*y)/v+c};ra(i.edge,l,d,w);s.edge=na(l,t,null,w);i.edge=na(t,d,null,w);Gi(r);Gi(i)}function Hi(t,n){var e=t.site,r=e.x,i=e.y,a=i-n;if(!a)return r;var u=t.P;if(!u)return-Infinity;e=u.site;var o=e.x,s=e.y,l=s-n;if(!l)return o;var f=o-r,c=1/a-1/l,h=f/l;if(c)return(-h+Math.sqrt(h*h-2*c*(f*f/(-2*l)-s+l/2+i-a/2)))/c+r;return(r+o)/2}function Xi(t,n){var e=t.N;if(e)return Hi(e,n);var r=t.site;return r.y===n?r.x:Infinity}function Wi(t){this.site=t;this.edges=[]}Wi.prototype.prepare=function(){var t=this.edges,n=t.length,e;while(n--){e=t[n].edge;if(!e.b||!e.a)t.splice(n,1)}t.sort($i);return t.length};function Zi(t){var n=t[0][0],e=t[1][0],r=t[0][1],i=t[1][1],a,u,o,s,l=Li,f=l.length,c,h,p,d,g,m;while(f--){c=l[f];if(!c||!c.prepare())continue;p=c.edges;d=p.length;h=0;while(h<d){m=p[h].end(),o=m.x,s=m.y;g=p[++h%d].start(),a=g.x,u=g.y;if(_(o-a)>Et||_(s-u)>Et){p.splice(h,0,new ia(ea(c.site,m,_(o-n)<Et&&i-s>Et?{x:n,y:_(a-n)<Et?u:i}:_(s-i)<Et&&e-o>Et?{x:_(u-i)<Et?a:e,y:i}:_(o-e)<Et&&s-r>Et?{x:e,y:_(a-e)<Et?u:r}:_(s-r)<Et&&o-n>Et?{x:_(u-r)<Et?a:n,y:r}:null),c.site,null));++d}}}}function $i(t,n){return n.angle-t.angle}function Vi(){ua(this);this.x=this.y=this.arc=this.site=this.cy=null}function Gi(t){var n=t.P,e=t.N;if(!n||!e)return;var r=n.site,i=t.site,a=e.site;if(r===a)return;var u=i.x,o=i.y,s=r.x-u,l=r.y-o,f=a.x-u,c=a.y-o;var h=2*(s*c-l*f);if(h>=-Nt)return;var p=s*s+l*l,d=f*f+c*c,g=(c*p-l*d)/h,m=(s*d-f*p)/h,c=m+o;var v=qi.pop()||new Vi;v.arc=t;v.site=i;v.x=g+u;v.y=c+Math.sqrt(g*g+m*m);v.cy=c;t.circle=v;var y=null,_=zi._;while(_){if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(_.L)_=_.L;else{y=_.P;break}}else{if(_.R)_=_.R;else{y=_;break}}}zi.insert(y,v);if(!y)Oi=v}function Ji(t){var n=t.circle;if(n){if(!n.P)Oi=n.N;zi.remove(n);qi.push(n);ua(n);t.circle=null}}function Ki(t){var n=Pi,e=xr(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length,i;while(r--){i=n[r];if(!Qi(i,t)||!e(i)||_(i.a.x-i.b.x)<Et&&_(i.a.y-i.b.y)<Et){i.a=i.b=null;n.splice(r,1)}}}function Qi(t,n){var e=t.b;if(e)return true;var r=t.a,i=n[0][0],a=n[1][0],u=n[0][1],o=n[1][1],s=t.l,l=t.r,f=s.x,c=s.y,h=l.x,p=l.y,d=(f+h)/2,g=(c+p)/2,m,v;if(p===c){if(d<i||d>=a)return;if(f>h){if(!r)r={x:d,y:u};else if(r.y>=o)return;e={x:d,y:o}}else{if(!r)r={x:d,y:o};else if(r.y<u)return;e={x:d,y:u}}}else{m=(f-h)/(p-c);v=g-m*d;if(m<-1||m>1){if(f>h){if(!r)r={x:(u-v)/m,y:u};else if(r.y>=o)return;e={x:(o-v)/m,y:o}}else{if(!r)r={x:(o-v)/m,y:o};else if(r.y<u)return;e={x:(u-v)/m,y:u}}}else{if(c<p){if(!r)r={x:i,y:m*i+v};else if(r.x>=a)return;e={x:a,y:m*a+v}}else{if(!r)r={x:a,y:m*a+v};else if(r.x<i)return;e={x:i,y:m*i+v}}}}t.a=r;t.b=e;return true}function ta(t,n){this.l=t;this.r=n;this.a=this.b=null}function na(t,n,e,r){var i=new ta(t,n);Pi.push(i);if(e)ra(i,t,n,e);if(r)ra(i,n,t,r);Li[t.i].edges.push(new ia(i,t,n));Li[n.i].edges.push(new ia(i,n,t));return i}function ea(t,n,e){var r=new ta(t,null);r.a=n;r.b=e;Pi.push(r);return r}function ra(t,n,e,r){if(!t.a&&!t.b){t.a=r;t.l=n;t.r=e}else if(t.l===e){t.b=r}else{t.a=r}}function ia(t,n,e){var r=t.a,i=t.b;this.edge=t;this.site=n;this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}ia.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function aa(){this._=null}function ua(t){t.U=t.C=t.L=t.R=t.P=t.N=null}aa.prototype={insert:function(t,n){var e,r,i;if(t){n.P=t;n.N=t.N;if(t.N)t.N.P=n;t.N=n;if(t.R){t=t.R;while(t.L)t=t.L;t.L=n}else{t.R=n}e=t}else if(this._){t=la(this._);n.P=null;n.N=t;t.P=t.L=n;e=t}else{n.P=n.N=null;this._=n;e=null}n.L=n.R=null;n.U=e;n.C=true;t=n;while(e&&e.C){r=e.U;if(e===r.L){i=r.R;if(i&&i.C){e.C=i.C=false;r.C=true;t=r}else{if(t===e.R){oa(this,e);t=e;e=t.U}e.C=false;r.C=true;sa(this,r)}}else{i=r.L;if(i&&i.C){e.C=i.C=false;r.C=true;t=r}else{if(t===e.L){sa(this,e);t=e;e=t.U}e.C=false;r.C=true;oa(this,r)}}e=t.U}this._.C=false},remove:function(t){if(t.N)t.N.P=t.P;if(t.P)t.P.N=t.N;t.N=t.P=null;var n=t.U,e,r=t.L,i=t.R,a,u;if(!r)a=i;else if(!i)a=r;else a=la(i);if(n){if(n.L===t)n.L=a;else n.R=a}else{this._=a}if(r&&i){u=a.C;a.C=t.C;a.L=r;r.U=a;if(a!==i){n=a.U;a.U=t.U;t=a.R;n.L=t;a.R=i;i.U=a}else{a.U=n;n=a;t=a.R}}else{u=t.C;t=a}if(t)t.U=n;if(u)return;if(t&&t.C){t.C=false;return}do{if(t===this._)break;if(t===n.L){e=n.R;if(e.C){e.C=false;n.C=true;oa(this,n);e=n.R}if(e.L&&e.L.C||e.R&&e.R.C){if(!e.R||!e.R.C){e.L.C=false;e.C=true;sa(this,e);e=n.R}e.C=n.C;n.C=e.R.C=false;oa(this,n);t=this._;break}}else{e=n.L;if(e.C){e.C=false;n.C=true;sa(this,n);e=n.L}if(e.L&&e.L.C||e.R&&e.R.C){if(!e.L||!e.L.C){e.R.C=false;e.C=true;oa(this,e);e=n.L}e.C=n.C;n.C=e.L.C=false;sa(this,n);t=this._;break}}e.C=true;t=n;n=n.U}while(!t.C);if(t)t.C=false}};function oa(t,n){var e=n,r=n.R,i=e.U;if(i){if(i.L===e)i.L=r;else i.R=r}else{t._=r}r.U=i;e.U=r;e.R=r.L;if(e.R)e.R.U=e;r.L=e}function sa(t,n){var e=n,r=n.L,i=e.U;if(i){if(i.L===e)i.L=r;else i.R=r}else{t._=r}r.U=i;e.U=r;e.L=r.R;if(e.L)e.L.U=e;r.R=e}function la(t){while(t.L)t=t.L;return t}function fa(t,n){var e=t.sort(ca).pop(),r,i,a;Pi=[];Li=new Array(t.length);ji=new aa;zi=new aa;while(true){a=Oi;if(e&&(!a||e.y<a.y||e.y===a.y&&e.x<a.x)){if(e.x!==r||e.y!==i){Li[e.i]=new Wi(e);Ui(e);r=e.x,i=e.y}e=t.pop()}else if(a){Fi(a.arc)}else{break}}if(n)Ki(n),Zi(n);var u={cells:Li,edges:Pi};ji=zi=Pi=Li=null;return u}function ca(t,n){return n.y-t.y||n.x-t.x}t.geom.voronoi=function(t){var n=ki,e=Si,r=n,i=e,a=ha;if(t)return u(t);function u(t){var n=new Array(t.length),e=a[0][0],r=a[0][1],i=a[1][0],u=a[1][1];fa(o(t),a).cells.forEach(function(a,o){var s=a.edges,l=a.site,f=n[o]=s.length?s.map(function(t){var n=t.start();return[n.x,n.y]}):l.x>=e&&l.x<=i&&l.y>=r&&l.y<=u?[[e,u],[i,u],[i,r],[e,r]]:[];f.point=t[o]});return n}function o(t){return t.map(function(t,n){return{x:Math.round(r(t,n)/Et)*Et,y:Math.round(i(t,n)/Et)*Et,i:n}})}u.links=function(t){return fa(o(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})};u.triangles=function(t){var n=[];fa(o(t)).cells.forEach(function(e,r){var i=e.site,a=e.edges.sort($i),u=-1,o=a.length,s,l,f=a[o-1].edge,c=f.l===i?f.r:f.l;while(++u<o){s=f;l=c;f=a[u].edge;c=f.l===i?f.r:f.l;if(r<l.i&&r<c.i&&pa(i,l,c)<0){n.push([t[r],t[l.i],t[c.i]])}}});return n};u.x=function(t){return arguments.length?(r=Sn(n=t),u):n};u.y=function(t){return arguments.length?(i=Sn(e=t),u):e};u.clipExtent=function(t){if(!arguments.length)return a===ha?null:a;a=t==null?ha:t;return u};u.size=function(t){if(!arguments.length)return a===ha?null:a&&a[1];return u.clipExtent(t&&[[0,0],t])};return u};var ha=[[-1e6,-1e6],[1e6,1e6]];function pa(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}t.geom.delaunay=function(n){return t.geom.voronoi().triangles(n)};t.geom.quadtree=function(t,n,e,r,i){var a=ki,u=Si,o;if(o=arguments.length){a=da;u=ga;if(o===3){i=e;r=n;e=n=0}return s(t)}function s(t){var s,l=Sn(a),f=Sn(u),c,h,p,d,g,m,v,y;if(n!=null){g=n,m=e,v=r,y=i}else{v=y=-(g=m=Infinity);c=[],h=[];d=t.length;if(o)for(p=0;p<d;++p){s=t[p];if(s.x<g)g=s.x;if(s.y<m)m=s.y;if(s.x>v)v=s.x;if(s.y>y)y=s.y;c.push(s.x);h.push(s.y)}else for(p=0;p<d;++p){var w=+l(s=t[p],p),x=+f(s,p);if(w<g)g=w;if(x<m)m=x;if(w>v)v=w;if(x>y)y=x;c.push(w);h.push(x)}}var b=v-g,M=y-m;if(b>M)y=m+b;else v=g+M;function k(t,n,e,r,i,a,u,o){if(isNaN(e)||isNaN(r))return;if(t.leaf){var s=t.x,l=t.y;if(s!=null){if(_(s-e)+_(l-r)<.01){S(t,n,e,r,i,a,u,o)}else{var f=t.point;t.x=t.y=t.point=null;S(t,f,s,l,i,a,u,o);S(t,n,e,r,i,a,u,o)}}else{t.x=e,t.y=r,t.point=n}}else{S(t,n,e,r,i,a,u,o)}}function S(t,n,e,r,i,a,u,o){var s=(i+u)*.5,l=(a+o)*.5,f=e>=s,c=r>=l,h=c<<1|f;t.leaf=false;t=t.nodes[h]||(t.nodes[h]=ma());if(f)i=s;else u=s;if(c)a=l;else o=l;k(t,n,e,r,i,a,u,o)}var A=ma();A.add=function(t){k(A,t,+l(t,++p),+f(t,p),g,m,v,y)};A.visit=function(t){va(t,A,g,m,v,y)};A.find=function(t){return ya(A,t[0],t[1],g,m,v,y)};p=-1;if(n==null){while(++p<d){k(A,t[p],c[p],h[p],g,m,v,y)}--p}else t.forEach(A.add);c=h=t=s=null;return A}s.x=function(t){return arguments.length?(a=t,s):a};s.y=function(t){return arguments.length?(u=t,s):u};s.extent=function(t){if(!arguments.length)return n==null?null:[[n,e],[r,i]];if(t==null)n=e=r=i=null;else n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1];return s};s.size=function(t){if(!arguments.length)return n==null?null:[r-n,i-e];if(t==null)n=e=r=i=null;else n=e=0,r=+t[0],i=+t[1];return s};return s};function da(t){return t.x}function ga(t){return t.y}function ma(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function va(t,n,e,r,i,a){if(!t(n,e,r,i,a)){var u=(e+i)*.5,o=(r+a)*.5,s=n.nodes;if(s[0])va(t,s[0],e,r,u,o);if(s[1])va(t,s[1],u,r,i,o);if(s[2])va(t,s[2],e,o,u,a);if(s[3])va(t,s[3],u,o,i,a)}}function ya(t,n,e,r,i,a,u){var o=Infinity,s;(function l(t,f,c,h,p){if(f>a||c>u||h<r||p<i)return;if(d=t.point){var d,g=n-t.x,m=e-t.y,v=g*g+m*m;if(v<o){var y=Math.sqrt(o=v);r=n-y,i=e-y;a=n+y,u=e+y;s=d}}var _=t.nodes,w=(f+h)*.5,x=(c+p)*.5,b=n>=w,M=e>=x;for(var k=M<<1|b,S=k+4;k<S;++k){if(t=_[k&3])switch(k&3){case 0:l(t,f,c,w,x);break;case 1:l(t,w,c,h,x);break;case 2:l(t,f,x,w,p);break;case 3:l(t,w,x,h,p);break}}})(t,r,i,a,u);return s}t.interpolateRgb=_a;function _a(n,e){n=t.rgb(n);e=t.rgb(e);var r=n.r,i=n.g,a=n.b,u=e.r-r,o=e.g-i,s=e.b-a;return function(t){return"#"+yn(Math.round(r+u*t))+yn(Math.round(i+o*t))+yn(Math.round(a+s*t))}}t.interpolateObject=wa;function wa(t,n){var e={},r={},i;for(i in t){if(i in n){e[i]=Sa(t[i],n[i])}else{r[i]=t[i]}}for(i in n){if(!(i in t)){r[i]=n[i]}}return function(t){for(i in e)r[i]=e[i](t);return r}}t.interpolateNumber=xa;function xa(t,n){t=+t,n=+n;return function(e){return t*(1-e)+n*e}}t.interpolateString=ba;function ba(t,n){var e=Ma.lastIndex=ka.lastIndex=0,r,i,a,u=-1,o=[],s=[];t=t+"",n=n+"";while((r=Ma.exec(t))&&(i=ka.exec(n))){if((a=i.index)>e){a=n.slice(e,a);if(o[u])o[u]+=a;else o[++u]=a}if((r=r[0])===(i=i[0])){if(o[u])o[u]+=i;else o[++u]=i}else{o[++u]=null;s.push({i:u,x:xa(r,i)})}e=ka.lastIndex}if(e<n.length){a=n.slice(e);if(o[u])o[u]+=a;else o[++u]=a}return o.length<2?s[0]?(n=s[0].x,function(t){return n(t)+""}):function(){return n}:(n=s.length,function(t){for(var e=0,r;e<n;++e)o[(r=s[e]).i]=r.x(t);return o.join("")})}var Ma=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ka=new RegExp(Ma.source,"g");t.interpolate=Sa;function Sa(n,e){var r=t.interpolators.length,i;while(--r>=0&&!(i=t.interpolators[r](n,e)));return i}t.interpolators=[function(t,n){var e=typeof n;return(e==="string"?kn.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?_a:ba:n instanceof Vt?_a:Array.isArray(n)?Aa:e==="object"&&isNaN(n)?wa:xa)(t,n)}];t.interpolateArray=Aa;function Aa(t,n){var e=[],r=[],i=t.length,a=n.length,u=Math.min(t.length,n.length),o;for(o=0;o<u;++o)e.push(Sa(t[o],n[o]));for(;o<i;++o)r[o]=t[o];for(;o<a;++o)r[o]=n[o];return function(t){for(o=0;o<u;++o)r[o]=e[o](t);return r}}var Ea=function(){return L};var Na=t.map({linear:Ea,poly:Oa,quad:function(){return La},cubic:function(){return ja},sin:function(){return za},exp:function(){return qa},circle:function(){return Ba},elastic:Ya,back:Ra,bounce:function(){return Fa}});var Da=t.map({"in":L,out:Ta,"in-out":Pa,"out-in":function(t){return Pa(Ta(t))}});t.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";r=Na.get(r)||Ea;i=Da.get(i)||L;return Ca(i(r.apply(null,n.call(arguments,1))))};function Ca(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function Ta(t){return function(n){return 1-t(1-n)}}function Pa(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function La(t){return t*t}function ja(t){return t*t*t}function Ia(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Oa(t){return function(n){return Math.pow(n,t)}}function za(t){return 1-Math.cos(t*Pt)}function qa(t){return Math.pow(2,10*(t-1))}function Ba(t){return 1-Math.sqrt(1-t*t)}function Ya(t,n){var e;if(arguments.length<2)n=.45;if(arguments.length)e=n/Ct*Math.asin(1/t);else t=1,e=n/4;return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ct/n)}}function Ra(t){if(!t)t=1.70158;return function(n){return n*n*((t+1)*n-t)}}function Fa(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}t.interpolateHcl=Ua;function Ua(n,e){n=t.hcl(n);e=t.hcl(e);var r=n.h,i=n.c,a=n.l,u=e.h-r,o=e.c-i,s=e.l-a;if(isNaN(o))o=0,i=isNaN(i)?e.c:i;if(isNaN(u))u=0,r=isNaN(r)?e.h:r;else if(u>180)u-=360;else if(u<-180)u+=360;return function(t){return nn(r+u*t,i+o*t,a+s*t)+""}}t.interpolateHsl=Ha;function Ha(n,e){n=t.hsl(n);e=t.hsl(e);var r=n.h,i=n.s,a=n.l,u=e.h-r,o=e.s-i,s=e.l-a;if(isNaN(o))o=0,i=isNaN(i)?e.s:i;if(isNaN(u))u=0,r=isNaN(r)?e.h:r;else if(u>180)u-=360;else if(u<-180)u+=360;return function(t){return Kt(r+u*t,i+o*t,a+s*t)+""}}t.interpolateLab=Xa;function Xa(n,e){n=t.lab(n);e=t.lab(e);var r=n.l,i=n.a,a=n.b,u=e.l-r,o=e.a-i,s=e.b-a;return function(t){return ln(r+u*t,i+o*t,a+s*t)+""}}t.interpolateRound=Wa;function Wa(t,n){n-=t;return function(e){return Math.round(t+n*e)}}t.transform=function(n){var e=r.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(t!=null){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Za(n?n.matrix:Ja)})(n)};function Za(t){var n=[t.a,t.b],e=[t.c,t.d],r=Va(n),i=$a(n,e),a=Va(Ga(e,n,-i))||0;if(n[0]*e[1]<e[0]*n[1]){n[0]*=-1;n[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*jt;this.translate=[t.e,t.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*jt:0}Za.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function $a(t,n){return t[0]*n[0]+t[1]*n[1]}function Va(t){var n=Math.sqrt($a(t,t));if(n){t[0]/=n;t[1]/=n}return n}function Ga(t,n,e){t[0]+=e*n[0];t[1]+=e*n[1];return t}var Ja={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=ru;function Ka(t){return t.length?t.pop()+",":""}function Qa(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:xa(t[0],n[0])},{i:i-2,x:xa(t[1],n[1])})}else if(n[0]||n[1]){
e.push("translate("+n+")")}}function tu(t,n,e,r){if(t!==n){if(t-n>180)n+=360;else if(n-t>180)t+=360;r.push({i:e.push(Ka(e)+"rotate(",null,")")-2,x:xa(t,n)})}else if(n){e.push(Ka(e)+"rotate("+n+")")}}function nu(t,n,e,r){if(t!==n){r.push({i:e.push(Ka(e)+"skewX(",null,")")-2,x:xa(t,n)})}else if(n){e.push(Ka(e)+"skewX("+n+")")}}function eu(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Ka(e)+"scale(",null,",",null,")");r.push({i:i-4,x:xa(t[0],n[0])},{i:i-2,x:xa(t[1],n[1])})}else if(n[0]!==1||n[1]!==1){e.push(Ka(e)+"scale("+n+")")}}function ru(n,e){var r=[],i=[];n=t.transform(n),e=t.transform(e);Qa(n.translate,e.translate,r,i);tu(n.rotate,e.rotate,r,i);nu(n.skew,e.skew,r,i);eu(n.scale,e.scale,r,i);n=e=null;return function(t){var n=-1,e=i.length,a;while(++n<e)r[(a=i[n]).i]=a.x(t);return r.join("")}}function iu(t,n){n=(n-=t=+t)||1/n;return function(e){return(e-t)/n}}function au(t,n){n=(n-=t=+t)||1/n;return function(e){return Math.max(0,Math.min(1,(e-t)/n))}}t.layout={};t.layout.bundle=function(){return function(t){var n=[],e=-1,r=t.length;while(++e<r)n.push(uu(t[e]));return n}};function uu(t){var n=t.source,e=t.target,r=su(n,e),i=[n];while(n!==r){n=n.parent;i.push(n)}var a=i.length;while(e!==r){i.splice(a,0,e);e=e.parent}return i}function ou(t){var n=[],e=t.parent;while(e!=null){n.push(t);t=e;e=e.parent}n.push(t);return n}function su(t,n){if(t===n)return t;var e=ou(t),r=ou(n),i=e.pop(),a=r.pop(),u=null;while(i===a){u=i;i=e.pop();a=r.pop()}return u}t.layout.chord=function(){var n={},e,r,i,a,u=0,o,s,l;function f(){var n={},f=[],h=t.range(a),p=[],d,g,m,v,y;e=[];r=[];d=0,v=-1;while(++v<a){g=0,y=-1;while(++y<a){g+=i[v][y]}f.push(g);p.push(t.range(a));d+=g}if(o){h.sort(function(t,n){return o(f[t],f[n])})}if(s){p.forEach(function(t,n){t.sort(function(t,e){return s(i[n][t],i[n][e])})})}d=(Ct-u*a)/d;g=0,v=-1;while(++v<a){m=g,y=-1;while(++y<a){var _=h[v],w=p[_][y],x=i[_][w],b=g,M=g+=x*d;n[_+"-"+w]={index:_,subindex:w,startAngle:b,endAngle:M,value:x}}r[_]={index:_,startAngle:m,endAngle:g,value:f[_]};g+=u}v=-1;while(++v<a){y=v-1;while(++y<a){var k=n[v+"-"+y],S=n[y+"-"+v];if(k.value||S.value){e.push(k.value<S.value?{source:S,target:k}:{source:k,target:S})}}}if(l)c()}function c(){e.sort(function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}n.matrix=function(t){if(!arguments.length)return i;a=(i=t)&&i.length;e=r=null;return n};n.padding=function(t){if(!arguments.length)return u;u=t;e=r=null;return n};n.sortGroups=function(t){if(!arguments.length)return o;o=t;e=r=null;return n};n.sortSubgroups=function(t){if(!arguments.length)return s;s=t;e=null;return n};n.sortChords=function(t){if(!arguments.length)return l;l=t;if(e)c();return n};n.chords=function(){if(!e)f();return e};n.groups=function(){if(!r)f();return r};return n};t.layout.force=function(){var n={},e=t.dispatch("start","tick","end"),r,i=[1,1],a,u,o=.9,s=du,l=gu,f=-30,c=mu,h=.1,p=.64,d=[],g=[],m,v,y;function _(t){return function(n,e,r,i){if(n.point!==t){var a=n.cx-t.x,u=n.cy-t.y,o=i-e,s=a*a+u*u;if(o*o/p<s){if(s<c){var l=n.charge/s;t.px-=a*l;t.py-=u*l}return true}if(n.point&&s&&s<c){var l=n.pointCharge/s;t.px-=a*l;t.py-=u*l}}return!n.charge}}n.tick=function(){if((u*=.99)<.005){r=null;e.end({type:"end",alpha:u=0});return true}var n=d.length,a=g.length,s,l,c,p,w,x,b,M,k;for(l=0;l<a;++l){c=g[l];p=c.source;w=c.target;M=w.x-p.x;k=w.y-p.y;if(x=M*M+k*k){x=u*v[l]*((x=Math.sqrt(x))-m[l])/x;M*=x;k*=x;w.x-=M*(b=p.weight+w.weight?p.weight/(p.weight+w.weight):.5);w.y-=k*b;p.x+=M*(b=1-b);p.y+=k*b}}if(b=u*h){M=i[0]/2;k=i[1]/2;l=-1;if(b)while(++l<n){c=d[l];c.x+=(M-c.x)*b;c.y+=(k-c.y)*b}}if(f){pu(s=t.geom.quadtree(d),u,y);l=-1;while(++l<n){if(!(c=d[l]).fixed){s.visit(_(c))}}}l=-1;while(++l<n){c=d[l];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*o;c.y-=(c.py-(c.py=c.y))*o}}e.tick({type:"tick",alpha:u})};n.nodes=function(t){if(!arguments.length)return d;d=t;return n};n.links=function(t){if(!arguments.length)return g;g=t;return n};n.size=function(t){if(!arguments.length)return i;i=t;return n};n.linkDistance=function(t){if(!arguments.length)return s;s=typeof t==="function"?t:+t;return n};n.distance=n.linkDistance;n.linkStrength=function(t){if(!arguments.length)return l;l=typeof t==="function"?t:+t;return n};n.friction=function(t){if(!arguments.length)return o;o=+t;return n};n.charge=function(t){if(!arguments.length)return f;f=typeof t==="function"?t:+t;return n};n.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(c);c=t*t;return n};n.gravity=function(t){if(!arguments.length)return h;h=+t;return n};n.theta=function(t){if(!arguments.length)return Math.sqrt(p);p=t*t;return n};n.alpha=function(t){if(!arguments.length)return u;t=+t;if(u){if(t>0){u=t}else{r.c=null,r.t=NaN,r=null;e.end({type:"end",alpha:u=0})}}else if(t>0){e.start({type:"start",alpha:u=t});r=In(n.tick)}return n};n.start=function(){var t,e=d.length,r=g.length,a=i[0],u=i[1],o,c;for(t=0;t<e;++t){(c=d[t]).index=t;c.weight=0}for(t=0;t<r;++t){c=g[t];if(typeof c.source=="number")c.source=d[c.source];if(typeof c.target=="number")c.target=d[c.target];++c.source.weight;++c.target.weight}for(t=0;t<e;++t){c=d[t];if(isNaN(c.x))c.x=h("x",a);if(isNaN(c.y))c.y=h("y",u);if(isNaN(c.px))c.px=c.x;if(isNaN(c.py))c.py=c.y}m=[];if(typeof s==="function")for(t=0;t<r;++t)m[t]=+s.call(this,g[t],t);else for(t=0;t<r;++t)m[t]=s;v=[];if(typeof l==="function")for(t=0;t<r;++t)v[t]=+l.call(this,g[t],t);else for(t=0;t<r;++t)v[t]=l;y=[];if(typeof f==="function")for(t=0;t<e;++t)y[t]=+f.call(this,d[t],t);else for(t=0;t<e;++t)y[t]=f;function h(n,i){if(!o){o=new Array(e);for(s=0;s<e;++s){o[s]=[]}for(s=0;s<r;++s){var a=g[s];o[a.source.index].push(a.target);o[a.target.index].push(a.source)}}var u=o[t],s=-1,l=u.length,f;while(++s<l)if(!isNaN(f=u[s][n]))return f;return Math.random()*i}return n.resume()};n.resume=function(){return n.alpha(.1)};n.stop=function(){return n.alpha(0)};n.drag=function(){if(!a)a=t.behavior.drag().origin(L).on("dragstart.force",lu).on("drag.force",w).on("dragend.force",fu);if(!arguments.length)return a;this.on("mouseover.force",cu).on("mouseout.force",hu).call(a)};function w(e){e.px=t.event.x,e.py=t.event.y;n.resume()}return t.rebind(n,e,"on")};function lu(t){t.fixed|=2}function fu(t){t.fixed&=~6}function cu(t){t.fixed|=4;t.px=t.x,t.py=t.y}function hu(t){t.fixed&=~4}function pu(t,n,e){var r=0,i=0;t.charge=0;if(!t.leaf){var a=t.nodes,u=a.length,o=-1,s;while(++o<u){s=a[o];if(s==null)continue;pu(s,n,e);t.charge+=s.charge;r+=s.charge*s.cx;i+=s.charge*s.cy}}if(t.point){if(!t.leaf){t.point.x+=Math.random()-.5;t.point.y+=Math.random()-.5}var l=n*e[t.point.index];t.charge+=t.pointCharge=l;r+=l*t.point.x;i+=l*t.point.y}t.cx=r/t.charge;t.cy=i/t.charge}var du=20,gu=1,mu=Infinity;t.layout.hierarchy=function(){var t=bu,n=wu,e=xu;function r(i){var a=[i],u=[],o;i.depth=0;while((o=a.pop())!=null){u.push(o);if((l=n.call(r,o,o.depth))&&(s=l.length)){var s,l,f;while(--s>=0){a.push(f=l[s]);f.parent=o;f.depth=o.depth+1}if(e)o.value=0;o.children=l}else{if(e)o.value=+e.call(r,o,o.depth)||0;delete o.children}}_u(i,function(n){var r,i;if(t&&(r=n.children))r.sort(t);if(e&&(i=n.parent))i.value+=n.value});return u}r.sort=function(n){if(!arguments.length)return t;t=n;return r};r.children=function(t){if(!arguments.length)return n;n=t;return r};r.value=function(t){if(!arguments.length)return e;e=t;return r};r.revalue=function(t){if(e){yu(t,function(t){if(t.children)t.value=0});_u(t,function(t){var n;if(!t.children)t.value=+e.call(r,t,t.depth)||0;if(n=t.parent)n.value+=t.value})}return t};return r};function vu(n,e){t.rebind(n,e,"sort","children","value");n.nodes=n;n.links=Mu;return n}function yu(t,n){var e=[t];while((t=e.pop())!=null){n(t);if((i=t.children)&&(r=i.length)){var r,i;while(--r>=0)e.push(i[r])}}}function _u(t,n){var e=[t],r=[];while((t=e.pop())!=null){r.push(t);if((u=t.children)&&(a=u.length)){var i=-1,a,u;while(++i<a)e.push(u[i])}}while((t=r.pop())!=null){n(t)}}function wu(t){return t.children}function xu(t){return t.value}function bu(t,n){return n.value-t.value}function Mu(n){return t.merge(n.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}t.layout.partition=function(){var n=t.layout.hierarchy(),e=[1,1];function r(t,n,e,i){var a=t.children;t.x=n;t.y=t.depth*i;t.dx=e;t.dy=i;if(a&&(o=a.length)){var u=-1,o,s,l;e=t.value?e/t.value:0;while(++u<o){r(s=a[u],n,l=s.value*e,i);n+=l}}}function i(t){var n=t.children,e=0;if(n&&(a=n.length)){var r=-1,a;while(++r<a)e=Math.max(e,i(n[r]))}return 1+e}function a(t,a){var u=n.call(this,t,a);r(u[0],0,e[0],e[1]/i(u[0]));return u}a.size=function(t){if(!arguments.length)return e;e=t;return a};return vu(a,n)};t.layout.pie=function(){var n=Number,e=ku,r=0,i=Ct,a=0;function u(o){var s=o.length,l=o.map(function(t,e){return+n.call(u,t,e)}),f=+(typeof r==="function"?r.apply(this,arguments):r),c=(typeof i==="function"?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(c)/s,+(typeof a==="function"?a.apply(this,arguments):a)),p=h*(c<0?-1:1),d=t.sum(l),g=d?(c-s*p)/d:0,m=t.range(s),v=[],y;if(e!=null)m.sort(e===ku?function(t,n){return l[n]-l[t]}:function(t,n){return e(o[t],o[n])});m.forEach(function(t){v[t]={data:o[t],value:y=l[t],startAngle:f,endAngle:f+=y*g+p,padAngle:h}});return v}u.value=function(t){if(!arguments.length)return n;n=t;return u};u.sort=function(t){if(!arguments.length)return e;e=t;return u};u.startAngle=function(t){if(!arguments.length)return r;r=t;return u};u.endAngle=function(t){if(!arguments.length)return i;i=t;return u};u.padAngle=function(t){if(!arguments.length)return a;a=t;return u};return u};var ku={};t.layout.stack=function(){var n=L,e=Cu,r=Tu,i=Eu,a=Su,u=Au;function o(s,l){if(!(g=s.length))return s;var f=s.map(function(t,e){return n.call(o,t,e)});var c=f.map(function(t){return t.map(function(t,n){return[a.call(o,t,n),u.call(o,t,n)]})});var h=e.call(o,c,l);f=t.permute(f,h);c=t.permute(c,h);var p=r.call(o,c,l);var d=f[0].length,g,m,v,y;for(v=0;v<d;++v){i.call(o,f[0][v],y=p[v],c[0][v][1]);for(m=1;m<g;++m){i.call(o,f[m][v],y+=c[m-1][v][1],c[m][v][1])}}return s}o.values=function(t){if(!arguments.length)return n;n=t;return o};o.order=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:Nu.get(t)||Cu;return o};o.offset=function(t){if(!arguments.length)return r;r=typeof t==="function"?t:Du.get(t)||Tu;return o};o.x=function(t){if(!arguments.length)return a;a=t;return o};o.y=function(t){if(!arguments.length)return u;u=t;return o};o.out=function(t){if(!arguments.length)return i;i=t;return o};return o};function Su(t){return t.x}function Au(t){return t.y}function Eu(t,n,e){t.y0=n;t.y=e}var Nu=t.map({"inside-out":function(n){var e=n.length,r,i,a=n.map(Pu),u=n.map(Lu),o=t.range(e).sort(function(t,n){return a[t]-a[n]}),s=0,l=0,f=[],c=[];for(r=0;r<e;++r){i=o[r];if(s<l){s+=u[i];f.push(i)}else{l+=u[i];c.push(i)}}return c.reverse().concat(f)},reverse:function(n){return t.range(n.length).reverse()},"default":Cu});var Du=t.map({silhouette:function(t){var n=t.length,e=t[0].length,r=[],i=0,a,u,o,s=[];for(u=0;u<e;++u){for(a=0,o=0;a<n;a++)o+=t[a][u][1];if(o>i)i=o;r.push(o)}for(u=0;u<e;++u){s[u]=(i-r[u])/2}return s},wiggle:function(t){var n=t.length,e=t[0],r=e.length,i,a,u,o,s,l,f,c,h,p=[];p[0]=c=h=0;for(a=1;a<r;++a){for(i=0,o=0;i<n;++i)o+=t[i][a][1];for(i=0,s=0,f=e[a][0]-e[a-1][0];i<n;++i){for(u=0,l=(t[i][a][1]-t[i][a-1][1])/(2*f);u<i;++u){l+=(t[u][a][1]-t[u][a-1][1])/f}s+=l*t[i][a][1]}p[a]=c-=o?s/o*f:0;if(c<h)h=c}for(a=0;a<r;++a)p[a]-=h;return p},expand:function(t){var n=t.length,e=t[0].length,r=1/n,i,a,u,o=[];for(a=0;a<e;++a){for(i=0,u=0;i<n;i++)u+=t[i][a][1];if(u)for(i=0;i<n;i++)t[i][a][1]/=u;else for(i=0;i<n;i++)t[i][a][1]=r}for(a=0;a<e;++a)o[a]=0;return o},zero:Tu});function Cu(n){return t.range(n.length)}function Tu(t){var n=-1,e=t[0].length,r=[];while(++n<e)r[n]=0;return r}function Pu(t){var n=1,e=0,r=t[0][1],i,a=t.length;for(;n<a;++n){if((i=t[n][1])>r){e=n;r=i}}return e}function Lu(t){return t.reduce(ju,0)}function ju(t,n){return t+n[1]}t.layout.histogram=function(){var n=true,e=Number,r=zu,i=Iu;function a(a,u){var o=[],s=a.map(e,this),l=r.call(this,s,u),f=i.call(this,l,s,u),c,u=-1,h=s.length,p=f.length-1,d=n?1:1/h,g;while(++u<p){c=o[u]=[];c.dx=f[u+1]-(c.x=f[u]);c.y=0}if(p>0){u=-1;while(++u<h){g=s[u];if(g>=l[0]&&g<=l[1]){c=o[t.bisect(f,g,1,p)-1];c.y+=d;c.push(a[u])}}}return o}a.value=function(t){if(!arguments.length)return e;e=t;return a};a.range=function(t){if(!arguments.length)return r;r=Sn(t);return a};a.bins=function(t){if(!arguments.length)return i;i=typeof t==="number"?function(n){return Ou(n,t)}:Sn(t);return a};a.frequency=function(t){if(!arguments.length)return n;n=!!t;return a};return a};function Iu(t,n){return Ou(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Ou(t,n){var e=-1,r=+t[0],i=(t[1]-r)/n,a=[];while(++e<=n)a[e]=i*e+r;return a}function zu(n){return[t.min(n),t.max(n)]}t.layout.pack=function(){var n=t.layout.hierarchy().sort(qu),e=0,r=[1,1],i;function a(t,a){var u=n.call(this,t,a),o=u[0],s=r[0],l=r[1],f=i==null?Math.sqrt:typeof i==="function"?i:function(){return i};o.x=o.y=0;_u(o,function(t){t.r=+f(t.value)});_u(o,Fu);if(e){var c=e*(i?1:Math.max(2*o.r/s,2*o.r/l))/2;_u(o,function(t){t.r+=c});_u(o,Fu);_u(o,function(t){t.r-=c})}Xu(o,s/2,l/2,i?1:1/Math.max(2*o.r/s,2*o.r/l));return u}a.size=function(t){if(!arguments.length)return r;r=t;return a};a.radius=function(t){if(!arguments.length)return i;i=t==null||typeof t==="function"?t:+t;return a};a.padding=function(t){if(!arguments.length)return e;e=+t;return a};return vu(a,n)};function qu(t,n){return t.value-n.value}function Bu(t,n){var e=t._pack_next;t._pack_next=n;n._pack_prev=t;n._pack_next=e;e._pack_prev=n}function Yu(t,n){t._pack_next=n;n._pack_prev=t}function Ru(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function Fu(t){if(!(n=t.children)||!(h=n.length))return;var n,e=Infinity,r=-Infinity,i=Infinity,a=-Infinity,u,o,s,l,f,c,h;function p(t){e=Math.min(t.x-t.r,e);r=Math.max(t.x+t.r,r);i=Math.min(t.y-t.r,i);a=Math.max(t.y+t.r,a)}n.forEach(Uu);u=n[0];u.x=-u.r;u.y=0;p(u);if(h>1){o=n[1];o.x=o.r;o.y=0;p(o);if(h>2){s=n[2];Wu(u,o,s);p(s);Bu(u,s);u._pack_prev=s;Bu(s,o);o=u._pack_next;for(l=3;l<h;l++){Wu(u,o,s=n[l]);var d=0,g=1,m=1;for(f=o._pack_next;f!==o;f=f._pack_next,g++){if(Ru(f,s)){d=1;break}}if(d==1){for(c=u._pack_prev;c!==f._pack_prev;c=c._pack_prev,m++){if(Ru(c,s)){break}}}if(d){if(g<m||g==m&&o.r<u.r)Yu(u,o=f);else Yu(u=c,o);l--}else{Bu(u,s);o=s;p(s)}}}}var v=(e+r)/2,y=(i+a)/2,_=0;for(l=0;l<h;l++){s=n[l];s.x-=v;s.y-=y;_=Math.max(_,s.r+Math.sqrt(s.x*s.x+s.y*s.y))}t.r=_;n.forEach(Hu)}function Uu(t){t._pack_next=t._pack_prev=t}function Hu(t){delete t._pack_next;delete t._pack_prev}function Xu(t,n,e,r){var i=t.children;t.x=n+=r*t.x;t.y=e+=r*t.y;t.r*=r;if(i){var a=-1,u=i.length;while(++a<u)Xu(i[a],n,e,r)}}function Wu(t,n,e){var r=t.r+e.r,i=n.x-t.x,a=n.y-t.y;if(r&&(i||a)){var u=n.r+e.r,o=i*i+a*a;u*=u;r*=r;var s=.5+(r-u)/(2*o),l=Math.sqrt(Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o);e.x=t.x+s*i+l*a;e.y=t.y+s*a-l*i}else{e.x=t.x+r;e.y=t.y}}t.layout.tree=function(){var n=t.layout.hierarchy().sort(null).value(null),e=Zu,r=[1,1],i=null;function a(t,a){var l=n.call(this,t,a),c=l[0],h=u(c);_u(h,o),h.parent.m=-h.z;yu(h,s);if(i)yu(c,f);else{var p=c,d=c,g=c;yu(c,function(t){if(t.x<p.x)p=t;if(t.x>d.x)d=t;if(t.depth>g.depth)g=t});var m=e(p,d)/2-p.x,v=r[0]/(d.x+e(d,p)/2+m),y=r[1]/(g.depth||1);yu(c,function(t){t.x=(t.x+m)*v;t.y=t.depth*y})}return l}function u(t){var n={A:null,children:[t]},e=[n],r;while((r=e.pop())!=null){for(var i=r.children,a,u=0,o=i.length;u<o;++u){e.push((i[u]=a={_:i[u],parent:r,children:(a=i[u].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:u}).a=a)}}return n.children[0]}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){Ju(t);var a=(n[0].z+n[n.length-1].z)/2;if(i){t.z=i.z+e(t._,i._);t.m=t.z-a}else{t.z=a}}else if(i){t.z=i.z+e(t._,i._)}t.parent.A=l(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m;t.m+=t.parent.m}function l(t,n,r){if(n){var i=t,a=t,u=n,o=i.parent.children[0],s=i.m,l=a.m,f=u.m,c=o.m,h;while(u=Vu(u),i=$u(i),u&&i){o=$u(o);a=Vu(a);a.a=t;h=u.z+f-i.z-s+e(u._,i._);if(h>0){Gu(Ku(u,t,r),t,h);s+=h;l+=h}f+=u.m;s+=i.m;c+=o.m;l+=a.m}if(u&&!Vu(a)){a.t=u;a.m+=f-l}if(i&&!$u(o)){o.t=i;o.m+=s-c;r=t}}return r}function f(t){t.x*=r[0];t.y=t.depth*r[1]}a.separation=function(t){if(!arguments.length)return e;e=t;return a};a.size=function(t){if(!arguments.length)return i?null:r;i=(r=t)==null?f:null;return a};a.nodeSize=function(t){if(!arguments.length)return i?r:null;i=(r=t)==null?null:f;return a};return vu(a,n)};function Zu(t,n){return t.parent==n.parent?1:2}function $u(t){var n=t.children;return n.length?n[0]:t.t}function Vu(t){var n=t.children,e;return(e=n.length)?n[e-1]:t.t}function Gu(t,n,e){var r=e/(n.i-t.i);n.c-=r;n.s+=e;t.c+=r;n.z+=e;n.m+=e}function Ju(t){var n=0,e=0,r=t.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=n;a.m+=n;n+=a.s+(e+=a.c)}}function Ku(t,n,e){return t.a.parent===n.parent?t.a:e}t.layout.cluster=function(){var n=t.layout.hierarchy().sort(null).value(null),e=Zu,r=[1,1],i=false;function a(t,a){var u=n.call(this,t,a),o=u[0],s,l=0;_u(o,function(t){var n=t.children;if(n&&n.length){t.x=to(n);t.y=Qu(n)}else{t.x=s?l+=e(t,s):0;t.y=0;s=t}});var f=no(o),c=eo(o),h=f.x-e(f,c)/2,p=c.x+e(c,f)/2;_u(o,i?function(t){t.x=(t.x-o.x)*r[0];t.y=(o.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0];t.y=(1-(o.y?t.y/o.y:1))*r[1]});return u}a.separation=function(t){if(!arguments.length)return e;e=t;return a};a.size=function(t){if(!arguments.length)return i?null:r;i=(r=t)==null;return a};a.nodeSize=function(t){if(!arguments.length)return i?r:null;i=(r=t)!=null;return a};return vu(a,n)};function Qu(n){return 1+t.max(n,function(t){return t.y})}function to(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function no(t){var n=t.children;return n&&n.length?no(n[0]):t}function eo(t){var n=t.children,e;return n&&(e=n.length)?eo(n[e-1]):t}t.layout.treemap=function(){var n=t.layout.hierarchy(),e=Math.round,r=[1,1],i=null,a=ro,u=false,o,s="squarify",l=.5*(1+Math.sqrt(5));function f(t,n){var e=-1,r=t.length,i,a;while(++e<r){a=(i=t[e]).value*(n<0?0:n);i.area=isNaN(a)||a<=0?0:a}}function c(t){var n=t.children;if(n&&n.length){var e=a(t),r=[],i=n.slice(),u,o=Infinity,l,h=s==="slice"?e.dx:s==="dice"?e.dy:s==="slice-dice"?t.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy),g;f(i,e.dx*e.dy/t.value);r.area=0;while((g=i.length)>0){r.push(u=i[g-1]);r.area+=u.area;if(s!=="squarify"||(l=p(r,h))<=o){i.pop();o=l}else{r.area-=r.pop().area;d(r,h,e,false);h=Math.min(e.dx,e.dy);r.length=r.area=0;o=Infinity}}if(r.length){d(r,h,e,true);r.length=r.area=0}n.forEach(c)}}function h(t){var n=t.children;if(n&&n.length){var e=a(t),r=n.slice(),i,u=[];f(r,e.dx*e.dy/t.value);u.area=0;while(i=r.pop()){u.push(i);u.area+=i.area;if(i.z!=null){d(u,i.z?e.dx:e.dy,e,!r.length);u.length=u.area=0}}n.forEach(h)}}function p(t,n){var e=t.area,r,i=0,a=Infinity,u=-1,o=t.length;while(++u<o){if(!(r=t[u].area))continue;if(r<a)a=r;if(r>i)i=r}e*=e;n*=n;return e?Math.max(n*i*l/e,e/(n*a*l)):Infinity}function d(t,n,r,i){var a=-1,u=t.length,o=r.x,s=r.y,l=n?e(t.area/n):0,f;if(n==r.dx){if(i||l>r.dy)l=r.dy;while(++a<u){f=t[a];f.x=o;f.y=s;f.dy=l;o+=f.dx=Math.min(r.x+r.dx-o,l?e(f.area/l):0)}f.z=true;f.dx+=r.x+r.dx-o;r.y+=l;r.dy-=l}else{if(i||l>r.dx)l=r.dx;while(++a<u){f=t[a];f.x=o;f.y=s;f.dx=l;s+=f.dy=Math.min(r.y+r.dy-s,l?e(f.area/l):0)}f.z=false;f.dy+=r.y+r.dy-s;r.x+=l;r.dx-=l}}function g(t){var e=o||n(t),i=e[0];i.x=i.y=0;if(i.value)i.dx=r[0],i.dy=r[1];else i.dx=i.dy=0;if(o)n.revalue(i);f([i],i.dx*i.dy/i.value);(o?h:c)(i);if(u)o=e;return e}g.size=function(t){if(!arguments.length)return r;r=t;return g};g.padding=function(t){if(!arguments.length)return i;function n(n){var e=t.call(g,n,n.depth);return e==null?ro(n):io(n,typeof e==="number"?[e,e,e,e]:e)}function e(n){return io(n,t)}var r;a=(i=t)==null?ro:(r=typeof t)==="function"?n:r==="number"?(t=[t,t,t,t],e):e;return g};g.round=function(t){if(!arguments.length)return e!=Number;e=t?Math.round:Number;return g};g.sticky=function(t){if(!arguments.length)return u;u=t;o=null;return g};g.ratio=function(t){if(!arguments.length)return l;l=t;return g};g.mode=function(t){if(!arguments.length)return s;s=t+"";return g};return vu(g,n)};function ro(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function io(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],a=t.dy-n[0]-n[2];if(i<0){e+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:e,y:r,dx:i,dy:a}}t.random={normal:function(t,n){var e=arguments.length;if(e<2)n=1;if(e<1)t=0;return function(){var e,r,i;do{e=Math.random()*2-1;r=Math.random()*2-1;i=e*e+r*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=t.random.normal.apply(t,arguments);return function(){return Math.exp(n())}},bates:function(n){var e=t.random.irwinHall(n);return function(){return e()/n}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}};t.scale={};function ao(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function uo(t){return t.rangeExtent?t.rangeExtent():ao(t.range())}function oo(t,n,e,r){var i=e(t[0],t[1]),a=r(n[0],n[1]);return function(t){return a(i(t))}}function so(t,n){var e=0,r=t.length-1,i=t[e],a=t[r],u;if(a<i){u=e,e=r,r=u;u=i,i=a,a=u}t[e]=n.floor(i);t[r]=n.ceil(a);return t}function lo(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:fo}var fo={floor:L,ceil:L};function co(n,e,r,i){var a=[],u=[],o=0,s=Math.min(n.length,e.length)-1;if(n[s]<n[0]){n=n.slice().reverse();e=e.slice().reverse()}while(++o<=s){a.push(r(n[o-1],n[o]));u.push(i(e[o-1],e[o]))}return function(e){var r=t.bisect(n,e,1,s)-1;return u[r](a[r](e))}}t.scale.linear=function(){return ho([0,1],[0,1],Sa,false)};function ho(t,n,e,r){var i,a;function u(){var u=Math.min(t.length,n.length)>2?co:oo,s=r?au:iu;i=u(t,n,s,e);a=u(n,t,s,Sa);return o}function o(t){return i(t)}o.invert=function(t){return a(t)};o.domain=function(n){if(!arguments.length)return t;t=n.map(Number);return u()};o.range=function(t){if(!arguments.length)return n;n=t;return u()};o.rangeRound=function(t){return o.range(t).interpolate(Wa)};o.clamp=function(t){if(!arguments.length)return r;r=t;return u()};o.interpolate=function(t){if(!arguments.length)return e;e=t;return u()};o.ticks=function(n){return vo(t,n)};o.tickFormat=function(n,e){return yo(t,n,e)};o.nice=function(n){go(t,n);return u()};o.copy=function(){return ho(t,n,e,r)};return u()}function po(n,e){return t.rebind(n,e,"range","rangeRound","interpolate","clamp")}function go(t,n){so(t,lo(mo(t,n)[2]));so(t,lo(mo(t,n)[2]));return t}function mo(t,n){if(n==null)n=10;var e=ao(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),a=n/r*i;if(a<=.15)i*=10;else if(a<=.35)i*=5;else if(a<=.75)i*=2;e[0]=Math.ceil(e[0]/i)*i;e[1]=Math.floor(e[1]/i)*i+i*.5;e[2]=i;return e}function vo(n,e){return t.range.apply(t,mo(n,e))}function yo(n,e,r){var i=mo(n,e);if(r){var a=Un.exec(r);a.shift();if(a[8]==="s"){var u=t.formatPrefix(Math.max(_(i[0]),_(i[1])));if(!a[7])a[7]="."+wo(u.scale(i[2]));a[8]="f";r=t.format(a.join(""));return function(t){return r(u.scale(t))+u.symbol}}if(!a[7])a[7]="."+xo(a[8],i);r=a.join("")}else{r=",."+wo(i[2])+"f"}return t.format(r)}var _o={s:1,g:1,p:1,r:1,e:1};function wo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function xo(t,n){var e=wo(n[2]);return t in _o?Math.abs(e-wo(Math.max(_(n[0]),_(n[1]))))+ +(t!=="e"):e-(t==="%")*2}t.scale.log=function(){return bo(t.scale.linear().domain([0,1]),10,true,[1,10])};function bo(n,e,r,i){function a(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function u(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function o(t){return n(a(t))}o.invert=function(t){return u(n.invert(t))};o.domain=function(t){if(!arguments.length)return i;r=t[0]>=0;n.domain((i=t.map(Number)).map(a));return o};o.base=function(t){if(!arguments.length)return e;e=+t;n.domain(i.map(a));return o};o.nice=function(){var t=so(i.map(a),r?Math:ko);n.domain(t);i=t.map(u);return o};o.ticks=function(){var t=ao(i),n=[],o=t[0],s=t[1],l=Math.floor(a(o)),f=Math.ceil(a(s)),c=e%1?2:e;if(isFinite(f-l)){if(r){for(;l<f;l++)for(var h=1;h<c;h++)n.push(u(l)*h);n.push(u(l))}else{n.push(u(l));for(;l++<f;)for(var h=c-1;h>0;h--)n.push(u(l)*h)}for(l=0;n[l]<o;l++){}for(f=n.length;n[f-1]>s;f--){}n=n.slice(l,f)}return n};o.tickFormat=function(n,r){if(!arguments.length)return Mo;if(arguments.length<2)r=Mo;else if(typeof r!=="function")r=t.format(r);var i=Math.max(1,e*n/o.ticks().length);return function(t){var n=t/u(Math.round(a(t)));if(n*e<e-.5)n*=e;return n<=i?r(t):""}};o.copy=function(){return bo(n.copy(),e,r,i)};return po(o,n)}var Mo=t.format(".0e"),ko={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};t.scale.pow=function(){return So(t.scale.linear(),1,[0,1])};function So(t,n,e){var r=Ao(n),i=Ao(1/n);function a(n){return t(r(n))}a.invert=function(n){return i(t.invert(n))};a.domain=function(n){if(!arguments.length)return e;t.domain((e=n.map(Number)).map(r));return a};a.ticks=function(t){return vo(e,t)};a.tickFormat=function(t,n){return yo(e,t,n)};a.nice=function(t){return a.domain(go(e,t))};a.exponent=function(u){if(!arguments.length)return n;r=Ao(n=u);i=Ao(1/n);t.domain(e.map(r));return a};a.copy=function(){return So(t.copy(),n,e)};return po(a,t)}function Ao(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Eo([],{t:"range",a:[[]]})};function Eo(n,e){var r,i,a;function u(t){return i[((r.get(t)||(e.t==="range"?r.set(t,n.push(t)):NaN))-1)%i.length]}function o(e,r){return t.range(n.length).map(function(t){return e+r*t})}u.domain=function(t){if(!arguments.length)return n;n=[];r=new b;var i=-1,a=t.length,o;while(++i<a)if(!r.has(o=t[i]))r.set(o,n.push(o));return u[e.t].apply(u,e.a)};u.range=function(t){if(!arguments.length)return i;i=t;a=0;e={t:"range",a:arguments};return u};u.rangePoints=function(t,r){if(arguments.length<2)r=0;var s=t[0],l=t[1],f=n.length<2?(s=(s+l)/2,0):(l-s)/(n.length-1+r);i=o(s+f*r/2,f);a=0;e={t:"rangePoints",a:arguments};return u};u.rangeRoundPoints=function(t,r){if(arguments.length<2)r=0;var s=t[0],l=t[1],f=n.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(n.length-1+r)|0;i=o(s+Math.round(f*r/2+(l-s-(n.length-1+r)*f)/2),f);a=0;e={t:"rangeRoundPoints",a:arguments};return u};u.rangeBands=function(t,r,s){if(arguments.length<2)r=0;if(arguments.length<3)s=r;var l=t[1]<t[0],f=t[l-0],c=t[1-l],h=(c-f)/(n.length-r+2*s);i=o(f+h*s,h);if(l)i.reverse();a=h*(1-r);e={t:"rangeBands",a:arguments};return u};u.rangeRoundBands=function(t,r,s){if(arguments.length<2)r=0;if(arguments.length<3)s=r;var l=t[1]<t[0],f=t[l-0],c=t[1-l],h=Math.floor((c-f)/(n.length-r+2*s));i=o(f+Math.round((c-f-(n.length-r)*h)/2),h);if(l)i.reverse();a=Math.round(h*(1-r));e={t:"rangeRoundBands",a:arguments};return u};u.rangeBand=function(){return a};u.rangeExtent=function(){return ao(e.a[0])};u.copy=function(){return Eo(n,e)};return u.domain(n)}t.scale.category10=function(){return t.scale.ordinal().range(No)};t.scale.category20=function(){return t.scale.ordinal().range(Do)};t.scale.category20b=function(){return t.scale.ordinal().range(Co)};t.scale.category20c=function(){return t.scale.ordinal().range(To)};var No=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mn);var Do=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mn);var Co=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mn);var To=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mn);t.scale.quantile=function(){return Po([],[])};function Po(n,e){var r;function i(){var i=0,u=e.length;r=[];while(++i<u)r[i-1]=t.quantile(n,i/u);return a}function a(n){if(!isNaN(n=+n))return e[t.bisect(r,n)]}a.domain=function(t){if(!arguments.length)return n;n=t.map(d).filter(g).sort(p);return i()};a.range=function(t){if(!arguments.length)return e;e=t;return i()};a.quantiles=function(){return r};a.invertExtent=function(t){t=e.indexOf(t);return t<0?[NaN,NaN]:[t>0?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]};a.copy=function(){return Po(n,e)};return i()}t.scale.quantize=function(){return Lo(0,1,[0,1])};function Lo(t,n,e){var r,i;function a(n){return e[Math.max(0,Math.min(i,Math.floor(r*(n-t))))]}function u(){r=e.length/(n-t);i=e.length-1;return a}a.domain=function(e){if(!arguments.length)return[t,n];t=+e[0];n=+e[e.length-1];return u()};a.range=function(t){if(!arguments.length)return e;e=t;return u()};a.invertExtent=function(n){n=e.indexOf(n);n=n<0?NaN:n/r+t;return[n,n+1/r]};a.copy=function(){return Lo(t,n,e)};return u()}t.scale.threshold=function(){return jo([.5],[0,1])};function jo(n,e){function r(r){if(r<=r)return e[t.bisect(n,r)]}r.domain=function(t){if(!arguments.length)return n;n=t;return r};r.range=function(t){if(!arguments.length)return e;e=t;return r};r.invertExtent=function(t){t=e.indexOf(t);return[n[t-1],n[t]]};r.copy=function(){return jo(n,e)};return r}t.scale.identity=function(){return Io([0,1])};function Io(t){function n(t){return+t}n.invert=n;n.domain=n.range=function(e){if(!arguments.length)return t;t=e.map(n);return n};n.ticks=function(n){return vo(t,n)};n.tickFormat=function(n,e){return yo(t,n,e)};n.copy=function(){return Io(t)};return n}t.svg={};function Oo(){return 0}t.svg.arc=function(){var t=qo,n=Bo,e=Oo,r=zo,i=Yo,a=Ro,u=Fo;function o(){var o=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+n.apply(this,arguments)),f=i.apply(this,arguments)-Pt,c=a.apply(this,arguments)-Pt,h=Math.abs(c-f),p=f>c?0:1;if(l<o)d=l,l=o,o=d;if(h>=Tt)return s(l,p)+(o?s(o,1-p):"")+"Z";var d,g,m,v,y=0,_=0,w,x,b,M,k,S,A,E,N=[];if(v=(+u.apply(this,arguments)||0)/2){m=r===zo?Math.sqrt(o*o+l*l):+r.apply(this,arguments);if(!p)_*=-1;if(l)_=qt(m/l*Math.sin(v));if(o)y=qt(m/o*Math.sin(v))}if(l){w=l*Math.cos(f+_);x=l*Math.sin(f+_);b=l*Math.cos(c-_);M=l*Math.sin(c-_);var D=Math.abs(c-f-2*_)<=Dt?0:1;if(_&&Uo(w,x,b,M)===p^D){var C=(f+c)/2;w=l*Math.cos(C);x=l*Math.sin(C);b=M=null}}else{w=x=0}if(o){k=o*Math.cos(c-y);S=o*Math.sin(c-y);A=o*Math.cos(f+y);E=o*Math.sin(f+y);var T=Math.abs(f-c+2*y)<=Dt?0:1;if(y&&Uo(k,S,A,E)===1-p^T){var P=(f+c)/2;k=o*Math.cos(P);S=o*Math.sin(P);A=E=null}}else{k=S=0}if(h>Et&&(d=Math.min(Math.abs(l-o)/2,+e.apply(this,arguments)))>.001){g=o<l^p?0:1;var L=d,j=d;if(h<Dt){var I=A==null?[k,S]:b==null?[w,x]:Ci([w,x],[A,E],[b,M],[k,S]),O=w-I[0],z=x-I[1],q=b-I[0],B=M-I[1],Y=1/Math.sin(Math.acos((O*q+z*B)/(Math.sqrt(O*O+z*z)*Math.sqrt(q*q+B*B)))/2),R=Math.sqrt(I[0]*I[0]+I[1]*I[1]);j=Math.min(d,(o-R)/(Y-1));L=Math.min(d,(l-R)/(Y+1))}if(b!=null){var F=Ho(A==null?[k,S]:[A,E],[w,x],l,L,p),U=Ho([b,M],[k,S],l,L,p);if(d===L){N.push("M",F[0],"A",L,",",L," 0 0,",g," ",F[1],"A",l,",",l," 0 ",1-p^Uo(F[1][0],F[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",L,",",L," 0 0,",g," ",U[0])}else{N.push("M",F[0],"A",L,",",L," 0 1,",g," ",U[0])}}else{N.push("M",w,",",x)}if(A!=null){var H=Ho([w,x],[A,E],o,-j,p),X=Ho([k,S],b==null?[w,x]:[b,M],o,-j,p);if(d===j){N.push("L",X[0],"A",j,",",j," 0 0,",g," ",X[1],"A",o,",",o," 0 ",p^Uo(X[1][0],X[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",j,",",j," 0 0,",g," ",H[0])}else{N.push("L",X[0],"A",j,",",j," 0 0,",g," ",H[0])}}else{N.push("L",k,",",S)}}else{N.push("M",w,",",x);if(b!=null)N.push("A",l,",",l," 0 ",D,",",p," ",b,",",M);N.push("L",k,",",S);if(A!=null)N.push("A",o,",",o," 0 ",T,",",1-p," ",A,",",E)}N.push("Z");return N.join("")}function s(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}o.innerRadius=function(n){if(!arguments.length)return t;t=Sn(n);return o};o.outerRadius=function(t){if(!arguments.length)return n;n=Sn(t);return o};o.cornerRadius=function(t){if(!arguments.length)return e;e=Sn(t);return o;

};o.padRadius=function(t){if(!arguments.length)return r;r=t==zo?zo:Sn(t);return o};o.startAngle=function(t){if(!arguments.length)return i;i=Sn(t);return o};o.endAngle=function(t){if(!arguments.length)return a;a=Sn(t);return o};o.padAngle=function(t){if(!arguments.length)return u;u=Sn(t);return o};o.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Pt;return[Math.cos(r)*e,Math.sin(r)*e]};return o};var zo="auto";function qo(t){return t.innerRadius}function Bo(t){return t.outerRadius}function Yo(t){return t.startAngle}function Ro(t){return t.endAngle}function Fo(t){return t&&t.padAngle}function Uo(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function Ho(t,n,e,r,i){var a=t[0]-n[0],u=t[1]-n[1],o=(i?r:-r)/Math.sqrt(a*a+u*u),s=o*u,l=-o*a,f=t[0]+s,c=t[1]+l,h=n[0]+s,p=n[1]+l,d=(f+h)/2,g=(c+p)/2,m=h-f,v=p-c,y=m*m+v*v,_=e-r,w=f*p-h*c,x=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-w*w)),b=(w*v-m*x)/y,M=(-w*m-v*x)/y,k=(w*v+m*x)/y,S=(-w*m+v*x)/y,A=b-d,E=M-g,N=k-d,D=S-g;if(A*A+E*E>N*N+D*D)b=k,M=S;return[[b-s,M-l],[b*e/_,M*e/_]]}function Xo(t){var n=ki,e=Si,r=or,i=Zo,a=i.key,u=.7;function o(a){var o=[],s=[],l=-1,f=a.length,c,h=Sn(n),p=Sn(e);function d(){o.push("M",i(t(s),u))}while(++l<f){if(r.call(this,c=a[l],l)){s.push([+h.call(this,c,l),+p.call(this,c,l)])}else if(s.length){d();s=[]}}if(s.length)d();return o.length?o.join(""):null}o.x=function(t){if(!arguments.length)return n;n=t;return o};o.y=function(t){if(!arguments.length)return e;e=t;return o};o.defined=function(t){if(!arguments.length)return r;r=t;return o};o.interpolate=function(t){if(!arguments.length)return a;if(typeof t==="function")a=i=t;else a=(i=Wo.get(t)||Zo).key;return o};o.tension=function(t){if(!arguments.length)return u;u=t;return o};return o}t.svg.line=function(){return Xo(L)};var Wo=t.map({linear:Zo,"linear-closed":$o,step:Vo,"step-before":Go,"step-after":Jo,basis:rs,"basis-open":is,"basis-closed":as,bundle:us,cardinal:ts,"cardinal-open":Ko,"cardinal-closed":Qo,monotone:gs});Wo.forEach(function(t,n){n.key=t;n.closed=/-closed$/.test(t)});function Zo(t){return t.length>1?t.join("L"):t+"Z"}function $o(t){return t.join("L")+"Z"}function Vo(t){var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];while(++n<e)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);if(e>1)i.push("H",r[0]);return i.join("")}function Go(t){var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];while(++n<e)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Jo(t){var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];while(++n<e)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ko(t,n){return t.length<4?Zo(t):t[1]+ns(t.slice(1,-1),es(t,n))}function Qo(t,n){return t.length<3?$o(t):t[0]+ns((t.push(t[0]),t),es([t[t.length-2]].concat(t,[t[1]]),n))}function ts(t,n){return t.length<3?Zo(t):t[0]+ns(t,es(t,n))}function ns(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2){return Zo(t)}var e=t.length!=n.length,r="",i=t[0],a=t[1],u=n[0],o=u,s=1;if(e){r+="Q"+(a[0]-u[0]*2/3)+","+(a[1]-u[1]*2/3)+","+a[0]+","+a[1];i=t[1];s=2}if(n.length>1){o=n[1];a=t[s];s++;r+="C"+(i[0]+u[0])+","+(i[1]+u[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var l=2;l<n.length;l++,s++){a=t[s];o=n[l];r+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}}if(e){var f=t[s];r+="Q"+(a[0]+o[0]*2/3)+","+(a[1]+o[1]*2/3)+","+f[0]+","+f[1]}return r}function es(t,n){var e=[],r=(1-n)/2,i,a=t[0],u=t[1],o=1,s=t.length;while(++o<s){i=a;a=u;u=t[o];e.push([r*(u[0]-i[0]),r*(u[1]-i[1])])}return e}function rs(t){if(t.length<3)return Zo(t);var n=1,e=t.length,r=t[0],i=r[0],a=r[1],u=[i,i,i,(r=t[1])[0]],o=[a,a,a,r[1]],s=[i,",",a,"L",os(fs,u),",",os(fs,o)];t.push(t[e-1]);while(++n<=e){r=t[n];u.shift();u.push(r[0]);o.shift();o.push(r[1]);cs(s,u,o)}t.pop();s.push("L",r);return s.join("")}function is(t){if(t.length<4)return Zo(t);var n=[],e=-1,r=t.length,i,a=[0],u=[0];while(++e<3){i=t[e];a.push(i[0]);u.push(i[1])}n.push(os(fs,a)+","+os(fs,u));--e;while(++e<r){i=t[e];a.shift();a.push(i[0]);u.shift();u.push(i[1]);cs(n,a,u)}return n.join("")}function as(t){var n,e=-1,r=t.length,i=r+4,a,u=[],o=[];while(++e<4){a=t[e%r];u.push(a[0]);o.push(a[1])}n=[os(fs,u),",",os(fs,o)];--e;while(++e<i){a=t[e%r];u.shift();u.push(a[0]);o.shift();o.push(a[1]);cs(n,u,o)}return n.join("")}function us(t,n){var e=t.length-1;if(e){var r=t[0][0],i=t[0][1],a=t[e][0]-r,u=t[e][1]-i,o=-1,s,l;while(++o<=e){s=t[o];l=o/e;s[0]=n*s[0]+(1-n)*(r+l*a);s[1]=n*s[1]+(1-n)*(i+l*u)}}return rs(t)}function os(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}var ss=[0,2/3,1/3,0],ls=[0,1/3,2/3,0],fs=[0,1/6,2/3,1/6];function cs(t,n,e){t.push("C",os(ss,n),",",os(ss,e),",",os(ls,n),",",os(ls,e),",",os(fs,n),",",os(fs,e))}function hs(t,n){return(n[1]-t[1])/(n[0]-t[0])}function ps(t){var n=0,e=t.length-1,r=[],i=t[0],a=t[1],u=r[0]=hs(i,a);while(++n<e){r[n]=(u+(u=hs(i=a,a=t[n+1])))/2}r[n]=u;return r}function ds(t){var n=[],e,r,i,a,u=ps(t),o=-1,s=t.length-1;while(++o<s){e=hs(t[o],t[o+1]);if(_(e)<Et){u[o]=u[o+1]=0}else{r=u[o]/e;i=u[o+1]/e;a=r*r+i*i;if(a>9){a=e*3/Math.sqrt(a);u[o]=a*r;u[o+1]=a*i}}}o=-1;while(++o<=s){a=(t[Math.min(s,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+u[o]*u[o]));n.push([a||0,u[o]*a||0])}return n}function gs(t){return t.length<3?Zo(t):t[0]+ns(t,ds(t))}t.svg.line.radial=function(){var t=Xo(ms);t.radius=t.x,delete t.x;t.angle=t.y,delete t.y;return t};function ms(t){var n,e=-1,r=t.length,i,a;while(++e<r){n=t[e];i=n[0];a=n[1]-Pt;n[0]=i*Math.cos(a);n[1]=i*Math.sin(a)}return t}function vs(t){var n=ki,e=ki,r=0,i=Si,a=or,u=Zo,o=u.key,s=u,l="L",f=.7;function c(o){var c=[],h=[],p=[],d=-1,g=o.length,m,v=Sn(n),y=Sn(r),_=n===e?function(){return x}:Sn(e),w=r===i?function(){return b}:Sn(i),x,b;function M(){c.push("M",u(t(p),f),l,s(t(h.reverse()),f),"Z")}while(++d<g){if(a.call(this,m=o[d],d)){h.push([x=+v.call(this,m,d),b=+y.call(this,m,d)]);p.push([+_.call(this,m,d),+w.call(this,m,d)])}else if(h.length){M();h=[];p=[]}}if(h.length)M();return c.length?c.join(""):null}c.x=function(t){if(!arguments.length)return e;n=e=t;return c};c.x0=function(t){if(!arguments.length)return n;n=t;return c};c.x1=function(t){if(!arguments.length)return e;e=t;return c};c.y=function(t){if(!arguments.length)return i;r=i=t;return c};c.y0=function(t){if(!arguments.length)return r;r=t;return c};c.y1=function(t){if(!arguments.length)return i;i=t;return c};c.defined=function(t){if(!arguments.length)return a;a=t;return c};c.interpolate=function(t){if(!arguments.length)return o;if(typeof t==="function")o=u=t;else o=(u=Wo.get(t)||Zo).key;s=u.reverse||u;l=u.closed?"M":"L";return c};c.tension=function(t){if(!arguments.length)return f;f=t;return c};return c}Go.reverse=Jo;Jo.reverse=Go;t.svg.area=function(){return vs(L)};t.svg.area.radial=function(){var t=vs(ms);t.radius=t.x,delete t.x;t.innerRadius=t.x0,delete t.x0;t.outerRadius=t.x1,delete t.x1;t.angle=t.y,delete t.y;t.startAngle=t.y0,delete t.y0;t.endAngle=t.y1,delete t.y1;return t};t.svg.chord=function(){var t=oi,n=si,e=ys,r=Yo,i=Ro;function a(e,r){var i=u(this,t,e,r),a=u(this,n,e,r);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(o(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function u(t,n,a,u){var o=n.call(t,a,u),s=e.call(t,o,u),l=r.call(t,o,u)-Pt,f=i.call(t,o,u)-Pt;return{r:s,a0:l,a1:f,p0:[s*Math.cos(l),s*Math.sin(l)],p1:[s*Math.cos(f),s*Math.sin(f)]}}function o(t,n){return t.a0==n.a0&&t.a1==n.a1}function s(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Dt)+",1 "+n}function l(t,n,e,r){return"Q 0,0 "+r}a.radius=function(t){if(!arguments.length)return e;e=Sn(t);return a};a.source=function(n){if(!arguments.length)return t;t=Sn(n);return a};a.target=function(t){if(!arguments.length)return n;n=Sn(t);return a};a.startAngle=function(t){if(!arguments.length)return r;r=Sn(t);return a};a.endAngle=function(t){if(!arguments.length)return i;i=Sn(t);return a};return a};function ys(t){return t.radius}t.svg.diagonal=function(){var t=oi,n=si,e=_s;function r(r,i){var a=t.call(this,r,i),u=n.call(this,r,i),o=(a.y+u.y)/2,s=[a,{x:a.x,y:o},{x:u.x,y:o},u];s=s.map(e);return"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}r.source=function(n){if(!arguments.length)return t;t=Sn(n);return r};r.target=function(t){if(!arguments.length)return n;n=Sn(t);return r};r.projection=function(t){if(!arguments.length)return e;e=t;return r};return r};function _s(t){return[t.x,t.y]}t.svg.diagonal.radial=function(){var n=t.svg.diagonal(),e=_s,r=n.projection;n.projection=function(t){return arguments.length?r(ws(e=t)):e};return n};function ws(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Pt;return[e*Math.cos(r),e*Math.sin(r)]}}t.svg.symbol=function(){var t=bs,n=xs;function e(e,r){return(ks.get(t.call(this,e,r))||Ms)(n.call(this,e,r))}e.type=function(n){if(!arguments.length)return t;t=Sn(n);return e};e.size=function(t){if(!arguments.length)return n;n=Sn(t);return e};return e};function xs(){return 64}function bs(){return"circle"}function Ms(t){var n=Math.sqrt(t/Dt);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}var ks=t.map({circle:Ms,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*As)),e=n*As;return"M0,"+-n+"L"+e+",0"+" 0,"+n+" "+-e+",0"+"Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Ss),e=n*Ss/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Ss),e=n*Ss/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});t.svg.symbolTypes=ks.keys();var Ss=Math.sqrt(3),As=Math.tan(30*Lt);V.transition=function(t){var n=Ps||++Ts,e=Os(t),r=[],i,a,u=Ls||{time:Date.now(),ease:Ia,delay:0,duration:250};for(var o=-1,s=this.length;++o<s;){r.push(i=[]);for(var l=this[o],f=-1,c=l.length;++f<c;){if(a=l[f])zs(a,f,e,n,u);i.push(a)}}return Ds(r,e,n)};V.interrupt=function(t){return this.each(t==null?Es:Ns(Os(t)))};var Es=Ns(Os());function Ns(t){return function(){var n,e,r;if((n=this[t])&&(r=n[e=n.active])){r.timer.c=null;r.timer.t=NaN;if(--n.count)delete n[e];else delete this[t];n.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Ds(t,n,e){H(t,Cs);t.namespace=n;t.id=e;return t}var Cs=[],Ts=0,Ps,Ls;Cs.call=V.call;Cs.empty=V.empty;Cs.node=V.node;Cs.size=V.size;t.transition=function(n,e){return n&&n.transition?Ps?n.transition(e):n:t.selection().transition(n)};t.transition.prototype=Cs;Cs.select=function(t){var n=this.id,e=this.namespace,r=[],i,a,u;t=G(t);for(var o=-1,s=this.length;++o<s;){r.push(i=[]);for(var l=this[o],f=-1,c=l.length;++f<c;){if((u=l[f])&&(a=t.call(u,u.__data__,f,o))){if("__data__"in u)a.__data__=u.__data__;zs(a,f,e,n,u[e][n]);i.push(a)}else{i.push(null)}}}return Ds(r,e,n)};Cs.selectAll=function(t){var n=this.id,e=this.namespace,r=[],i,a,u,o,s;t=J(t);for(var l=-1,f=this.length;++l<f;){for(var c=this[l],h=-1,p=c.length;++h<p;){if(u=c[h]){s=u[e][n];a=t.call(u,u.__data__,h,l);r.push(i=[]);for(var d=-1,g=a.length;++d<g;){if(o=a[d])zs(o,d,e,n,s);i.push(o)}}}}return Ds(r,e,n)};Cs.filter=function(t){var n=[],e,r,i;if(typeof t!=="function")t=ct(t);for(var a=0,u=this.length;a<u;a++){n.push(e=[]);for(var r=this[a],o=0,s=r.length;o<s;o++){if((i=r[o])&&t.call(i,i.__data__,o,a)){e.push(i)}}}return Ds(n,this.namespace,this.id)};Cs.tween=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2)return this.node()[r][e].tween.get(t);return pt(this,n==null?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})};function js(t,n,e,r){var i=t.id,a=t.namespace;return pt(t,typeof e==="function"?function(t,u,o){t[a][i].tween.set(n,r(e.call(t,t.__data__,u,o)))}:(e=r(e),function(t){t[a][i].tween.set(n,e)}))}Cs.attr=function(n,e){if(arguments.length<2){for(e in n)this.attr(e,n[e]);return this}var r=n=="transform"?ru:Sa,i=t.ns.qualify(n);function a(){this.removeAttribute(i)}function u(){this.removeAttributeNS(i.space,i.local)}function o(t){return t==null?a:(t+="",function(){var n=this.getAttribute(i),e;return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})}function s(t){return t==null?u:(t+="",function(){var n=this.getAttributeNS(i.space,i.local),e;return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return js(this,"attr."+n,e,i.local?s:o)};Cs.attrTween=function(n,e){var r=t.ns.qualify(n);function i(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function a(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}return this.tween("attr."+n,r.local?a:i)};Cs.style=function(t,n,e){var r=arguments.length;if(r<3){if(typeof t!=="string"){if(r<2)n="";for(e in t)this.style(e,t[e],n);return this}e=""}function i(){this.style.removeProperty(t)}function u(n){return n==null?i:(n+="",function(){var r=a(this).getComputedStyle(this,null).getPropertyValue(t),i;return r!==n&&(i=Sa(r,n),function(n){this.style.setProperty(t,i(n),e)})})}return js(this,"style."+t,n,u)};Cs.styleTween=function(t,n,e){if(arguments.length<3)e="";function r(r,i){var u=n.call(this,r,i,a(this).getComputedStyle(this,null).getPropertyValue(t));return u&&function(n){this.style.setProperty(t,u(n),e)}}return this.tween("style."+t,r)};Cs.text=function(t){return js(this,"text",t,Is)};function Is(t){if(t==null)t="";return function(){this.textContent=t}}Cs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;if(this[t].count<2&&(n=this.parentNode))n.removeChild(this)})};Cs.ease=function(n){var e=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][e].ease;if(typeof n!=="function")n=t.ease.apply(t,arguments);return pt(this,function(t){t[r][e].ease=n})};Cs.delay=function(t){var n=this.id,e=this.namespace;if(arguments.length<1)return this.node()[e][n].delay;return pt(this,typeof t==="function"?function(r,i,a){r[e][n].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[e][n].delay=t}))};Cs.duration=function(t){var n=this.id,e=this.namespace;if(arguments.length<1)return this.node()[e][n].duration;return pt(this,typeof t==="function"?function(r,i,a){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))};Cs.each=function(n,e){var r=this.id,i=this.namespace;if(arguments.length<2){var a=Ls,u=Ps;try{Ps=r;pt(this,function(t,e,a){Ls=t[i][r];n.call(t,t.__data__,e,a)})}finally{Ls=a;Ps=u}}else{pt(this,function(a){var u=a[i][r];(u.event||(u.event=t.dispatch("start","end","interrupt"))).on(n,e)})}return this};Cs.transition=function(){var t=this.id,n=++Ts,e=this.namespace,r=[],i,a,u,o;for(var s=0,l=this.length;s<l;s++){r.push(i=[]);for(var a=this[s],f=0,c=a.length;f<c;f++){if(u=a[f]){o=u[e][t];zs(u,f,e,n,{time:o.time,ease:o.ease,delay:o.delay+o.duration,duration:o.duration})}i.push(u)}}return Ds(r,e,n)};function Os(t){return t==null?"__transition__":"__transition_"+t+"__"}function zs(t,n,e,r,i){var a=t[e]||(t[e]={active:0,count:0}),u=a[r],o,s,l,f,c;function h(t){var n=u.delay;s.t=n+o;if(n<=t)return p(t-n);s.c=p}function p(e){var i=a.active,h=a[i];if(h){h.timer.c=null;h.timer.t=NaN;--a.count;delete a[i];h.event&&h.event.interrupt.call(t,t.__data__,h.index)}for(var p in a){if(+p<r){var g=a[p];g.timer.c=null;g.timer.t=NaN;--a.count;delete a[p]}}s.c=d;In(function(){if(s.c&&d(e||1)){s.c=null;s.t=NaN}return 1},0,o);a.active=r;u.event&&u.event.start.call(t,t.__data__,n);c=[];u.tween.forEach(function(e,r){if(r=r.call(t,t.__data__,n)){c.push(r)}});f=u.ease;l=u.duration}function d(i){var o=i/l,s=f(o),h=c.length;while(h>0){c[--h].call(t,s)}if(o>=1){u.event&&u.event.end.call(t,t.__data__,n);if(--a.count)delete a[r];else delete t[e];return 1}}if(!u){o=i.time;s=In(h,0,o);u=a[r]={tween:new b,time:o,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:n};i=null;++a.count}}t.svg.axis=function(){var n=t.scale.linear(),r=qs,i=6,a=6,u=3,o=[10],s=null,l;function f(e){e.each(function(){var e=t.select(this);var f=this.__chart__||n,c=this.__chart__=n.copy();var h=s==null?c.ticks?c.ticks.apply(c,o):c.domain():s,p=l==null?c.tickFormat?c.tickFormat.apply(c,o):L:l,d=e.selectAll(".tick").data(h,c),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Et),m=t.transition(d.exit()).style("opacity",Et).remove(),v=t.transition(d.order()).style("opacity",1),y=Math.max(i,0)+u,_;var w=uo(c),x=e.selectAll(".domain").data([0]),b=(x.enter().append("path").attr("class","domain"),t.transition(x));g.append("line");g.append("text");var M=g.select("line"),k=v.select("line"),S=d.select("text").text(p),A=g.select("text"),E=v.select("text"),N=r==="top"||r==="left"?-1:1,D,C,T,P;if(r==="bottom"||r==="top"){_=Ys,D="x",T="y",C="x2",P="y2";S.attr("dy",N<0?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+w[0]+","+N*a+"V0H"+w[1]+"V"+N*a)}else{_=Rs,D="y",T="x",C="y2",P="x2";S.attr("dy",".32em").style("text-anchor",N<0?"end":"start");b.attr("d","M"+N*a+","+w[0]+"H0V"+w[1]+"H"+N*a)}M.attr(P,N*i);A.attr(T,N*y);k.attr(C,0).attr(P,N*i);E.attr(D,0).attr(T,N*y);if(c.rangeBand){var j=c,I=j.rangeBand()/2;f=c=function(t){return j(t)+I}}else if(f.rangeBand){f=c}else{m.call(_,c,f)}g.call(_,f,c);v.call(_,c,c)})}f.scale=function(t){if(!arguments.length)return n;n=t;return f};f.orient=function(t){if(!arguments.length)return r;r=t in Bs?t+"":qs;return f};f.ticks=function(){if(!arguments.length)return o;o=e(arguments);return f};f.tickValues=function(t){if(!arguments.length)return s;s=t;return f};f.tickFormat=function(t){if(!arguments.length)return l;l=t;return f};f.tickSize=function(t){var n=arguments.length;if(!n)return i;i=+t;a=+arguments[n-1];return f};f.innerTickSize=function(t){if(!arguments.length)return i;i=+t;return f};f.outerTickSize=function(t){if(!arguments.length)return a;a=+t;return f};f.tickPadding=function(t){if(!arguments.length)return u;u=+t;return f};f.tickSubdivide=function(){return arguments.length&&f};return f};var qs="bottom",Bs={top:1,right:1,bottom:1,left:1};function Ys(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function Rs(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}t.svg.brush=function(){var n=F(h,"brushstart","brush","brushend"),e=null,r=null,i=[0,0],u=[0,0],o,s,l=true,f=true,c=Us[0];function h(n){n.each(function(){var n=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m);var i=n.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=n.selectAll(".resize").data(c,L);a.exit().remove();a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Fs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");a.style("display",h.empty()?"none":null);var u=t.transition(n),o=t.transition(i),s;if(e){s=uo(e);o.attr("x",s[0]).attr("width",s[1]-s[0]);d(u)}if(r){s=uo(r);o.attr("y",s[0]).attr("height",s[1]-s[0]);g(u)}p(u)})}h.event=function(e){e.each(function(){var e=n.of(this,arguments),r={x:i,y:u,i:o,j:s},a=this.__chart__||r;this.__chart__=r;if(Ps){t.select(this).transition().each("start.brush",function(){o=a.i;s=a.j;i=a.x;u=a.y;e({type:"brushstart"})}).tween("brush:brush",function(){var t=Aa(i,r.x),n=Aa(u,r.y);o=s=null;return function(a){i=r.x=t(a);u=r.y=n(a);e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=r.i;s=r.j;e({type:"brush",mode:"resize"});e({type:"brushend"})})}else{e({type:"brushstart"});e({type:"brush",mode:"resize"});e({type:"brushend"})}})};function p(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+i[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function d(t){t.select(".extent").attr("x",i[0]);t.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function g(t){t.select(".extent").attr("y",u[0]);t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function m(){var c=this,m=t.select(t.event.target),v=n.of(c,arguments),y=t.select(c),_=m.datum(),w=!/^(n|s)$/.test(_)&&e,x=!/^(e|w)$/.test(_)&&r,b=m.classed("extent"),M=Mt(c),k,S=t.mouse(c),A;var E=t.select(a(c)).on("keydown.brush",C).on("keyup.brush",T);if(t.event.changedTouches){E.on("touchmove.brush",P).on("touchend.brush",j)}else{E.on("mousemove.brush",P).on("mouseup.brush",j)}y.interrupt().selectAll("*").interrupt();if(b){S[0]=i[0]-S[0];S[1]=u[0]-S[1]}else if(_){var N=+/w$/.test(_),D=+/^n/.test(_);A=[i[1-N]-S[0],u[1-D]-S[1]];S[0]=i[N];S[1]=u[D]}else if(t.event.altKey)k=S.slice();y.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",m.style("cursor"));v({type:"brushstart"});P();function C(){if(t.event.keyCode==32){if(!b){k=null;S[0]-=i[1];S[1]-=u[1];b=2}Y()}}function T(){if(t.event.keyCode==32&&b==2){S[0]+=i[1];S[1]+=u[1];b=0;Y()}}function P(){var n=t.mouse(c),a=false;if(A){n[0]+=A[0];n[1]+=A[1]}if(!b){if(t.event.altKey){if(!k)k=[(i[0]+i[1])/2,(u[0]+u[1])/2];S[0]=i[+(n[0]<k[0])];S[1]=u[+(n[1]<k[1])]}else k=null}if(w&&L(n,e,0)){d(y);a=true}if(x&&L(n,r,1)){g(y);a=true}if(a){p(y);v({type:"brush",mode:b?"move":"resize"})}}function L(t,n,e){var r=uo(n),a=r[0],c=r[1],h=S[e],p=e?u:i,d=p[1]-p[0],g,m;if(b){a-=h;c-=d+h}g=(e?f:l)?Math.max(a,Math.min(c,t[e])):t[e];if(b){m=(g+=h)+d}else{if(k)h=Math.max(a,Math.min(c,2*k[e]-g));if(h<g){m=g;g=h}else{m=h}}if(p[0]!=g||p[1]!=m){if(e)s=null;else o=null;p[0]=g;p[1]=m;return true}}function j(){P();y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null);t.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);M();v({type:"brushend"})}}h.x=function(t){if(!arguments.length)return e;e=t;c=Us[!e<<1|!r];return h};h.y=function(t){if(!arguments.length)return r;r=t;c=Us[!e<<1|!r];return h};h.clamp=function(t){if(!arguments.length)return e&&r?[l,f]:e?l:r?f:null;if(e&&r)l=!!t[0],f=!!t[1];else if(e)l=!!t;else if(r)f=!!t;return h};h.extent=function(t){var n,a,l,f,c;if(!arguments.length){if(e){if(o){n=o[0],a=o[1]}else{n=i[0],a=i[1];if(e.invert)n=e.invert(n),a=e.invert(a);if(a<n)c=n,n=a,a=c}}if(r){if(s){l=s[0],f=s[1]}else{l=u[0],f=u[1];if(r.invert)l=r.invert(l),f=r.invert(f);if(f<l)c=l,l=f,f=c}}return e&&r?[[n,l],[a,f]]:e?[n,a]:r&&[l,f]}if(e){n=t[0],a=t[1];if(r)n=n[0],a=a[0];o=[n,a];if(e.invert)n=e(n),a=e(a);if(a<n)c=n,n=a,a=c;if(n!=i[0]||a!=i[1])i=[n,a]}if(r){l=t[0],f=t[1];if(e)l=l[1],f=f[1];s=[l,f];if(r.invert)l=r(l),f=r(f);if(f<l)c=l,l=f,f=c;if(l!=u[0]||f!=u[1])u=[l,f]}return h};h.clear=function(){if(!h.empty()){i=[0,0],u=[0,0];o=s=null}return h};h.empty=function(){return!!e&&i[0]==i[1]||!!r&&u[0]==u[1]};return t.rebind(h,n,"on")};var Fs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Us=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Hs=Wn.format=be.timeFormat;var Xs=Hs.utc;var Ws=Xs("%Y-%m-%dT%H:%M:%S.%LZ");Hs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zs:Ws;function Zs(t){return t.toISOString()}Zs.parse=function(t){var n=new Date(t);return isNaN(n)?null:n};Zs.toString=Ws.toString;Wn.second=Gn(function(t){return new Zn(Math.floor(t/1e3)*1e3)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*1e3)},function(t){return t.getSeconds()});Wn.seconds=Wn.second.range;Wn.seconds.utc=Wn.second.utc.range;Wn.minute=Gn(function(t){return new Zn(Math.floor(t/6e4)*6e4)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*6e4)},function(t){return t.getMinutes()});Wn.minutes=Wn.minute.range;Wn.minutes.utc=Wn.minute.utc.range;Wn.hour=Gn(function(t){var n=t.getTimezoneOffset()/60;return new Zn((Math.floor(t/36e5-n)+n)*36e5)},function(t,n){t.setTime(t.getTime()+Math.floor(n)*36e5)},function(t){return t.getHours()});Wn.hours=Wn.hour.range;Wn.hours.utc=Wn.hour.utc.range;Wn.month=Gn(function(t){t=Wn.day(t);t.setDate(1);return t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()});Wn.months=Wn.month.range;Wn.months.utc=Wn.month.utc.range;function $s(n,e,r){function i(t){return n(t)}i.invert=function(t){return Vs(n.invert(t))};i.domain=function(t){if(!arguments.length)return n.domain().map(Vs);n.domain(t);return i};function a(n,r){var i=n[1]-n[0],a=i/r,u=t.bisect(Gs,a);return u==Gs.length?[e.year,mo(n.map(function(t){return t/31536e6}),r)[2]]:!u?[Qs,mo(n,r)[2]]:e[a/Gs[u-1]<Gs[u]/a?u-1:u]}i.nice=function(t,n){var e=i.domain(),r=ao(e),u=t==null?a(r,10):typeof t==="number"&&a(r,t);if(u)t=u[0],n=u[1];function o(e){return!isNaN(e)&&!t.range(e,Vs(+e+1),n).length}return i.domain(so(e,n>1?{floor:function(n){while(o(n=t.floor(n)))n=Vs(n-1);return n},ceil:function(n){while(o(n=t.ceil(n)))n=Vs(+n+1);return n}}:t))};i.ticks=function(t,n){var e=ao(i.domain()),r=t==null?a(e,10):typeof t==="number"?a(e,t):!t.range&&[{range:t},n];if(r)t=r[0],n=r[1];return t.range(e[0],Vs(+e[1]+1),n<1?1:n)};i.tickFormat=function(){return r};i.copy=function(){return $s(n.copy(),e,r)};return po(i,n)}function Vs(t){return new Date(t)}var Gs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Js=[[Wn.second,1],[Wn.second,5],[Wn.second,15],[Wn.second,30],[Wn.minute,1],[Wn.minute,5],[Wn.minute,15],[Wn.minute,30],[Wn.hour,1],[Wn.hour,3],[Wn.hour,6],[Wn.hour,12],[Wn.day,1],[Wn.day,2],[Wn.week,1],[Wn.month,1],[Wn.month,3],[Wn.year,1]];var Ks=Hs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&t.getDate()!=1}],["%b %d",function(t){return t.getDate()!=1}],["%B",function(t){return t.getMonth()}],["%Y",or]]);var Qs={range:function(n,e,r){return t.range(Math.ceil(n/r)*r,+e,r).map(Vs)},floor:L,ceil:L};Js.year=Wn.year;Wn.scale=function(){return $s(t.scale.linear(),Js,Ks)};var tl=Js.map(function(t){return[t[0].utc,t[1]]});var nl=Xs.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&t.getUTCDate()!=1}],["%b %d",function(t){return t.getUTCDate()!=1}],["%B",function(t){return t.getUTCMonth()}],["%Y",or]]);tl.year=Wn.year.utc;Wn.scale.utc=function(){return $s(t.scale.linear(),tl,nl)};t.text=An(function(t){return t.responseText});t.json=function(t,n){return En(t,"application/json",el,n)};function el(t){return JSON.parse(t.responseText)}t.html=function(t,n){return En(t,"text/html",rl,n)};function rl(t){var n=r.createRange();n.selectNode(r.body);return n.createContextualFragment(t.responseText)}t.xml=An(function(t){return t.responseXML});if(typeof define==="function"&&define.amd)this.d3=t,define(t);else if(typeof module==="object"&&module.exports)module.exports=t;else this.d3=t}();(function(t){var n,e="1.7.2",r=Math.round,i,a={},u="en",o=typeof module!=="undefined"&&module.exports,s="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),l=/^\/?Date\((\-?\d+)/i,f=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,h=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,p=/\d\d?/,d=/\d{1,3}/,g=/\d{3}/,m=/\d{1,4}/,v=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,y=/Z|[\+\-]\d\d:?\d\d/i,_=/T/i,w=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,x="YYYY-MM-DDTHH:mm:ssZ",b=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],M=/([\+\-]|\d\d)/gi,k="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),S={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},A={},E="DDD w M D d".split(" "),N="M D H h m s w".split(" "),D={M:function(){return this.month()+1},MMM:function(t){return C("monthsShort",this.month(),this,t)},MMMM:function(t){return C("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){var t=new Date(this.year(),this.month(),this.date()),n=new Date(this.year(),0,1);return~~((t-n)/864e5+1.5)},d:function(){return this.day()},dd:function(t){return C("weekdaysMin",this.day(),this,t)},ddd:function(t){return C("weekdaysShort",this.day(),this,t)},dddd:function(t){return C("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),n=new Date(t.getFullYear(),0,4);return~~((t-n)/864e5/7+1.5)},YY:function(){return O(this.year()%100,2)},YYYY:function(){return O(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return O(~~(this.milliseconds()/10),2)},SSS:function(){return O(this.milliseconds(),3)},Z:function(){var t=-this.zone(),n="+";if(t<0){t=-t;n="-"}return n+O(~~(t/60),2)+":"+O(~~t%60,2)},ZZ:function(){var t=-this.zone(),n="+";if(t<0){t=-t;n="-"}return n+O(~~(10*t/6),4)}};function C(t,n,e,r){var i=e.lang();return i[t].call?i[t](e,r):i[t][n]}function T(t,n){return function(e){return O(t.call(this,e),n)}}function P(t){return function(n){var e=t.call(this,n);return e+this.lang().ordinal(e)}}while(E.length){i=E.pop();D[i+"o"]=P(D[i])}while(N.length){i=N.pop();D[i+i]=T(D[i],2)}D.DDDD=T(D.DDD,3);function L(t,n,e){this._d=t;this._isUTC=!!n;this._a=t._a||null;this._lang=e||false}function j(t){var n=this._data={},e=t.years||t.y||0,r=t.months||t.M||0,i=t.weeks||t.w||0,a=t.days||t.d||0,u=t.hours||t.h||0,o=t.minutes||t.m||0,s=t.seconds||t.s||0,l=t.milliseconds||t.ms||0;this._milliseconds=l+s*1e3+o*6e4+u*36e5;this._days=a+i*7;this._months=r+e*12;n.milliseconds=l%1e3;s+=I(l/1e3);n.seconds=s%60;o+=I(s/60);n.minutes=o%60;u+=I(o/60);n.hours=u%24;a+=I(u/24);a+=i*7;n.days=a%30;r+=I(a/30);n.months=r%12;e+=I(r/12);n.years=e;this._lang=false}function I(t){if(t<0){return Math.ceil(t)}else{return Math.floor(t)}}function O(t,n){var e=t+"";while(e.length<n){e="0"+e}return e}function z(t,n,e){var r=n._milliseconds,i=n._days,a=n._months,u;if(r){t._d.setTime(+t+r*e)}if(i){t.date(t.date()+i*e)}if(a){u=t.date();t.date(1).month(t.month()+a*e).date(Math.min(u,t.daysInMonth()))}}function q(t){return Object.prototype.toString.call(t)==="[object Array]"}function B(t,n){var e=Math.min(t.length,n.length),r=Math.abs(t.length-n.length),i=0,a;for(a=0;a<e;a++){if(~~t[a]!==~~n[a]){i++}}return i+r}function Y(t,n,e,r){var i,a,u=[];for(i=0;i<7;i++){u[i]=t[i]=t[i]==null?i===2?1:0:t[i]}t[7]=u[7]=n;if(t[8]!=null){u[8]=t[8]}t[3]+=e||0;t[4]+=r||0;a=new Date(0);if(n){a.setUTCFullYear(t[0],t[1],t[2]);a.setUTCHours(t[3],t[4],t[5],t[6])}else{a.setFullYear(t[0],t[1],t[2]);a.setHours(t[3],t[4],t[5],t[6])}a._a=u;return a}function R(t,e){var r,i,u=[];if(!e&&o){e=require("./lang/"+t)}for(r=0;r<s.length;r++){e[s[r]]=e[s[r]]||a.en[s[r]]}for(r=0;r<12;r++){i=n([2e3,r]);u[r]=new RegExp("^"+(e.months[r]||e.months(i,""))+"|^"+(e.monthsShort[r]||e.monthsShort(i,"")).replace(".",""),"i")}e.monthsParse=e.monthsParse||u;a[t]=e;return e}function F(t){var e=typeof t==="string"&&t||t&&t._lang||null;return e?a[e]||R(e):n}function U(t){if(t.match(/\[.*\]/)){return t.replace(/^\[|\]$/g,"")}return t.replace(/\\/g,"")}function H(t){var n=t.match(f),e,r;for(e=0,r=n.length;e<r;e++){if(D[n[e]]){n[e]=D[n[e]]}else{
n[e]=U(n[e])}}return function(i){var a="";for(e=0;e<r;e++){a+=typeof n[e].call==="function"?n[e].call(i,t):n[e]}return a}}function X(t,n){var e=5;function r(n){return t.lang().longDateFormat[n]||n}while(e--&&c.test(n)){n=n.replace(c,r)}if(!A[n]){A[n]=H(n)}return A[n](t)}function W(t){switch(t){case"DDDD":return g;case"YYYY":return m;case"S":case"SS":case"SSS":case"DDD":return d;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return v;case"Z":case"ZZ":return y;case"T":return _;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(t.replace("\\",""))}}function Z(t,n,e,r){var i,a;switch(t){case"M":case"MM":e[1]=n==null?0:~~n-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++){if(F().monthsParse[i].test(n)){e[1]=i;a=true;break}}if(!a){e[8]=false}break;case"D":case"DD":case"DDD":case"DDDD":if(n!=null){e[2]=~~n}break;case"YY":e[0]=~~n+(~~n>70?1900:2e3);break;case"YYYY":e[0]=~~Math.abs(n);break;case"a":case"A":r.isPm=(n+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":e[3]=~~n;break;case"m":case"mm":e[4]=~~n;break;case"s":case"ss":e[5]=~~n;break;case"S":case"SS":case"SSS":e[6]=~~(("0."+n)*1e3);break;case"Z":case"ZZ":r.isUTC=true;i=(n+"").match(M);if(i&&i[1]){r.tzh=~~i[1]}if(i&&i[2]){r.tzm=~~i[2]}if(i&&i[0]==="+"){r.tzh=-r.tzh;r.tzm=-r.tzm}break}if(n==null){e[8]=false}}function $(t,n){var e=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=n.match(f),a,u;for(a=0;a<i.length;a++){u=(W(i[a]).exec(t)||[])[0];if(u){t=t.slice(t.indexOf(u)+u.length)}if(D[i[a]]){Z(i[a],u,e,r)}}if(r.isPm&&e[3]<12){e[3]+=12}if(r.isPm===false&&e[3]===12){e[3]=0}return Y(e,r.isUTC,r.tzh,r.tzm)}function V(t,n){var e,r=t.match(h)||[],i,a=99,u,o,s;for(u=0;u<n.length;u++){o=$(t,n[u]);i=X(new L(o),n[u]).match(h)||[];s=B(r,i);if(s<a){a=s;e=o}}return e}function G(t){var n="YYYY-MM-DDT",e;if(w.exec(t)){for(e=0;e<4;e++){if(b[e][1].exec(t)){n+=b[e][0];break}}return y.exec(t)?$(t,n+" Z"):$(t,n)}return new Date(t)}function J(t,n,e,r,i){var a=i.relativeTime[t];return typeof a==="function"?a(n||1,!!e,t,r):a.replace(/%d/i,n||1)}function K(t,n,e){var i=r(Math.abs(t)/1e3),a=r(i/60),u=r(a/60),o=r(u/24),s=r(o/365),l=i<45&&["s",i]||a===1&&["m"]||a<45&&["mm",a]||u===1&&["h"]||u<22&&["hh",u]||o===1&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",r(o/30)]||s===1&&["y"]||["yy",s];l[2]=n;l[3]=t>0;l[4]=e;return J.apply({},l)}n=function(e,r){if(e===null||e===""){return null}var i,a;if(n.isMoment(e)){return new L(new Date(+e._d),e._isUTC,e._lang)}else if(r){if(q(r)){i=V(e,r)}else{i=$(e,r)}}else{a=l.exec(e);i=e===t?new Date:a?new Date(+a[1]):e instanceof Date?e:q(e)?Y(e):typeof e==="string"?G(e):new Date(e)}return new L(i)};n.utc=function(t,e){if(q(t)){return new L(Y(t,true),true)}if(typeof t==="string"&&!y.exec(t)){t+=" +0000";if(e){e+=" Z"}}return n(t,e).utc()};n.unix=function(t){return n(t*1e3)};n.duration=function(t,e){var r=n.isDuration(t),i=typeof t==="number",a=r?t._data:i?{}:t,u;if(i){if(e){a[e]=t}else{a.milliseconds=t}}u=new j(a);if(r){u._lang=t._lang}return u};n.humanizeDuration=function(t,e,r){return n.duration(t,e===true?null:e).humanize(e===true?true:r)};n.version=e;n.defaultFormat=x;n.lang=function(t,e){var r;if(!t){return u}if(e||!a[t]){R(t,e)}if(a[t]){for(r=0;r<s.length;r++){n[s[r]]=a[t][s[r]]}n.monthsParse=a[t].monthsParse;u=t}};n.langData=F;n.isMoment=function(t){return t instanceof L};n.isDuration=function(t){return t instanceof j};n.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,n,e){if(t>11){return e?"pm":"PM"}else{return e?"am":"AM"}},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var n=t%10;return~~(t%100/10)===1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th"}});n.fn=L.prototype={clone:function(){return n(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){if(this._a){if(this._a[8]!=null){return!!this._a[8]}return!B(this._a,(this._a[7]?n.utc(this._a):n(this._a)).toArray())}return!isNaN(this._d.getTime())},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(t){return X(this,t?t:n.defaultFormat)},add:function(t,e){var r=e?n.duration(+e,t):n.duration(t);z(this,r,1);return this},subtract:function(t,e){var r=e?n.duration(+e,t):n.duration(t);z(this,r,-1);return this},diff:function(t,e,i){var a=this._isUTC?n(t).utc():n(t).local(),u=(this.zone()-a.zone())*6e4,o=this._d-a._d-u,s=this.year()-a.year(),l=this.month()-a.month(),f=this.date()-a.date(),c;if(e==="months"){c=s*12+l+f/30}else if(e==="years"){c=s+(l+f/30)/12}else{c=e==="seconds"?o/1e3:e==="minutes"?o/6e4:e==="hours"?o/36e5:e==="days"?o/864e5:e==="weeks"?o/6048e5:o}return i?c:r(c)},from:function(t,e){return n.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(n(),t)},calendar:function(){var t=this.diff(n().sod(),"days",true),e=this.lang().calendar,r=e.sameElse,i=t<-6?r:t<-1?e.lastWeek:t<0?e.lastDay:t<1?e.sameDay:t<2?e.nextDay:t<7?e.nextWeek:r;return this.format(typeof i==="function"?i.apply(this):i)},isLeapYear:function(){var t=this.year();return t%4===0&&t%100!==0||t%400===0},isDST:function(){return this.zone()<n([this.year()]).zone()||this.zone()<n([this.year(),5]).zone()},day:function(t){var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return t==null?n:this.add({d:t-n})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return n.utc([this.year(),this.month()+1,0]).date()},lang:function(n){if(n===t){return F(this)}else{this._lang=n;return this}}};function Q(t,e){n.fn[t]=function(t){var n=this._isUTC?"UTC":"";if(t!=null){this._d["set"+n+e](t);return this}else{return this._d["get"+n+e]()}}}for(i=0;i<k.length;i++){Q(k[i].toLowerCase(),k[i])}Q("year","FullYear");n.duration.fn=j.prototype={weeks:function(){return I(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(t){var n=+this,e=this.lang().relativeTime,r=K(n,!t,this.lang()),i=n<=0?e.past:e.future;if(t){if(typeof i==="function"){r=i(r)}else{r=i.replace(/%s/i,r)}}return r},lang:n.fn.lang};function tt(t){n.duration.fn[t]=function(){return this._data[t]}}function nt(t,e){n.duration.fn["as"+t]=function(){return+this/e}}for(i in S){if(S.hasOwnProperty(i)){nt(i,S[i]);tt(i.toLowerCase())}}nt("Weeks",6048e5);if(o){module.exports=n}if(typeof ender==="undefined"){this["moment"]=n}if(typeof define==="function"&&define.amd){define("moment",[],function(){return n})}}).call(this);(function(t,n){var e=typeof exports=="object"&&exports;var r=typeof global=="object"&&global;if(r.global===r){t=r}var i=[],a={};var u=0;var o={};var s=30;var l=t._;var f=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/;var c=/&(?:amp|lt|gt|quot|#x27);/g;var h=/\b__p \+= '';/g,p=/\b(__p \+=) '' \+/g,d=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var g=/\w*$/;var m=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g;var v=RegExp("^"+(a.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");var y=/($^)/;var _=/[&<>"']/g;var w=/['\n\r\t\u2028\u2029\\]/g;var x=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var b=0;var M=Math.ceil,k=i.concat,S=Math.floor,A=v.test(A=Object.getPrototypeOf)&&A,E=a.hasOwnProperty,N=i.push,D=a.propertyIsEnumerable,C=i.slice,T=a.toString;var P=v.test(P=C.bind)&&P,L=v.test(L=Array.isArray)&&L,j=t.isFinite,I=v.test(I=Object.keys)&&I,O=Math.max,z=Math.min,q=Math.random;var B="[object Arguments]",Y="[object Array]",R="[object Boolean]",F="[object Date]",U="[object Function]",H="[object Number]",X="[object Object]",W="[object RegExp]",Z="[object String]";var $;var V;var G=(G={0:1,length:1},i.splice.call(G,0,1),G[0]);var J=true;(function(){var t=[];function n(){this.x=1}n.prototype={valueOf:1,y:1};for(var e in new n){t.push(e)}for(e in arguments){J=!e}$=!/valueOf/.test(t);V=t[0]!="x"})(1);var K=!Mt(arguments);var Q=C.call("x")[0]!="x";var tt="x"[0]+Object("x")[0]!="xx";try{var nt=({toString:0}+"",T.call(t.document||0)==X)}catch(et){}var rt=P&&/\n|Opera/.test(P+T.call(t.opera));var it=I&&/^.+$|true/.test(I+!!t.attachEvent);try{var at=(Function("//@")(),!t.attachEvent)}catch(et){}var ut={};ut[B]=ut[U]=false;ut[Y]=ut[R]=ut[F]=ut[H]=ut[X]=ut[W]=ut[Z]=true;var ot={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var st={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};function lt(t){if(t&&t.__wrapped__){return t}if(!(this instanceof lt)){return new lt(t)}this.__wrapped__=t}lt.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var ft=se("<% if (obj.useStrict) { %>'use strict';\n<% } %>"+"var index, value, iteratee = <%= firstArg %>, "+"result = <%= firstArg %>;\n"+"if (!<%= firstArg %>) return result;\n"+"<%= top %>;\n"+"<% if (arrayLoop) { %>"+"var length = iteratee.length; index = -1;\n"+"if (typeof length == 'number') {"+"  <% if (noCharByIndex) { %>\n"+"  if (toString.call(iteratee) == stringClass) {\n"+"    iteratee = iteratee.split('')\n"+"  }"+"  <% } %>\n"+"  while (++index < length) {\n"+"    value = iteratee[index];\n"+"    <%= arrayLoop %>\n"+"  }\n"+"}\n"+"else {"+"  <%  } else if (noArgsEnum) { %>\n"+"  var length = iteratee.length; index = -1;\n"+"  if (length && isArguments(iteratee)) {\n"+"    while (++index < length) {\n"+"      value = iteratee[index += ''];\n"+"      <%= objectLoop %>\n"+"    }\n"+"  } else {"+"  <% } %>"+"  <% if (!hasDontEnumBug) { %>\n"+"  var skipProto = typeof iteratee == 'function' && \n"+"    propertyIsEnumerable.call(iteratee, 'prototype');\n"+"  <% } %>"+"  <% if (isKeysFast && useHas) { %>\n"+"  var ownIndex = -1,\n"+"      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n"+"      length = ownProps.length;\n\n"+"  while (++ownIndex < length) {\n"+"    index = ownProps[ownIndex];\n"+"    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>"+"    value = iteratee[index];\n"+"    <%= objectLoop %>\n"+"    <% if (!hasDontEnumBug) { %>}\n<% } %>"+"  }"+"  <% } else { %>\n"+"  for (index in iteratee) {<%"+"    if (!hasDontEnumBug || useHas) { %>\n    if (<%"+"      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }"+"      if (!hasDontEnumBug && useHas) { %> && <% }"+"      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }"+"    %>) {"+"    <% } %>\n"+"    value = iteratee[index];\n"+"    <%= objectLoop %>;"+"    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n"+"  }"+"  <% } %>"+"  <% if (hasDontEnumBug) { %>\n\n"+"  var ctor = iteratee.constructor;\n"+"    <% for (var k = 0; k < 7; k++) { %>\n"+"  index = '<%= shadowed[k] %>';\n"+"  if (<%"+"      if (shadowed[k] == 'constructor') {"+"        %>!(ctor && ctor.prototype === iteratee) && <%"+"      } %>hasOwnProperty.call(iteratee, index)) {\n"+"    value = iteratee[index];\n"+"    <%= objectLoop %>\n"+"  }"+"    <% } %>"+"  <% } %>"+"  <% if (arrayLoop || noArgsEnum) { %>\n}<% } %>\n"+"<%= bottom %>;\n"+"return result");var ct={args:"collection, callback, thisArg",top:"callback = createCallback(callback, thisArg)",arrayLoop:"if (callback(value, index, collection) === false) return result",objectLoop:"if (callback(value, index, collection) === false) return result"};var ht={useHas:false,args:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n"+"  if (iteratee = arguments[argsIndex]) {",objectLoop:"result[index] = value",bottom:"  }\n}"};var pt={arrayLoop:null};function dt(t,n,e){n||(n=0);var r=t.length,i=r-n>=(e||s),a=i?{}:t;if(i){var u=n-1;while(++u<r){var o=t[u]+"";(E.call(a,o)?a[o]:a[o]=[]).push(t[u])}}return function(t){if(i){var e=t+"";return E.call(a,e)&&Cn(a[e],t)>-1}return Cn(a,t,n)>-1}}function gt(t,e){var r=t.index,i=e.index;t=t.criteria;e=e.criteria;if(t!==e){if(t>e||t===n){return 1}if(t<e||e===n){return-1}}return r<i?-1:1}function mt(t,n,e){var r=Ut(t),i=!e,a=t;if(i){e=n}function u(){var o=arguments,s=i?this:n;if(!r){t=n[a]}if(e.length){o=o.length?e.concat(C.call(o)):e}if(this instanceof u){xt.prototype=t.prototype;s=new xt;var l=t.apply(s,o);return l&&ot[typeof l]?l:s}return t.apply(s,o)}return u}function vt(t,e){if(!t){return re}if(typeof t!="function"){return function(n){return n[t]}}if(e!==n){return function(n,r,i){return t.call(e,n,r,i)}}return t}function yt(){var t={arrayLoop:"",bottom:"",hasDontEnumBug:$,isKeysFast:it,objectLoop:"",noArgsEnum:J,noCharByIndex:tt,shadowed:x,top:"",useHas:true};for(var n,e=0;n=arguments[e];e++){for(var r in n){t[r]=n[r]}}var i=t.args;t.firstArg=/^[^,]+/.exec(i)[0];var a=Function("createCallback, hasOwnProperty, isArguments, objectTypes, nativeKeys, "+"propertyIsEnumerable, stringClass, toString","return function("+i+") {\n"+ft(t)+"\n}");return a(vt,E,Mt,ot,I,D,Z,T)}function _t(t){return"\\"+st[t]}function wt(t){return Nt[t]}function xt(){}function bt(t){return Dt[t]}function Mt(t){return T.call(t)==B}if(K){Mt=function(t){return t?E.call(t,"callee"):false}}var kt=yt(ct,pt,{useHas:false});var St=yt(ct,pt);function At(t){var n=false;if(!(t&&typeof t=="object")||Mt(t)){return n}var e=t.constructor;if((!nt||!(typeof t.toString!="function"&&typeof(t+"")=="string"))&&(!Ut(e)||e instanceof e)){if(V){kt(t,function(t,e,r){n=!E.call(r,e);return false});return n===false}kt(t,function(t,e){n=e});return n===false||E.call(t,n)}return n}function Et(t){var n=[];St(t,function(t,e){n.push(e)});return n}var Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};var Dt=It(Nt);function Ct(t,n,e,r,i){if(t==null){return t}if(e){n=false}var a=ot[typeof t];if(a){var u=T.call(t);if(!ut[u]||K&&Mt(t)){return t}var o=u==Y;a=o||(u==X?$t(t):a)}if(!a||!n){return a?o?C.call(t):Pt({},t):t}var s=t.constructor;switch(u){case R:case F:return new s(+t);case H:case Z:return new s(t);case W:return s(t.source,g.exec(t))}r||(r=[]);i||(i=[]);var l=r.length;while(l--){if(r[l]==t){return i[l]}}var f=o?s(t.length):{};r.push(t);i.push(f);(o?fn:St)(t,function(t,e){f[e]=Ct(t,n,null,r,i)});return f}var Tt=yt(ht,{objectLoop:"if (result[index] == null) "+ht.objectLoop});var Pt=yt(ht);function Lt(t){var n=[];kt(t,function(t,e){if(Ut(t)){n.push(e)}});return n.sort()}function jt(t,n){return t?E.call(t,n):false}function It(t){var n={};St(t,function(t,e){n[t]=e});return n}var Ot=L||function(t){return T.call(t)==Y};function zt(t){return t===true||t===false||T.call(t)==R}function qt(t){return T.call(t)==F}function Bt(t){return t?t.nodeType===1:false}function Yt(t){var n=true;if(!t){return n}var e=T.call(t),r=t.length;if(e==Y||e==Z||e==B||K&&Mt(t)||e==X&&typeof r=="number"&&Ut(t.splice)){return!r}St(t,function(){return n=false});return n}function Rt(t,n,e,r){if(t===n){return t!==0||1/t==1/n}if(t==null||n==null){return t===n}var i=T.call(t);if(i!=T.call(n)){return false}switch(i){case R:case F:return+t==+n;case H:return t!=+t?n!=+n:t==0?1/t==1/n:t==+n;case W:case Z:return t==n+""}var a=i==Y||i==B;if(K&&!a&&(a=Mt(t))&&!Mt(n)){return false}if(!a){if(t.__wrapped__||n.__wrapped__){return Rt(t.__wrapped__||t,n.__wrapped__||n)}if(i!=X||nt&&(typeof t.toString!="function"&&typeof(t+"")=="string"||typeof n.toString!="function"&&typeof(n+"")=="string")){return false}var u=t.constructor,o=n.constructor;if(u!=o&&!(Ut(u)&&u instanceof u&&Ut(o)&&o instanceof o)){return false}}e||(e=[]);r||(r=[]);var s=e.length;while(s--){if(e[s]==t){return r[s]==n}}var l=-1,f=true,c=0;e.push(t);r.push(n);if(a){c=t.length;f=c==n.length;if(f){while(c--){if(!(f=Rt(t[c],n[c],e,r))){break}}}return f}for(var h in t){if(E.call(t,h)){c++;if(!(E.call(n,h)&&Rt(t[h],n[h],e,r))){return false}}}for(h in n){if(E.call(n,h)&&!c--){return false}}if($){while(++l<7){h=x[l];if(E.call(t,h)&&!(E.call(n,h)&&Rt(t[h],n[h],e,r))){return false}}}return true}function Ft(t){return j(t?+t:parseFloat(t))}function Ut(t){return typeof t=="function"}if(Ut(/x/)){Ut=function(t){return T.call(t)==U}}function Ht(t){return t?ot[typeof t]:false}function Xt(t){return T.call(t)==H&&t!=+t}function Wt(t){return t===null}function Zt(t){return T.call(t)==H}var $t=!A?At:function(t){if(!(t&&typeof t=="object")){return false}var n=t.valueOf,e=typeof n=="function"&&(e=A(n))&&A(e);return e?t==e||A(t)==e&&!Mt(t):At(t)};function Vt(t){return T.call(t)==W}function Gt(t){return T.call(t)==Z}function Jt(t){return t===n}var Kt=!I?Et:function(t){var n=typeof t;if(n=="function"&&D.call(t,"prototype")){return Et(t)}return t&&ot[n]?I(t):[]};function Qt(t,n,e){var r=arguments,i=0,a=2,u=r[3],s=r[4];if(e!==o){u=[];s=[];a=r.length}while(++i<a){St(r[i],function(n,e){var r,i,a;if(n&&((i=Ot(n))||$t(n))){var l=u.length;while(l--){r=u[l]==n;if(r){break}}if(r){t[e]=s[l]}else{u.push(n);s.push(a=(a=t[e],i)?Ot(a)?a:[]:$t(a)?a:{});t[e]=Qt(a,n,o,u,s)}}else if(n!=null){t[e]=n}})}return t}function tn(t,n,e){var r=typeof n=="function",a={};if(r){n=vt(n,e)}else{var u=k.apply(i,arguments)}kt(t,function(t,e,i){if(r?!n(t,e,i):Cn(u,e,1)<0){a[e]=t}});return a}function nn(t){var n=[];St(t,function(t,e){n.push([e,t])});return n}function en(t,n,e){var r={};if(typeof n!="function"){var a=0,u=k.apply(i,arguments),o=u.length;while(++a<o){var s=u[a];if(s in t){r[s]=t[s]}}}else{n=vt(n,e);kt(t,function(t,e,i){if(n(t,e,i)){r[e]=t}})}return r}function rn(t){var n=[];St(t,function(t){n.push(t)});return n}function an(t,n){var e=t?t.length:0;if(typeof e=="number"){return(T.call(t)==Z?t.indexOf(n):Cn(t,n))>-1}return bn(t,function(t){return t===n})}function un(t,n,e){var r={};n=vt(n,e);fn(t,function(t,e,i){e=n(t,e,i);E.call(r,e)?r[e]++:r[e]=1});return r}function on(t,n,e){var r=true;n=vt(n,e);fn(t,function(t,e,i){return r=n(t,e,i)});return!!r}function sn(t,n,e){var r=[];n=vt(n,e);fn(t,function(t,e,i){if(n(t,e,i)){r.push(t)}});return r}function ln(t,n,e){var r;n=vt(n,e);bn(t,function(t,e,i){return n(t,e,i)&&(r=t,true)});return r}var fn=yt(ct);function cn(t,n,e){var r={};n=vt(n,e);fn(t,function(t,e,i){e=n(t,e,i);(E.call(r,e)?r[e]:r[e]=[]).push(t)});return r}function hn(t,n){var e=C.call(arguments,2),r=typeof n=="function",i=[];fn(t,function(t){i.push((r?n:t[n]).apply(t,e))});return i}function pn(t,n,e){var r=-1,i=t?t.length:0,a=Array(typeof i=="number"?i:0);n=vt(n,e);if(Ot(t)){while(++r<i){a[r]=n(t[r],r,t)}}else{fn(t,function(t,e,i){a[++r]=n(t,e,i)})}return a}function dn(t,n,e){var r=-Infinity,i=-1,a=t?t.length:0,u=r;if(n||typeof a!="number"){n=vt(n,e);fn(t,function(t,e,i){var a=n(t,e,i);if(a>r){r=a;u=t}})}else{while(++i<a){if(t[i]>u){u=t[i]}}}return u}function gn(t,n,e){var r=Infinity,i=-1,a=t?t.length:0,u=r;if(n||typeof a!="number"){n=vt(n,e);fn(t,function(t,e,i){var a=n(t,e,i);if(a<r){r=a;u=t}})}else{while(++i<a){if(t[i]<u){u=t[i]}}}return u}function mn(t,n){var e=[];fn(t,function(t){e.push(t[n])});return e}function vn(t,n,e,r){var i=arguments.length<3;n=vt(n,r);fn(t,function(t,r,a){e=i?(i=false,t):n(e,t,r,a)});return e}function yn(t,n,e,r){var i=t,a=t?t.length:0,u=arguments.length<3;if(typeof a!="number"){var o=Kt(t);a=o.length}else if(tt&&T.call(t)==Z){i=t.split("")}fn(t,function(t,s,l){s=o?o[--a]:--a;e=u?(u=false,i[s]):n.call(r,e,i[s],s,l)});return e}function _n(t,n,e){n=vt(n,e);return sn(t,function(t,e,r){return!n(t,e,r)})}function wn(t){var n=-1,e=Array(t?t.length:0);fn(t,function(t){var r=S(q()*(++n+1));e[n]=e[r];e[r]=t});return e}function xn(t){var n=t?t.length:0;return typeof n=="number"?n:Kt(t).length}function bn(t,n,e){var r;n=vt(n,e);fn(t,function(t,e,i){return!(r=n(t,e,i))});return!!r}function Mn(t,n,e){var r=[];n=vt(n,e);fn(t,function(t,e,i){r.push({criteria:n(t,e,i),index:e,value:t})});var i=r.length;r.sort(gt);while(i--){r[i]=r[i].value}return r}function kn(t){if(t&&typeof t.length=="number"){return(Q?T.call(t)==Z:typeof t=="string")?t.split(""):C.call(t)}return rn(t)}function Sn(t,n){var e=[];kt(n,function(t,n){e.push(n)});return sn(t,function(t){var r=e.length;while(r--){var i=t[e[r]]===n[e[r]];if(!i){break}}return!!i})}function An(t){var n=-1,e=t?t.length:0,r=[];while(++n<e){var i=t[n];if(i){r.push(i)}}return r}function En(t){var n=-1,e=t?t.length:0,r=k.apply(i,arguments),a=dt(r,e),u=[];while(++n<e){var o=t[n];if(!a(o)){u.push(o)}}return u}function Nn(t,n,e){if(t){return n==null||e?t[0]:C.call(t,0,n)}}function Dn(t,n){var e=-1,r=t?t.length:0,i=[];while(++e<r){var a=t[e];if(Ot(a)){N.apply(i,n?a:Dn(a))}else{i.push(a)}}return i}function Cn(t,n,e){var r=-1,i=t?t.length:0;if(typeof e=="number"){r=(e<0?O(0,i+e):e||0)-1}else if(e){r=qn(t,n);return t[r]===n?r:-1}while(++r<i){if(t[r]===n){return r}}return-1}function Tn(t,n,e){return t?C.call(t,0,-(n==null||e?1:n)):[]}function Pn(t){var n=arguments,e=n.length,r={},i=[];fn(t,function(t){if(Cn(i,t)<0){var a=e;while(--a){if(!(r[a]||(r[a]=dt(n[a])))(t)){return}}i.push(t)}});return i}function Ln(t,n,e){if(t){var r=t.length;return n==null||e?t[r-1]:C.call(t,-n||r)}}function jn(t,n,e){var r=t?t.length:0;if(typeof e=="number"){r=(e<0?O(0,r+e):z(e,r-1))+1}while(r--){if(t[r]===n){return r}}return-1}function In(t,n){var e=-1,r=t?t.length:0,i={};while(++e<r){var a=t[e];if(n){i[a]=n[e]}else{i[a[0]]=a[1]}}return i}function On(t,n,e){t=+t||0;e=+e||1;if(n==null){n=t;t=0}var r=-1,i=O(0,M((n-t)/e)),a=Array(i);while(++r<i){a[r]=t;t+=e}return a}function zn(t,n,e){return t?C.call(t,n==null||e?1:n):[]}function qn(t,n,e,r){var i=0,a=t?t.length:i;e=e?vt(e,r):re;n=e(n);while(i<a){var u=i+a>>>1;e(t[u])<n?i=u+1:a=u}return i}function Bn(){var t=-1,n=k.apply(i,arguments),e=n.length,r=[];while(++t<e){var a=n[t];if(Cn(r,a)<0){r.push(a)}}return r}function Yn(t,n,e,r){var i=-1,a=t?t.length:0,u=[],o=[];if(typeof n=="function"){r=e;e=n;n=false}e=vt(e,r);while(++i<a){var s=e(t[i],i,t);if(n?!i||o[o.length-1]!==s:Cn(o,s)<0){o.push(s);u.push(t[i])}}return u}function Rn(t){var n=-1,e=t?t.length:0,r=dt(arguments,1,20),i=[];while(++n<e){var a=t[n];if(!r(a)){i.push(a)}}return i}function Fn(t){var n=-1,e=t?dn(mn(arguments,"length")):0,r=Array(e);while(++n<e){r[n]=mn(arguments,n)}return r}function Un(t,n){if(t<1){return n()}return function(){if(--t<1){return n.apply(this,arguments)}}}function Hn(t,n){return rt||P&&arguments.length>2?P.call.apply(P,arguments):mt(t,n,C.call(arguments,2))}function Xn(t){var n=arguments,e=n.length>1?0:(n=Lt(t),-1),r=n.length;while(++e<r){var i=n[e];t[i]=Hn(t[i],t)}return t}function Wn(){var t=arguments;return function(){var n=arguments,e=t.length;while(e--){n=[t[e].apply(this,n)]}return n[0]}}function Zn(t,n,e){var r,i,a,u;function o(){u=null;if(!e){i=t.apply(a,r)}}return function(){var s=e&&!u;r=arguments;a=this;clearTimeout(u);u=setTimeout(o,n);if(s){i=t.apply(a,r)}return i}}function $n(t,e){var r=C.call(arguments,2);return setTimeout(function(){t.apply(n,r)},e)}function Vn(t){var e=C.call(arguments,1);return setTimeout(function(){t.apply(n,e)},1)}function Gn(t,n){return mt(n,t,C.call(arguments,2))}function Jn(t,n){var e={};return function(){var r=n?n.apply(this,arguments):arguments[0];return E.call(e,r)?e[r]:e[r]=t.apply(this,arguments)}}function Kn(t){var n,e=false;return function(){if(e){return n}e=true;n=t.apply(this,arguments);t=null;return n}}function Qn(t){return mt(t,C.call(arguments,1))}function te(t,n){var e,r,i,a,u=0;function o(){u=new Date;a=null;r=t.apply(i,e)}return function(){var s=new Date,l=n-(s-u);e=arguments;i=this;if(l<=0){clearTimeout(a);u=s;r=t.apply(i,e)}else if(!a){a=setTimeout(o,l)}return r}}function ne(t,n){return function(){var e=[t];N.apply(e,arguments);return n.apply(this,e)}}function ee(t){return t==null?"":(t+"").replace(_,wt)}function re(t){return t}function ie(t){fn(Lt(t),function(n){var e=lt[n]=t[n];lt.prototype[n]=function(){var t=[this.__wrapped__];N.apply(t,arguments);var n=e.apply(lt,t);if(this.__chain__){n=new lt(n);n.__chain__=true}return n}})}function ae(){t._=l;return this}function ue(t,n){if(t==null&&n==null){n=1}t=+t||0;if(n==null){n=t;t=0}return t+S(q()*((+n||0)-t+1))}function oe(t,n){var e=t?t[n]:null;return Ut(e)?t[n]():e}function se(t,n,e){t||(t="");e||(e={});var r,i,a=0,u=lt.templateSettings,o="__p += '",s=e.variable||u.variable,l=s;var c=RegExp((e.escape||u.escape||y).source+"|"+(e.interpolate||u.interpolate||y).source+"|"+(e.evaluate||u.evaluate||y).source+"|$","g");t.replace(c,function(n,e,i,u,s){o+=t.slice(a,s).replace(w,_t);o+=e?"' +\n__e("+e+") +\n'":u?"';\n"+u+";\n__p += '":i?"' +\n((__t = ("+i+")) == null ? '' : __t) +\n'":"";r||(r=u||f.test(e||i));a=s+n.length});o+="';\n";if(!l){s="obj";if(r){o="with ("+s+") {\n"+o+"\n}\n"}else{var g=RegExp("(\\(\\s*)"+s+"\\."+s+"\\b","g");o=o.replace(m,"$&"+s+".").replace(g,"$1__d")}}o=(r?o.replace(h,""):o).replace(p,"$1").replace(d,"$1;");o="function("+s+") {\n"+(l?"":s+" || ("+s+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":(l?"":", __d = "+s+"."+s+" || "+s)+";\n")+o+"return __p\n}";var v=at?"\n//@ sourceURL="+(e.sourceURL||"/lodash/template/source["+b++ +"]"):"";try{i=Function("_","return "+o+v)(lt)}catch(_){_.source=o;throw _}if(n){return i(n)}i.source=o;return i}function le(t,n,e){t=+t||0;var r=-1,i=Array(t);while(++r<t){i[r]=n.call(e,r)}return i}function fe(t){return t==null?"":(t+"").replace(c,bt)}function ce(t){var n=u++;return t?t+n:n}function he(t){t=new lt(t);t.__chain__=true;return t}function pe(t,n){n(t);return t}function de(){this.__chain__=true;return this}function ge(){return this.__wrapped__}lt.VERSION="0.9.0";lt.after=Un;lt.bind=Hn;lt.bindAll=Xn;lt.chain=he;lt.clone=Ct;lt.compact=An;lt.compose=Wn;lt.contains=an;lt.countBy=un;lt.debounce=Zn;lt.defaults=Tt;lt.defer=Vn;lt.delay=$n;lt.difference=En;lt.escape=ee;lt.every=on;lt.extend=Pt;lt.filter=sn;lt.find=ln;lt.first=Nn;lt.flatten=Dn;lt.forEach=fn;lt.forIn=kt;lt.forOwn=St;lt.functions=Lt;lt.groupBy=cn;lt.has=jt;lt.identity=re;lt.indexOf=Cn;lt.initial=Tn;lt.intersection=Pn;lt.invert=It;lt.invoke=hn;lt.isArguments=Mt;lt.isArray=Ot;lt.isBoolean=zt;lt.isDate=qt;lt.isElement=Bt;lt.isEmpty=Yt;lt.isEqual=Rt;lt.isFinite=Ft;lt.isFunction=Ut;lt.isNaN=Xt;lt.isNull=Wt;lt.isNumber=Zt;lt.isObject=Ht;lt.isPlainObject=$t;lt.isRegExp=Vt;lt.isString=Gt;lt.isUndefined=Jt;lt.keys=Kt;lt.last=Ln;lt.lastIndexOf=jn;lt.lateBind=Gn;lt.map=pn;lt.max=dn;lt.memoize=Jn;lt.merge=Qt;lt.min=gn;lt.mixin=ie;lt.noConflict=ae;lt.object=In;lt.omit=tn;lt.once=Kn;lt.pairs=nn;lt.partial=Qn;lt.pick=en;lt.pluck=mn;lt.random=ue;lt.range=On;lt.reduce=vn;lt.reduceRight=yn;lt.reject=_n;lt.rest=zn;lt.result=oe;lt.shuffle=wn;lt.size=xn;lt.some=bn;lt.sortBy=Mn;lt.sortedIndex=qn;lt.tap=pe;lt.template=se;lt.throttle=te;lt.times=le;lt.toArray=kn;lt.unescape=fe;lt.union=Bn;lt.uniq=Yn;lt.uniqueId=ce;lt.values=rn;lt.where=Sn;lt.without=Rn;lt.wrap=ne;lt.zip=Fn;lt.all=on;lt.any=bn;lt.collect=pn;lt.detect=ln;lt.drop=zn;lt.each=fn;lt.foldl=vn;lt.foldr=yn;lt.head=Nn;lt.include=an;lt.inject=vn;lt.methods=Lt;lt.select=sn;lt.tail=zn;lt.take=Nn;lt.unique=Yn;lt._iteratorTemplate=ft;ie(lt);lt.prototype.chain=de;lt.prototype.value=ge;fn(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];lt.prototype[t]=function(){var t=this.__wrapped__;n.apply(t,arguments);if(G&&t.length===0){delete t[0]}if(this.__chain__){t=new lt(t);t.__chain__=true}return t}});fn(["concat","join","slice"],function(t){var n=i[t];lt.prototype[t]=function(){var t=this.__wrapped__,e=n.apply(t,arguments);if(this.__chain__){e=new lt(e);e.__chain__=true}return e}});if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){t._=lt;define(function(){return lt})}else if(e){if(typeof module=="object"&&module&&module.exports==e){(module.exports=lt)._=lt}else{e._=lt}}else{t._=lt}})(this);(function(){var t=this.math={};t.mean=t.ave=t.average=function(n,e){return t.sum(n,e)/_(n).size()};t.median=function(n){var e=(n.length+1)/2;var r=t.sort(n);return r.length%2?r[e-1]:(r[e-1.5]+r[e-.5])/2};t.pow=function(t,n){if(_.isNumber(t))return Math.pow(t,n);if(_.isArray(t))return _.map(t,function(t){return _.pow(t,n)})};t.scale=function(t,n){var n=n||1;var e=_.max(t);return _.map(t,function(t){return t*(n/e)})};t.slope=function(t,n){return(n[1]-t[1])/(n[0]-t[0])};t.sort=function(t){return t.sort(function(t,n){return t-n})};t.stdDeviation=t.sigma=function(t){return Math.sqrt(_(t).variance())};t.sum=function(t,n){if(_.isArray(t)&&typeof t[0]==="number"){var e=t}else{var n=n||"value";var e=_(t).pluck(n)}var r=0;for(var i=0,a=e.length;i<a;i++)r+=e[i];return r};t.transpose=function(t){var n=[];_(t).each(function(t,e){_(t).each(function(t,r){if(!n[r])n[r]=[];n[r][e]=t})});return n};t.variance=function(t){var n=_(t).mean();return _(t).chain().map(function(t){return _(t-n).pow(2)}).mean().value()};_.mixin(t)})();(function(t){var n={},e=Array.prototype,r=Object.prototype,i=r.hasOwnProperty,a=r.toString,u=e.forEach,o=e.indexOf,s=e.slice;var l=function(t,e,r){var a,o,s;if(!t){return}if(u&&t.forEach===u){t.forEach(e,r)}else if(t.length===+t.length){for(o=0,s=t.length;o<s;o++){if(o in t&&e.call(r,t[o],o,t)===n){return}}}else{for(a in t){if(i.call(t,a)){if(e.call(r,t[a],a,t)===n){return}}}}};var f=function(t){return!!(t&&t.constructor&&t.call&&t.apply)};var c=function(t){l(s.call(arguments,1),function(n){var e;for(e in n){if(n[e]!==void 0){t[e]=n[e]}}});return t};var h=function(t,n,e){var r;if(n){if(o){return o.call(n,t,e)}r=n.length;e=e?e<0?Math.max(0,r+e):e:0;for(;e<r;e++){if(e in n&&n[e]===t){return e}}}return-1};var p={};l("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,n){p["[object "+t+"]"]=t.toLowerCase()});var d=function(t){return t==null?String(t):p[a.call(t)]||"object"};var g={};var m={};function v(t){var n=m[t]={};l(t.split(/\s+/),function(t){n[t]=true});return n}g.Callbacks=function(t){t=typeof t==="string"?m[t]||v(t):c({},t);var n,e,r,i,a,u,o=[],s=!t.once&&[],f=function(l){n=t.memory&&l;e=true;u=i||0;i=0;a=o.length;r=true;for(;o&&u<a;u++){if(o[u].apply(l[0],l[1])===false&&t.stopOnFalse){n=false;break}}r=false;if(o){if(s){if(s.length){f(s.shift())}}else if(n){o=[]}else{p.disable()}}},p={add:function(){if(o){var e=o.length;(function u(n){l(n,function(n){var e=d(n);if(e==="function"&&(!t.unique||!p.has(n))){o.push(n)}else if(n&&n.length&&e!=="string"){u(n)}})})(arguments);if(r){a=o.length}else if(n){i=e;f(n)}}return this},remove:function(){if(o){l(arguments,function(t){var n;while((n=h(t,o,n))>-1){o.splice(n,1);if(r){if(n<=a){a--}if(n<=u){u--}}}})}return this},has:function(t){return h(t,o)>-1},empty:function(){o=[];return this},disable:function(){o=s=n=undefined;return this},disabled:function(){return!o},lock:function(){s=undefined;if(!n){p.disable()}return this},locked:function(){return!s},fireWith:function(t,n){n=n||[];n=[t,n.slice?n.slice():n];

if(o&&(!e||s)){if(r){s.push(n)}else{f(n)}}return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!e}};return p};g.Deferred=function(t){var n=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],e="pending",r={state:function(){return e},always:function(){i.done(arguments).fail(arguments);return this},then:function(){var t=arguments;return g.Deferred(function(e){l(n,function(n,r){var a=n[0],u=t[r];i[n[1]](f(u)?function(){var t=u.apply(this,arguments);if(t&&f(t.promise)){t.promise().done(e.resolve).fail(e.reject).progress(e.notify)}else{e[a+"With"](this===i?e:this,[t])}}:e[a])});t=null}).promise()},promise:function(t){return typeof t==="object"?c(t,r):r}},i={};r.pipe=r.then;l(n,function(t,a){var u=t[2],o=t[3];r[t[1]]=u.add;if(o){u.add(function(){e=o},n[a^1][2].disable,n[2][2].lock)}i[t[0]]=u.fire;i[t[0]+"With"]=u.fireWith});r.promise(i);if(t){t.call(i,i)}return i};g.when=function(t){var n=0,e=s.call(arguments),r=e.length,i=r!==1||t&&f(t.promise)?r:0,a=i===1?t:g.Deferred(),u=function(t,n,e){return function(r){n[t]=this;e[t]=arguments.length>1?s.call(arguments):r;if(e===o){a.notifyWith(n,e)}else if(!--i){a.resolveWith(n,e)}}},o,l,c;if(r>1){o=new Array(r);l=new Array(r);c=new Array(r);for(;n<r;n++){if(e[n]&&f(e[n].promise)){e[n].promise().done(u(n,c,e)).fail(a.reject).progress(u(n,l,o))}else{--i}}}if(!i){a.resolveWith(c,e)}return a.promise()};if(typeof module!=="undefined"&&module.exports){module.exports=g}else if(typeof t._!=="undefined"){t._.mixin(g)}else{t._=g}})(this);(function(t,n){var e=t.Miso=t.Miso||{};e.Events={publish:function(t){var e=n.toArray(arguments);e.shift();if(this._events&&this._events[t]){n.each(this._events[t],function(t){t.callback.apply(t.context||this,e)},this)}return this},subscribe:function(t,e,r){r=r||{};this._events=this._events||{};this._events[t]=this._events[t]||[];var i={callback:e,priority:r.priority||0,token:r.token||n.uniqueId("t"),context:r.context||this};var a;n.each(this._events[t],function(t,e){if(!n.isUndefined(a)){return}if(t.priority<=i.priority){a=e}});this._events[t].splice(a,0,i);return i.token},subscribeOnce:function(t,e,r){this._events=this._events||{};r=r||{};var i=this;if(typeof r.token==="undefined"){r.token=n.uniqueId("t")}return this.subscribe(t,function(){i.unsubscribe(t,{token:r.token});e.apply(this,arguments)},r)},unsubscribe:function(t,e){if(n.isUndefined(this._events[t])){return this}if(n.isFunction(e)){this._events[t]=n.reject(this._events[t],function(t){return t.callback===e})}else if(n.isString(e)){this._events[t]=n.reject(this._events[t],function(t){return t.token===e})}else{this._events[t]=[]}return this}}})(this,_);(function(t){t.Miso=t.Miso||{};t.Miso.Dataset=function(t){t=t||{};this.length=0;this._columns=[];this._columnPositionByName={};this._computedColumns=[];this._initialize(t)}})(this);(function(t,n){var e=t.Miso||(t.Miso={});var r=t.Miso.Dataset;r.Column=function(t){n.extend(this,t);this._id=t.id||n.uniqueId();this.data=t.data||[];return this};n.extend(r.Column.prototype,{toNumeric:function(t){return r.types[this.type].numeric(t)},numericAt:function(t){return this.toNumeric(this.data[t])},coerce:function(){this.data=n.map(this.data,function(t){return r.types[this.type].coerce(t,this)},this)},compute:function(t,n){if(this.func){var e=this.func(t);if(typeof n!=="undefined"){this.data[n]=e}else{this.data.push(e)}return e}},isComputed:function(){return!n.isUndefined(this.func)},_sum:function(){return n.sum(this.data)},_mean:function(){var t=0;for(var n=0;n<this.data.length;n++){t+=this.numericAt(n)}t/=this.data.length;return r.types[this.type].coerce(t,this)},_median:function(){return r.types[this.type].coerce(n.median(this.data),this)},_max:function(){var t=-Infinity;for(var n=0;n<this.data.length;n++){if(this.data[n]!==null){if(r.types[this.type].compare(this.data[n],t)>0){t=this.numericAt(n)}}}return r.types[this.type].coerce(t,this)},_min:function(){var t=Infinity;for(var n=0;n<this.data.length;n++){if(this.data[n]!==null){if(r.types[this.type].compare(this.data[n],t)<0){t=this.numericAt(n)}}}return r.types[this.type].coerce(t,this)}});r.DataView=function(t){if(typeof t!=="undefined"){t=t||(t={});if(n.isUndefined(t.parent)){throw new Error("A view must have a parent specified.")}this.parent=t.parent;this._initialize(t)}};n.extend(r.DataView.prototype,{_initialize:function(t){if(this.parent.syncable===true){n.extend(this,e.Events);this.syncable=true}this.idAttribute=this.parent.idAttribute;this.filter={};this.filter.columns=n.bind(this._columnFilter(t.filter.columns||undefined),this);this.filter.rows=n.bind(this._rowFilter(t.filter.rows||undefined),this);this._columns=this._selectData();r.Builder.cacheColumns(this);r.Builder.cacheRows(this);if(this.syncable){this.parent.subscribe("change",this._sync,{context:this})}},_sync:function(t){var e=t.deltas,i=null;n.each(e,function(e,a){var u=this._rowPositionById[e[this.idAttribute]];if(typeof u==="undefined"&&r.Event.isAdd(e)){if(this.filter.rows&&this.filter.rows(e.changed)){this._add(e.changed);i="add"}}else{if(u==="undefined"){return}n.each(e.changed,function(t,e){var r=this._columnPositionByName[e];if(n.isUndefined(r)){return}this._columns[r].data[u]=t;i="update"},this)}var o=this.rowByPosition(u);if(r.Event.isRemove(e)||this.filter.row&&!this.filter.row(o)){var s={old:this.rowByPosition(u),changed:{}};s[this.idAttribute]=e[this.idAttribute];t.deltas.splice(a,1,s);this._remove(u);i="delete"}},this);if(this.syncable){this.publish(i,t);this.publish("change",t)}},where:function(t,e){e=e||{};e.filter=e.filter||{};if(n.isFunction(t)){e.filter.rows=t}else{e.filter=t}e.parent=this;return new r.DataView(e)},_selectData:function(){var t=[];n.each(this.parent._columns,function(n){if(this.filter.columns(n)){t.push(new r.Column({name:n.name,data:[],type:n.type,_id:n._id}))}},this);this.parent.each(function(n){if(!this.filter.rows(n)){return}for(var e=0;e<t.length;e++){t[e].data.push(n[t[e].name])}},this);return t},_columnFilter:function(t){var e;if(n.isUndefined(t)){e=function(){return true}}else{if(n.isString(t)){t=[t]}t.push(this.idAttribute);e=function(e){return n.indexOf(t,e.name)===-1?false:true}}return e},_rowFilter:function(t){var e;if(n.isNumber(t)){t=[t]}if(n.isUndefined(t)){e=function(){return true}}else if(n.isFunction(t)){e=t}else{e=n.bind(function(e){return n.indexOf(t,e[this.idAttribute])===-1?false:true},this)}return e},column:function(t){return this._column(t)},_column:function(t){if(n.isUndefined(this._columnPositionByName)){return undefined}var e=this._columnPositionByName[t];return this._columns[e]},columns:function(t){return new r.DataView({filter:{columns:t},parent:this})},columnNames:function(){var t=n.pluck(this._columns,"name");return n.reject(t,function(t){return t===this.idAttribute||t==="_oids"},this)},hasColumn:function(t){return!n.isUndefined(this._columnPositionByName[t])},each:function(t,n){for(var e=0;e<this.length;e++){t.apply(n||this,[this.rowByPosition(e),e])}},reverseEach:function(t,n){for(var e=this.length-1;e>=0;e--){t.apply(n||this,[this.rowByPosition(e),e])}},eachColumn:function(t,n){var e=this.columnNames();for(var r=0;r<e.length;r++){t.apply(n||this,[e[r],this.column(e[r]),r])}},rowByPosition:function(t){return this._row(t)},rowById:function(t){return this._row(this._rowPositionById[t])},_row:function(t){var e={};n.each(this._columns,function(n){e[n.name]=n.data[t]});return e},_remove:function(t){var e=this._rowPositionById[t];n.each(this._columns,function(t){t.data.splice(e,1)});delete this._rowPositionById[t];this._rowIdByPosition.splice(e,1);this.length--;return this},_add:function(t){n.each(t,function(e,i){var a=this.column(i);if(a.isComputed()){throw"You're trying to update a computed column. Those get computed!"}if(typeof a!=="undefined"){var u=r.types[a.type];if(a.force||u.test(t[a.name],a)){if(!n.isUndefined(a.before)){t[a.name]=a.before(t[a.name])}t[a.name]=u.coerce(t[a.name],a)}else{throw"incorrect value '"+t[a.name]+"' of type "+r.typeOf(t[a.name],a)+" passed to column '"+a.name+"' with type "+a.type}}},this);if(this._computedColumns){n.each(this._computedColumns,function(n){var e=n.compute(t);t[n.name]=e})}if(n.isUndefined(this.comparator)){n.each(this._columns,function(e){if(!e.isComputed()){e.data.push(!n.isUndefined(t[e.name])&&!n.isNull(t[e.name])?t[e.name]:null)}});this.length++;this._rowIdByPosition=this._rowIdByPosition||(this._rowIdByPosition=[]);this._rowPositionById=this._rowPositionById||(this._rowPositionById={});if(typeof this._rowPositionById[t[this.idAttribute]]!=="undefined"){throw"The id "+t[this.idAttribute]+" is not unique. The "+this.idAttribute+" column must be unique"}this._rowPositionById[t[this.idAttribute]]=this._rowIdByPosition.length;this._rowIdByPosition.push(t[this.idAttribute])}else{var e=function(t,n,e){Array.prototype.splice.apply(e,[t,0].concat(n))};var i;this.length++;for(i=0;i<this.length;i++){var a=this.rowByPosition(i);if(n.isUndefined(a[this.idAttribute])||this.comparator(t,a)<0){n.each(this._columns,function(n){e(i,t[n.name]?t[n.name]:null,n.data)});break}}this._rowIdByPosition=[];this._rowPositionById={};this.each(function(t,n){this._rowIdByPosition.push(t[this.idAttribute]);this._rowPositionById[t[this.idAttribute]]=n},this)}return this},rows:function(t){return new r.DataView({filter:{rows:t},parent:this})},sort:function(t){var e={},r=[];if(n.isFunction(t)){e.comparator=t}else{e=t||{}}if(e.comparator){this.comparator=e.comparator}else if(n.isUndefined(this.comparator)){throw new Error("Cannot sort without this.comparator.")}var i,a,u;for(i=0;i<this.length;i++){r[i]=this._row(i)}r.sort(this.comparator);i=r.length;while(i--){u=r[i];this._rowIdByPosition[i]=u[this.idAttribute];this._rowPositionById[u[this.idAttribute]]=i;a=this._columns.length;while(a--){var o=this._columns[a];o.data[i]=u[o.name]}}if(this.syncable&&!e.silent){this.publish("sort")}return this},toJSON:function(){var t=[];for(var n=0;n<this.length;n++){t.push(this.rowByPosition(n))}return t}})})(this,_);(function(t,n,e){var r=t.Miso||(t.Miso={});var i=t.Miso.Dataset;i.prototype=new i.DataView;n.extend(i.prototype,{_initialize:function(t){if(t.sync===true){n.extend(this,r.Events);this.syncable=true}this.idAttribute=t.idAttribute||"_id";this.importer=t.importer||null;this.parser=t.parser||i.Parsers.Obj;if(n.isUndefined(t.parser)){if(t.strict){this.parser=i.Parsers.Strict}else if(t.delimiter){this.parser=i.Parsers.Delimited}}if(this.importer===null){if(t.url){if(!t.interval){this.importer=i.Importers.Remote}else{this.importer=i.Importers.Polling;this.interval=t.interval}}else{this.importer=i.Importers.Local}}this.parser=new this.parser(t);if(this.parser instanceof i.Parsers.Delimited){t.dataType="text"}this.importer=new this.importer(t);if(t.comparator){this.comparator=t.comparator}if(t.ready){this.ready=t.ready}if(t.resetOnFetch){this.resetOnFetch=t.resetOnFetch}if(t.uniqueAgainst){this.uniqueAgainst=t.uniqueAgainst}if(n.isUndefined(t.data)&&n.isUndefined(t.url)){this._addIdColumn()}if(t.deferred){this.deferred=t.deferred}else{this.deferred=new n.Deferred}if(t.columns){this.addColumns(t.columns)}},fetch:function(t){t=t||{};var e=this.deferred;if(n.isNull(this.importer)){throw"No importer defined"}this.importer.fetch({success:n.bind(function(n){try{this._apply(n)}catch(r){if(t.error){t.error.call(this,r)}else{throw r}}if(this.comparator){this.sort()}if(this.ready){this.ready.call(this)}if(t.success){t.success.call(this)}e.resolveWith(this,[this])},this),error:n.bind(function(n){if(t.error){t.error.call(this,n)}e.reject(n)},this)});return e.promise()},_applications:{againstColumn:function(t){var e=[],r=n.keys(t),a,u=this.uniqueAgainst,o=this.column(u),s=[],l=[],f=[];n.each(t[u],function(e,r){var a=o.data.indexOf(i.types[o.type].coerce(e));var u={};n.each(t,function(t,n){u[n]=t[r]});if(a===-1){s.push(u)}else{l.push(u);u[this.idAttribute]=this.rowById(this.column(this.idAttribute).data[a])[this.idAttribute];this.update(u)}},this);if(s.length>0){this.add(s)}},blind:function(t){var e,r,i=[],a;var u=n.keys(t),o=n.max(n.map(u,function(n){return t[n].length},this));for(var s=0;s<o;s++){a={};for(var l=0;l<u.length;l++){a[u[l]]=t[u[l]][s]}i.push(a)}this.add(i)}},_apply:function(t){var e=this.parser.parse(t);if(!this.fetched){this._addIdColumn();this.addColumns(n.map(e.columns,function(t){return{name:t}}));i.Builder.detectColumnTypes(this,e.data);this._applications.blind.call(this,e.data);this.fetched=true}else if(this.resetOnFetch){this.reset();this._applications.blind.call(this,e.data)}else if(this.uniqueAgainst){if(!this.hasColumn(this.uniqueAgainst)){throw new Error("You requested a unique add against a column that doesn't exist.")}this._applications.againstColumn.call(this,e.data)}else{this._applications.blind.call(this,e.data)}i.Builder.cacheRows(this)},addColumns:function(t){n.each(t,function(t){this.addColumn(t)},this)},addComputedColumn:function(t,e,r){if(!n.isUndefined(this.column(t))){throw"There is already a column by this name."}else{if(typeof i.types[e]==="undefined"){throw"The type "+e+" doesn't exist"}var a=new i.Column({name:t,type:e,func:n.bind(r,this)});this._columns.push(a);this._computedColumns.push(a);this._columnPositionByName[a.name]=this._columns.length-1;if(this.length>0){this.each(function(t,n){a.compute(t,n)},this)}return a}},addColumn:function(t){if(!n.isUndefined(this.column(t.name))){return false}t=new i.Column(t);this._columns.push(t);this._columnPositionByName[t.name]=this._columns.length-1;return t},_addIdColumn:function(t){if(!n.isUndefined(this.column(this.idAttribute))){return}var e=[];if(t&&t>0){n.times(t,function(){e.push(n.uniqueId())})}var r=this.addColumn({name:this.idAttribute,data:e});if(this.idAttribute==="_id"){r.type="number"}if(this._columnPositionByName[this.idAttribute]!==0){var i=this._columnPositionByName[this.idAttribute];this._columns.splice(i,1);this._columns.unshift(r);this._columnPositionByName[this.idAttribute]=0;n.each(this._columnPositionByName,function(t,n){if(n!==this.idAttribute&&this._columnPositionByName[n]<i){this._columnPositionByName[n]++}},this)}},add:function(t,e){e=e||{};if(!n.isArray(t)){t=[t]}var r=[];n.each(t,function(t){if(!t[this.idAttribute]){t[this.idAttribute]=n.uniqueId()}this._add(t,e);if(this.syncable&&!e.silent){r.push({changed:t})}},this);if(this.syncable&&!e.silent){var a=i.Events._buildEvent(r,this);this.publish("add",a);this.publish("change",a)}return this},remove:function(t,e){t=this._rowFilter(t);var r=[],a=[];this.each(function(n,e){if(t(n)){a.push(n[this.idAttribute]);r.push({old:n})}});n.each(a,function(t){this._remove(t)},this);if(this.syncable&&(!e||!e.silent)){var u=i.Events._buildEvent(r,this);this.publish("remove",u);this.publish("change",u)}},_arrayUpdate:function(t){var e=[];n.each(t,function(t){var r={old:{},changed:{}};r[this.idAttribute]=t[this.idAttribute];var a=this._rowPositionById[t[this.idAttribute]];n.each(t,function(t,e){var u=this._columns[this._columnPositionByName[e]];var o=i.types[u.type];if(u.name===this.idAttribute&&u.data[a]!==t){throw"You can't update the id column"}if(typeof u==="undefined"){throw"column "+e+" not found!"}if(!o.test(t,u)){throw"Value is incorrect type"}if(this._computedColumns[u.name]){return}t=o.coerce(t,u);if(!n.isUndefined(u.before)){t=u.before(t)}if(u.data[a]!==t){r.old[e]=u.data[a];u.data[a]=t;r.changed[e]=t}},this);if(typeof this._computedColumns!=="undefined"){n.each(this._computedColumns,function(t){var e=n.extend({},this._row(a)),i=e[t.name],u=t.compute(e,a);if(i!==u){r.old[t.name]=i;t.data[a]=u;r.changed[t.name]=u}},this)}if(n.keys(r.changed).length>0){e.push(r)}},this);return e},_functionUpdate:function(t){var n=[];for(var e=0;e<this.length;e++){var r=t(this.rowByPosition(e));if(r!==false){n.push(r)}}return this._arrayUpdate(n)},update:function(t,e){var r;if(n.isFunction(t)){r=this._functionUpdate(t)}else{var a=n.isArray(t)?t:[t];r=this._arrayUpdate(a)}if(this.syncable&&(!e||!e.silent)){var u=i.Events._buildEvent(r,this);this.publish("update",u);this.publish("change",u)}return this},reset:function(t){n.each(this._columns,function(t){t.data=[]});this.length=0;if(this.syncable&&(!t||!t.silent)){this.publish("reset")}}})})(this,_,moment);(function(t,n){var e=t.Miso.Dataset;e.typeOf=function(t,r){var i=n.keys(e.types),a;i.push(i.splice(n.indexOf(i,"string"),1)[0]);i.push(i.splice(n.indexOf(i,"mixed"),1)[0]);a=n.find(i,function(n){return e.types[n].test(t,r)});a=n.isUndefined(a)?"string":a;return a};e.types={mixed:{name:"mixed",coerce:function(t){if(n.isNull(t)||typeof t==="undefined"||n.isNaN(t)){return null}return t},test:function(){return true},compare:function(t,e){if(n.isEqual(t,e)){return 0}if(t<e){return-1}if(t>e){return 1}},numeric:function(t){return t===null||n.isNaN(+t)?null:+t}},string:{name:"string",coerce:function(t){if(n.isNaN(t)||t===null||typeof t==="undefined"){return null}return t.toString()},test:function(t){return t===null||typeof t==="undefined"||typeof t==="string"},compare:function(t,n){if(t==null&&n!=null){return-1}if(t!=null&&n==null){return 1}if(t<n){return-1}if(t>n){return 1}return 0},numeric:function(t){if(n.isNaN(+t)||t===null){return null}else if(n.isNumber(+t)){return+t}else{return null}}},"boolean":{name:"boolean",regexp:/^(true|false)$/,coerce:function(t){if(n.isNaN(t)||t===null||typeof t==="undefined"){return null}if(t==="false"){return false}return Boolean(t)},test:function(t){if(t===null||typeof t==="undefined"||typeof t==="boolean"||this.regexp.test(t)){return true}else{return false}},compare:function(t,n){if(t==null&&n!=null){return-1}if(t!=null&&n==null){return 1}if(t==null&&n==null){return 0}if(t===n){return 0}return t<n?-1:1},numeric:function(t){if(t===null||n.isNaN(t)){return null}else{return t?1:0}}},number:{name:"number",regexp:/^\s*[\-\.]?[0-9]+([\.][0-9]+)?\s*$/,coerce:function(t){var e=+t;if(n.isNull(t)||typeof t==="undefined"||n.isNaN(e)){return null}return e},test:function(t){if(t===null||typeof t==="undefined"||typeof t==="number"||this.regexp.test(t)){return true}else{return false}},compare:function(t,n){if(t==null&&n!=null){return-1}if(t!=null&&n==null){return 1}if(t==null&&n==null){return 0}if(t===n){return 0}return t<n?-1:1},numeric:function(t){if(n.isNaN(t)||t===null){return null}return t}},time:{name:"time",format:"DD/MM/YYYY",_formatLookup:[["DD","\\d{2}"],["D","\\d{1}|\\d{2}"],["MM","\\d{2}"],["M","\\d{1}|\\d{2}"],["YYYY","\\d{4}"],["YY","\\d{2}"],["A","[AM|PM]"],["hh","\\d{2}"],["h","\\d{1}|\\d{2}"],["mm","\\d{2}"],["m","\\d{1}|\\d{2}"],["ss","\\d{2}"],["s","\\d{1}|\\d{2}"],["ZZ","[-|+]\\d{4}"],["Z","[-|+]\\d{2}:\\d{2}"]],_regexpTable:{},_regexp:function(t){if(this._regexpTable[t]){return new RegExp(this._regexpTable[t],"g")}var e=t;n.each(this._formatLookup,function(t){e=e.replace(t[0],t[1])},this);e=e.split("/").join("\\/");this._regexpTable[t]=e;return new RegExp(this._regexpTable[t],"g")},coerce:function(t,e){e=e||{};if(n.isNull(t)||typeof t==="undefined"||n.isNaN(t)){return null}if(n.isString(t)){var r=e.format||this.format;return moment(t,r)}else if(n.isNumber(t)){return moment(t)}else{return t}},test:function(t,e){e=e||{};if(t===null||typeof t==="undefined"){return true}if(n.isString(t)){var r=e.format||this.format,i=this._regexp(r);return i.test(t)}else{return true}},compare:function(t,n){if(t<n){return-1}if(t>n){return 1}return 0},numeric:function(t){if(n.isNaN(t)||t===null){return null}return t.valueOf()}}}})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Event=function(t,e){if(!n.isArray(t)){t=[t]}this.deltas=t;this.dataset=e||null};n.extend(e.Event.prototype,{affectedColumns:function(){var t=[];n.each(this.deltas,function(e){e.old=e.old||[];e.changed=e.changed||[];t=n.chain(t).union(n.keys(e.old),n.keys(e.changed)).reject(function(t){return t===this.dataset.idAttribute},this).value()},this);return t}});n.extend(e.Event,{isRemove:function(t){if(n.isUndefined(t.changed)||n.keys(t.changed).length===0){return true}else{return false}},isAdd:function(t){if(n.isUndefined(t.old)||n.keys(t.old).length===0){return true}else{return false}},isUpdate:function(t){if(!this.isRemove(t)&&!this.isAdd(t)){return true}else{return false}}});e.Events={};e.Events._buildEvent=function(t,n){return new e.Event(t,n)}})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Builder={detectColumnType:function(t,r){var i=n.inject(r.slice(0,5),function(t,r){var i=e.typeOf(r);if(r!==""&&t.indexOf(i)===-1&&!n.isNull(r)){t.push(i)}return t},[]);if(i.length===1){t.type=i[0]}else{t.type="mixed"}return t},detectColumnTypes:function(t,r){n.each(r,function(n,r){var i=t.column(r);if(i.type){i.force=true;return}else{e.Builder.detectColumnType(i,n)}},this)},cacheRows:function(t){e.Builder.clearRowCache(t);n.each(t._columns[t._columnPositionByName[t.idAttribute]].data,function(n,e){t._rowPositionById[n]=e;t._rowIdByPosition.push(n)},t);var r=n.uniq(n.map(t._columns,function(t){return t.data.length}));if(r.length>1){throw new Error("Row lengths need to be the same. Empty values should be set to null."+n.map(t._columns,function(t){return t.data+"|||"}))}else{t.length=r[0]}},clearRowCache:function(t){t._rowPositionById={};t._rowIdByPosition=[]},cacheColumns:function(t){t._columnPositionByName={};n.each(t._columns,function(n,e){t._columnPositionByName[n.name]=e})}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(t,n){for(var e=n||0,r=this.length;e<r;e++){if(this[e]===t){return e}}return-1}}})(this,_);(function(t,n){var e=t.Miso||(t.Miso={});var r=t.Miso.Dataset;r.Product=function(t){t=t||{};this.func=t.func;if(t.columns){var e=t.columns;if(n.isArray(t.columns)){e=t.columns[0]}this.valuetype=e.type;this.numeric=function(){return e.toNumeric(this.value)}}this.func({silent:true});return this};n.extend(r.Product.prototype,e.Events,{val:function(){return this.value},type:function(){return this.valuetype},_sync:function(t){this.func()},_buildDelta:function(t,n){return{old:t,changed:n}}});r.Product.define=function(t){return function(e,i){i=i||{};var a=this._findColumns(e);var u=this;i.type=i.type||a[0].type;i.typeOptions=i.typeOptions||a[0].typeOptions;var o=function(){var n=t.call(u,a,i);return r.types[i.type].coerce(n,i.typeOptions)};if(this.syncable){var s=new r.Product({columns:a,func:function(t){t=t||{};var e=this._buildDelta(this.value,o.call(u));this.value=e.changed;if(u.syncable){var i=r.Events._buildEvent(e,this);if(!n.isUndefined(e.old)&&!t.silent&&e.old!==e.changed){this.publish("change",i)}}}});this.subscribe("change",s._sync,{context:s});return s}else{return o.call(u)}}};n.extend(r.DataView.prototype,{_findColumns:function(t){var e=[];if(n.isUndefined(t)){t=this.columnNames()}t=n.isArray(t)?t:[t];n.each(t,function(t){t=this._columns[this._columnPositionByName[t]];e.push(t)},this);return e},sum:r.Product.define(function(t,e){n.each(t,function(t){if(t.type===r.types.time.name){throw new Error("Can't sum up time")}});return n.sum(n.map(t,function(t){return t._sum()}))}),max:r.Product.define(function(t,e){return n.max(n.map(t,function(t){return t._max()}))}),min:r.Product.define(function(t,e){return n.min(n.map(t,function(t){return t._min()}))}),mean:r.Product.define(function(t,e){var i=[];n.each(t,function(t){i.push(t.data)});i=n.flatten(i);var a=t[0].type;i=n.map(i,function(t){return r.types[a].numeric(t)});return n.mean(i)})})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Importers=function(t,n){};e.Importers.prototype.extract=function(t){t=n.clone(t);return t}})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Importers.Local=function(t){t=t||{};this.data=t.data||null;this.extract=t.extract||this.extract};n.extend(e.Importers.Local.prototype,e.Importers.prototype,{fetch:function(t){var n=t.data?t.data:this.data;t.success(this.extract(n))}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Importers.Remote=function(t){t=t||{};this._url=t.url;this.extract=t.extract||this.extract;this.params={type:"GET",url:n.isFunction(this._url)?n.bind(this._url,this):this._url,dataType:t.dataType?t.dataType:t.jsonp?"jsonp":"json",callback:t.callback}};n.extend(e.Importers.Remote.prototype,e.Importers.prototype,{fetch:function(t){var r=n.bind(function(n){t.success(this.extract(n))},this);if(this.callback){window[this.callback]=r}e.Xhr(n.extend(this.params,{success:this.callback?this.callback:r,error:t.error}))}});var r={url:"",data:"",dataType:"",success:function(){},type:"GET",async:true,xhr:function(){return t.ActiveXObject?new t.ActiveXObject("Microsoft.XMLHTTP"):new t.XMLHttpRequest}},i=/\?/;e.Xhr=function(t){t.dataType=t.dataType&&t.dataType.toLowerCase()||null;var a=n.isFunction(t.url)?t.url():t.url;if(t.dataType&&(t.dataType==="jsonp"||t.dataType==="script")){e.Xhr.getJSONP(a,t.success,t.dataType==="script",t.error,t.callback);return}var u=n.extend({},r,t,{url:a});u.ajax=u.xhr();if(u.ajax){if(u.type==="GET"&&u.data){u.url+=(i.test(u.url)?"&":"?")+u.data;u.data=null}u.ajax.open(u.type,u.url,u.async);u.ajax.send(u.data||null);return e.Xhr.httpData(u)}};e.Xhr.getJSONP=function(t,e,r,i,a){if(r){var u=document.querySelectorAll('script[src="'+t+'"]');if(u.length){if(e){e(true)}return}}var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script"),l=t.split("?")[1],f=false,c=[],h;if(l&&!r){c=l.split("&")}if(c.length){h=c[c.length-1].split("=")}if(!a){var p=n.uniqueId("callback");a=c.length?h[1]?h[1]:p:p}if(!l&&!r){t+="?"}if(!l||!/callback/.test(l)){if(l){t+="&"}t+="callback="+a}if(a&&!r){if(!!window[a]){a=a+ +new Date+n.uniqueId()}window[a]=function(t){if(e){e(t)}f=true};if(h){t=t.replace(h.join("="),h[0]+"="+a)}}s.onload=s.onreadystatechange=function(){if(!s.readyState||/loaded|complete/.test(s.readyState)){if(r){if(e){e()}}if(f){try{delete window[a]}catch(t){window[a]=void 0}o.removeChild(s)}}};s.onerror=function(t){if(i){i.call(null,t)}};s.src=t;o.insertBefore(s,o.firstChild);return};e.Xhr.httpData=function(t){var n,e=null,r;r=function(){if(t.ajax.readyState===4){try{e=JSON.parse(t.ajax.responseText)}catch(r){}n={xml:t.ajax.responseXML,text:t.ajax.responseText,json:e};if(t.dataType){n=n[t.dataType]}if(/(2..)/.test(t.ajax.status)){t.success.call(t.ajax,n)}else{if(t.error){t.error.call(null,t.ajax.statusText)}}}};if(t.ajax.readyState===4){r()}else{t.ajax.onreadystatechange=r}return n}})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Importers.Polling=function(t){t=t||{};this.interval=t.interval||1e3;this._def=null;e.Importers.Remote.apply(this,[t])};n.extend(e.Importers.Polling.prototype,e.Importers.Remote.prototype,{fetch:function(r){if(this._def===null){this._def=n.Deferred();this.success_callback=n.bind(function(t){r.success(this.extract(t));this._def.resolve(this)},this);this.error_callback=n.bind(function(t){r.error(t);this._def.reject(t)},this)}n.when(this._def.promise()).then(function(t){var e=n.bind(function(){this.fetch({success:this.success_callback,error:this.error_callback})},t);t._timeout=setTimeout(e,t.interval);t._def=n.Deferred()});e.Xhr(n.extend(this.params,{success:this.success_callback,error:this.error_callback}));t.imp=this},stop:function(){if(this._def!==null){this._def.reject()}if(typeof this._timeout!=="undefined"){clearTimeout(this._timeout)}},start:function(){if(this._def!==null){this._def=n.Deferred();this.fetch()}}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Importers.GoogleSpreadsheet=function(t){t=t||{};if(t.url){t.url=t.url}else{if(n.isUndefined(t.key)){throw new Error("Set options 'key' properties to point to your google document.")}else{if(t.fast){t.url="https://spreadsheets.google.com/tq?key="+t.key;if(typeof t.sheetName==="undefined"){t.sheetName="Sheet1"}t.url+="&sheet="+t.sheetName;this.callback="misodsgs"+(new Date).getTime();t.url+="&tqx=version:0.6;responseHandler:"+this.callback;t.url+=";reqId:0;out:json&tq&_=1335871249558#";delete t.sheetName}else{t.url="https://spreadsheets.google.com/feeds/cells/"+t.key+"/"+t.worksheet+"/public/basic?alt=json-in-script&callback="}delete t.key}}this.params={type:"GET",url:t.url,dataType:"jsonp"};return this};n.extend(e.Importers.GoogleSpreadsheet.prototype,e.Importers.Remote.prototype)})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Parsers=function(t){this.options=t||{}};n.extend(e.Parsers.prototype,{parse:function(){}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Parsers.Strict=function(t){this.options=t||{}};n.extend(e.Parsers.Strict.prototype,e.Parsers.prototype,{parse:function(t){var e={},r=[];n.each(t.columns,function(t){if(r.indexOf(t.name)!==-1){throw new Error('You have more than one column named "'+t.name+'"')}else{r.push(t.name);e[t.name]=t.data}});return{columns:r,data:e}}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Parsers.Obj=e.Parsers;n.extend(e.Parsers.Obj.prototype,e.Parsers.prototype,{parse:function(t){var e=n.keys(t[0]),r={};n.each(e,function(t){r[t]=[]});n.each(e,function(e){n.times(t.length,function(n){r[e].push(t[n][e])})});return{columns:e,data:r}}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Parsers.GoogleSpreadsheet=function(t){this.fast=t.fast||false};n.extend(e.Parsers.GoogleSpreadsheet.prototype,e.Parsers.prototype,{parse:function(t){var e=[],r=[],i={},a;if(typeof t.status!=="undefined"&&t.status==="error"){throw new Error("You can't use the fast importer for this url. Disable the fast flag")}if(this.fast){e=n.pluck(t.table.cols,"label");if(n.unique(e).length<e.length){var u="";n.inject(e,function(t,n){t[n]=t[n]+1||1;if(t[n]>1){u=n}return t},{});throw new Error('You have more than one column named "'+u+'"')}n.each(t.table.rows,function(t){t=t.c;for(a=0;a<t.length;a++){r[a]=r[a]||[];if(t[a].v===""){r[a].push(null)}else{r[a].push(t[a].v)}}});n.each(e,function(t,n){i[t]=r[n]})}else{var o=/([A-Z]+)(\d+)/,s={};n.each(t.feed.entry,function(t){var n=o.exec(t.title.$t),i=n[1],a=parseInt(n[2],10);if(a===1){if(e.indexOf(t.content.$t)!==-1){throw new Error('You have more than one column named "'+t.content.$t+'"')}else{s[i]=r.length;e[s[i]]=t.content.$t;r[s[i]]=[]}}else{var u=s[i];r[u][a-1]=t.content.$t}},this);n.each(r,function(t,a){t.length=n.max(n.pluck(r,"length"));t.splice(0,1);for(var u=0;u<t.length;u++){if(n.isUndefined(t[u])||t[u]===""){t[u]=null}}i[e[a]]=t})}return{columns:e,data:i}}})})(this,_);(function(t,n){var e=t.Miso.Dataset;e.Parsers.Delimited=function(t){t=t||{};this.delimiter=t.delimiter||",";this.skipRows=t.skipRows||0;this.emptyValue=t.emptyValue||null;this.__delimiterPatterns=new RegExp("(\\"+this.delimiter+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+this.delimiter+"\\r\\n]*))","gi")};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}n.extend(e.Parsers.Delimited.prototype,e.Parsers.prototype,{parse:function(t){var e=[],r={},i={};var a=function(t){if(!i[t]){i[t]=0}var n=t+i[t];i[t]+=1;return n};var u=function(t,i,u,o,s){u=u||",";var l=null;var f=0;var c=false;var h=-1;var p=0;try{i=i.replace(/\s+$/,"").replace(/^[\r|\n|\s]+[\r|\n]/,"\n");if(o>0){var d=0,g=0,m=i.length;while(d<o&&g<m){if(/\n|\r|\r\n/.test(i.charAt(g))){d++}g++}i=i.slice(g,m)}function v(t){var i=t[1];if(i.length&&i!==u){p++;if(h<f-1){p--;throw new Error("Not enough items in row")}c=true;h=0}else{if(!c){f++}h++}var o=null;if(t[2]){o=t[2].replace(new RegExp('""',"g"),'"')}else{o=t[3]}if(c){if(o===""){o=s}if(typeof r[e[h]]==="undefined"){throw new Error("Too many items in row")}r[e[h]].push(o)}else{var l=function(t){var n=a(t);while(e.indexOf(n)!==-1){n=a(t)}return n};if(n.isUndefined(o)||o===""){o="X"}if(e.indexOf(o)!==-1){o=l(o)}e.push(o);r[o]=[]}}if(new RegExp("^"+u).test(i)){v(["","",undefined,""])}while(l=t.exec(i)){v(l)}}catch(y){throw new Error("Error while parsing delimited data on row "+p+". Message: "+y.message)}return{columns:e,data:r}};return u(this.__delimiterPatterns,t,this.delimiter,this.skipRows,this.emptyValue)}})})(this,_);(function(t,n){var e=t.Miso||(t.Miso={});var r=e.Dataset;r.Derived=function(t){t=t||{};r.call(this);this.parent=t.parent;this.idAttribute="_id";this.method=t.method;this._addIdColumn();

this.addColumn({name:"_oids",type:"mixed"});if(this.parent.syncable){n.extend(this,e.Events);this.syncable=true;this.parent.subscribe("change",this._sync,{context:this})}};r.Derived.prototype=new r;n.extend(r.Derived.prototype,{_sync:function(){this.func.call(this.args);this.publish("change")}});n.extend(r.DataView.prototype,{movingAverage:function(t,e,i){i=i||{};var a=new r.Derived({parent:this,method:i.method||n.mean,size:e,args:arguments});this.eachColumn(function(t){if(t===this.idAttribute){throw"You can't compute a moving average on the id column"}a.addColumn({name:t,type:this.column(t).type,data:[]})},this);r.Builder.cacheColumns(a);var u=function(){if(typeof t==="string"){t=[t]}this.column(this.idAttribute).data=this.parent.column(this.parent.idAttribute).data.slice(e-1,this.parent.length);this.eachColumn(function(r,i){if(t.indexOf(r)===-1&&r!=="_oids"){i.data=this.parent.column(r).data.slice(e-1,this.parent.length)}else{i.data=n.movingAvg(this.parent.column(r).data,e,this.method)}},this);this.length=this.parent.length-e+1;var i=this.column("_oids");i.data=[];for(var a=0;a<this.length;a++){i.data.push(this.parent.column(this.parent.idAttribute).data.slice(a,a+e))}r.Builder.cacheRows(this);return this};a.func=n.bind(u,a);return a.func.call(a.args)},countBy:function(t,e){e=e||{};var i=new r.Derived({parent:this,method:n.sum,args:arguments});var a=this.column(t);i.addColumn({name:t,type:a.type});i.addColumn({name:"count",type:"number"});i.addColumn({name:"_oids",type:"mixed"});r.Builder.cacheColumns(i);var u=i.column(t).data,o=i.column("count").data,s=i.column("_oids").data,l=i.column(i.idAttribute).data;function f(t,n,e){var i;for(i=0;i<t.length;i++){if(r.types[e].compare(t[i],n)===0){return i}}return-1}this.each(function(e){var r=f(u,e[t],a.type);if(r===-1){u.push(e[t]);l.push(n.uniqueId());o.push(1);s.push([e[this.parent.idAttribute]])}else{o[r]+=1;s[r].push(e[this.parent.idAttribute])}},i);r.Builder.cacheRows(i);return i},groupBy:function(t,e,i){i=i||{};var a=new r.Derived({parent:this,method:i.method||n.sum,args:arguments});if(i&&i.preprocess){a.preprocess=i.preprocess}var u=n.union([t],e);n.each(u,function(t){this.addColumn({name:t,type:this.parent.column(t).type})},a);r.Builder.cacheColumns(a);var o=function(){var i=this;r.Builder.clearRowCache(this);var a={},u=0,o=this.parent.column(t);for(var s=0;s<this.parent.length;s++){var l=null;if(this.preprocess){l=this.preprocess(o.data[s])}else{l=o.data[s]}if(n.isUndefined(a[l])){a[l]=u;n.each(e,function(t){var e=this.column(t);var r=this.column(this.idAttribute);e.data[u]=[];r.data[u]=n.uniqueId()},this);this.column(t).data[u]=l;u++}n.each(e,function(t){var n=this.column(t),e=a[l];n.data[e].push(this.parent.rowByPosition(s))},this)}var f=this._columns[this._columnPositionByName._oids];f.data=[];n.each(e,function(t){var e=this.column(t);n.each(e.data,function(r,a){if(n.isArray(r)){f.data[a]=f.data[a]||[];f.data[a].push(n.map(r,function(t){return t[i.parent.idAttribute]}));f.data[a]=n.flatten(f.data[a]);e.data[a]=this.method(n.map(r,function(n){return n[t]}));this.length++}},this)},this);r.Builder.cacheRows(this);return this};a.func=n.bind(o,a);return a.func.call(a.args)}})})(this,_);(function(t){var n=window.innerWidth<=480,e=n?window.innerWidth<320?320:window.innerWidth:720,r=e,i={top:0,right:0,bottom:-0,left:-0},a=10,u={houses:"1Xb8Srdx91Q_g5yoYomjKtV8Wh8DsmeTU58M9NCwIu14",units:"1M3q7uzvOAp5kWPQ0uSyGkdiNSlZR3Syq86GNgXKlzFg"},o=-5e4,s,l,f,c,h,p,d;var g=t.behavior.zoom().scaleExtent([1,10]).center([e/2,r/2]).on("zoom",D);var m=t.select("#app").append("svg").attr("width",e).attr("height",r).append("g").attr("transform","translate("+i.left+","+i.right+")").call(g);var v=m.append("rect").attr("width",e).attr("height",r).style("fill","none").style("pointer-events","all");var y=m.append("g");y.append("image").attr("class","background").attr("xlink:href","src/img/map.svg").attr("width",720).attr("height",720);var _=t.scale.linear().range([0,720]).domain([0,1500]);var w=t.scale.linear().range([0,720]).domain([0,1500]);var x=t.scale.sqrt().range([0,a]);var b=t.scale.linear().range(["#E84261","#ffe08a"]).interpolate(t.interpolateRgb);var M=t.scale.linear().range(["#ffe08a","#3FEA95"]).interpolate(t.interpolateRgb);var k=t.select("#app").append("div").attr("class","ttip ttip--hidden");k.append("div").attr("class","ttip__icon").append("div").attr("class","ttip__icon__image");k.append("div").attr("class","ttip__details").append("p").attr("class","ttip__details__name");k.select(".ttip__details").append("p").attr("class","ttip__details__median").append("span").attr("class","ttip__details__median__change");S("houses");function S(n){U(n,function(n,e){if(e)throw e;var r=false;if(d){r=true}d=n.toJSON();x.domain([0,t.max(d,function(t){return t.median})]);b.domain([-t.max(d,function(t){return t.change}),0]);M.domain([0,t.max(d,function(t){return t.change})]);A(d);L(d);j(d);if(!r){Y()}if(!r){z()}else{B()}l.on("mouseover",X);l.on("mouseleave",W)})}function A(n){var e=n.sort(function(n,e){return t.descending(n.median,e.median)}).slice(0,10);var r=n.sort(function(n,e){return t.descending(n.change,e.change)}).slice(0,10);l=y.selectAll(".station").data(n);l.transition().duration(500).attr("transform",function(t){return"translate("+_(+t.x)+","+w(+t.y)+")"}).each(function(n){t.select(this).select("circle.station__bg").transition().duration(500).attr("r",x(n.median)).attr("fill",function(t){if(t.change===o){return b(0)}else if(t.change>0){return M(t.change)}return b(t.change)});t.select(this).select("image.station__icon").transition().duration(500).attr("width",x(n.median)).attr("height",x(n.median)).attr("transform",function(t){return"translate(-"+x(t.median)*.5+",-"+x(t.median)*.5+")"});t.select(this).select("text").attr("class","station__major-label").attr("dx",function(){return E(n.name)}).attr("dy",function(){return N(n.name)}).attr("fill",function(){if(n.major==="T"){if(n.change===o){return t.rgb(b(0)).darker()}else if(n.change>0){return t.rgb(M(n.change)).darker()}return t.rgb(b(n.change)).darker()}}).text(function(){if(n.major==="T"){return n.name}return""});if(e.indexOf(n)!==-1){t.select(this).classed("top-ten-median",true).attr("rank-median",e.indexOf(n)+1);if(t.select(this).select("g.station__median-rank").empty()){t.select(this).append("g").classed("station__median-rank",true).attr("transform","translate(0, "+-(a*2.5)+")")}var i=t.select(this).select("g.station__median-rank").classed("station__median-rank--hidden",true);if(i.select("text").empty()){i.append("text")}i.select("text").text(e.indexOf(n)+1).attr("transform","translate(0,"+a*.25+")")}else{t.select(this).classed("top-ten-median",false).attr("rank-median",null);t.select(this).select("g.station__median-rank").classed("station__median-rank--hidden",true)}if(r.indexOf(n)!==-1){t.select(this).classed("top-ten-change",true).attr("rank-change",r.indexOf(n)+1);if(t.select(this).select("g.station__change-rank").empty()){t.select(this).append("g").classed("station__change-rank",true).attr("transform","translate(0, "+-(a*2.5)+")")}var i=t.select(this).select("g.station__change-rank").classed("station__change-rank--hidden",true);if(i.select("text").empty()){i.append("text")}i.select("text").text(r.indexOf(n)+1).attr("transform","translate(0,"+a*.25+")")}else{t.select(this).classed("top-ten-change",false).attr("rank-change",null);t.select(this).select("g.station__change-rank").classed("station__change-rank--hidden",true)}});l.enter().append("g").attr("class","station").attr("transform",function(t){return"translate("+_(+t.x)+","+w(+t.y)+")"}).each(function(n){t.select(this).append("circle").attr("class","station__bg").attr("r",x(n.median)).attr("fill",function(t){if(t.change===o){return b(0)}else if(t.change>0){return M(t.change)}return b(t.change)});t.select(this).append("image").attr("class","station__icon").attr("xlink:href","src/img/station__icon.svg").attr("width",x(n.median)).attr("height",x(n.median)).attr("transform",function(t){return"translate(-"+x(t.median)*.5+",-"+x(t.median)*.5+")"});t.select(this).append("text").attr("class","station__major-label").attr("dx",function(){return E(n.name)}).attr("dy",function(){return N(n.name)}).attr("fill",function(){if(n.major==="T"){if(n.change===o){return t.rgb(b(0)).darker()}else if(n.change>0){return t.rgb(M(n.change)).darker()}return t.rgb(b(n.change)).darker()}}).text(function(){if(n.major==="T"){return n.name}return""});if(e.indexOf(n)!==-1){t.select(this).classed("top-ten-median",true).attr("rank-median",e.indexOf(n)+1);var i=t.select(this).append("g").classed("station__median-rank",true).classed("station__median-rank--hidden",true).attr("transform","translate(0, "+-(a*2.5)+")");i.append("text").text(e.indexOf(n)+1).attr("transform","translate(0,"+a*.25+")")}if(r.indexOf(n)!==-1){t.select(this).classed("top-ten-change",true).attr("rank-change",r.indexOf(n)+1);var i=t.select(this).append("g").classed("station__change-rank",true).classed("station__change-rank--hidden",true).attr("transform","translate(0, "+-(a*2.5)+")");i.append("text").text(r.indexOf(n)+1).attr("transform","translate(0,"+a*.25+")")}});l.exit().remove()}function E(t){switch(t){case"Melton":return"-20";case"Sandringham":return"-32.5";case"Pakenham":return"-70";case"Belgrave":return"-70";case"Cranbourne":return"-30";case"Campbellfield":return"-35"}return"12.5"}function N(t){switch(t){case"Melton":return"20";case"Sandringham":return"20";case"Campbellfield":return"-15";case"Cranbourne":return"20"}return"3"}function D(){if(n){k.attr("class","ttip ttip--hidden")}t.select(".menu").classed("menu--hovered",true);y.attr("transform","translate("+t.event.translate+")scale("+t.event.scale+")")}function C(){m.call(g.event);var t=g.center(),n=g.translate(),e=T(t);g.scale(g.scale()*Math.pow(2,+this.getAttribute("data-zoom")));var r=P(e);g.translate([n[0]+t[0]-r[0],n[1]+t[1]-r[1]]);m.transition().duration(500).call(g.event)}function T(t){var n=g.scale(),e=g.translate();return[(t[0]-e[0])/n,(t[1]-e[1])/n]}function P(t){var n=g.scale(),e=g.translate();return[t[0]*n+e[0],t[1]*n+e[1]]}function L(e){if(f){f.remove()}var i=t.max(e,function(t){return t.change}),a=[-i,0,i];var u={};if(n){u.containerX=15;u.containerY=27.5;u.mainBarWidth=175;u.mainBarHeight=20;u.mainBarBorderWidth=0;u.pegInterval=35;u.pegWidth=2;u.pegHeight=26;u.pegOffset=1;u.pegFill="#fff";u.pegLabelsX=[8,85.5,152.5];u.pegLabelsY=14;u.labelX=0;u.labelY=-5.5}else{u.containerX=32.5;u.containerY=r-60;u.mainBarWidth=250;u.mainBarHeight=30;u.mainBarBorderWidth=1;u.pegBorderWidth=6;u.pegBorderHeight=30;u.pegBorderOffset=3;u.pegInterval=50;u.pegWidth=4;u.pegHeight=36;u.pegOffset=2;u.pegFill="#C5EBF9";u.pegLabelsX=[10,118,215];u.pegLabelsY=20;u.labelX=0;u.labelY=-12.5}f=y.append("g").attr("class","legend__change").attr("transform","translate("+u.containerX+","+u.containerY+")");var o=f.append("defs").append("linearGradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%").attr("id","legend__change__gradient");o.selectAll("stop").data(a).enter().append("stop").attr("offset",function(t,n){return n*50+"%"}).style("stop-color",function(t){if(t>0){return M(t)}return b(t)}).style("stop-opacity",1);f.append("rect").attr("width",u.mainBarWidth).attr("height",u.mainBarHeight).attr("stroke","#000").attr("stroke-width",u.mainBarBorderWidth).attr("fill","url(#legend__change__gradient)");if(!n){f.selectAll("rect.legend__change__peg__border").data([1,2,3,4]).enter().append("rect").attr("class","legend__change__peg__border").attr("width",u.pegBorderWidth).attr("height",u.pegBorderHeight).attr("fill","#000").attr("transform",function(t){return"translate("+(u.pegInterval*t-u.pegBorderOffset)+","+0+")"})}f.selectAll("rect.legend__change__peg").data([1,2,3,4]).enter().append("rect").attr("class","legend__change__peg").attr("width",u.pegWidth).attr("height",u.pegHeight).attr("fill",u.pegFill).attr("transform",function(t){return"translate("+(u.pegInterval*t-u.pegOffset)+","+-3+")"});f.selectAll("text.legend__change__peg__text").data(a).enter().append("text").attr("class","legend__change__peg__text").attr("transform",function(t,n){return"translate("+u.pegLabelsX[n]+","+u.pegLabelsY+")"}).attr("fill",function(n){if(n>0){return t.rgb(M(a[0])).darker(2.5)}return t.rgb(b(a[0])).darker(2.5)}).text(function(t){if(n){return t.toFixed(0)}return t.toFixed(0)+"%"});f.append("text").attr("transform","translate("+u.labelX+","+u.labelY+")").attr("class","legend__label").text(function(){if(n){return"Annual change in median property price (%)"}return"Annual change in median property price"})}function j(e){if(c){c.remove()}var i={};if(n){i.containerX=15;i.containerY=77.5;i.textXOffset=10;i.textY=2.5;i.labelY=-10;i.groupYInterval=25;i.groupXOffset=1.5}else{i.containerX=32.5;i.containerY=r-180;i.textXOffset=15;i.textY=3.5;i.labelY=-12.5;i.groupYInterval=30;i.groupXOffset=2.5}var a=t.max(e,function(t){return t.median}),u=[a,a*.75,a*.5],o=t.format("$.3s");c=y.append("g").attr("class","legend__median").attr("transform","translate("+i.containerX+","+i.containerY+")");c.selectAll("g").data(u).enter().append("g").each(function(n,e){t.select(this).attr("transform","translate("+(10-e*i.groupXOffset)+","+(e*i.groupYInterval+10)+")");t.select(this).append("circle").attr("r",x(n)).attr("fill","#1388B3");t.select(this).append("image").attr("xlink:href","src/img/station__icon.svg").attr("width",x(n)).attr("height",x(n)).attr("transform",function(t){return"translate(-"+x(t)*.5+",-"+x(t)*.5+")"});t.select(this).append("text").text(o(n)).attr("transform","translate("+(x(n)+i.textXOffset)+","+i.textY+")").attr("class","legend__median__text")});c.append("text").attr("transform","translate("+0+","+i.labelY+")").attr("class","legend__label").text("Median property price")}function I(n){var e=t.select(n).data()[0],r=O(e,n);var i=t.format("$.3s");k.select(".ttip__details__name").html(e.name).style("color",function(){if(e.change===o){return t.rgb(b(0)).darker()}else if(e.change>0){return t.rgb(M(e.change)).darker()}return t.rgb(b(e.change)).darker()});k.select(".ttip__icon").style("background",function(){if(e.change===o){return b(0)}else if(e.change>0){return M(e.change)}return b(e.change)});k.select(".ttip__details__median").html(i(e.median)+"<span class='ttip__details__median__change'></span>");k.select(".ttip__details__median__change").html(function(){if(e.change===o){return"No data"}return e.change.toFixed(1)+"%"}).attr("class",function(){if(e.change===o){return"ttip__details__median__change ttip__details__median__change--even"}else if(e.change>0){return"ttip__details__median__change ttip__details__median__change--up"}else if(e.change<0){return"ttip__details__median__change ttip__details__median__change--down"}return"ttip__details__median__change ttip__details__median__change--even"});k.style("top",r.y+"px").style("left",r.x+"px").attr("class","ttip")}function O(i,a){var u,o=t.select(a),s,l,f={x:[799.556,851.112,902.668,948.831,994.998,1041.165,1087.332,1133.499,1179.666,1225.833],y:598};if(!n){if(o.classed("top-ten-median")&&t.select("input[name=top10Toggle]:checked").property("value")==="top10MediansOn"){u=+o.attr("rank-median");s=f.x[u-1];l=f.y}else if(o.classed("top-ten-change")&&t.select("input[name=top10Toggle]:checked").property("value")==="top10ChangesOn"){u=+o.attr("rank-change");s=f.x[u-1];l=f.y}}var c={};if(n){c.rightBoundary=.45;c.topBoundary=.8;c.bottomBoundary=.2;c.tooltipWidth=150;c.tooltipHeight=52.5}else{c.rightBoundary=.5;c.topBoundary=.8;c.bottomBoundary=.2;c.tooltipWidth=200;c.tooltipHeight=70}var h=_(s||i.x),p=w(l||i.y),d=x(i.median)+7.5,g=-(c.tooltipHeight/2),m={x:t.transform(y.attr("transform")).translate[0],y:t.transform(y.attr("transform")).translate[1]},v=t.transform(y.attr("transform")).scale[0];h*=v;p*=v;h+=m.x;p+=m.y;if(e-h<e*c.rightBoundary){d=-x(i.median)-7.5}if(r-p>r*c.topBoundary){g=0}if(r-p<r*c.bottomBoundary){g=-c.tooltipHeight}d*=v;if(d<0){d-=c.tooltipWidth}return{x:h+d,y:p+g}}function z(){if(n){return}var t=y.append("g").classed("title",true).attr("transform","translate("+_(780)+","+w(552.409)+")");t.append("text").classed("title__main",true).text("Down the line");t.append("text").classed("title__sub",true).text("Property prices across Melbourne").attr("transform","translate(0,20)")}function q(){var n=t.select(".title").classed("title--shrunk",true).transition().duration(500).attr("transform","translate("+_(780)+","+w(455.409)+")");n.select(".title__sub").attr("transform","translate(0,17.5)")}function B(){var n=t.select(".title").classed("title--shrunk",false).transition().duration(500).attr("transform","translate("+_(780)+","+w(552.409)+")");n.select(".title__sub").attr("transform","translate(0,20)")}function Y(){var e=t.select("#app").append("div").attr("class","menu");if(!n){var r=e.append("div").attr("class","zoom-menu");r.append("img").attr("src","src/img/domain.png").style("margin-bottom","5px");r.append("button").text("+").attr("data-zoom","1").on("click",C);r.append("br");r.append("button").text("-").attr("data-zoom","-1").on("click",C);r.append("hr")}var i=e.append("form").attr("class","data-menu");i.append("label").html("Houses");i.append("input").attr("type","radio").attr("value","houseData").attr("checked","checked").attr("name","dataToggle").on("click",function(){S("houses");if(!n){document.getElementById("top10Off").checked=true}});i.append("br");i.append("label").html("Units");i.append("input").attr("type","radio").attr("value","unitsData").attr("name","dataToggle").on("click",function(){S("units");if(!n){document.getElementById("top10Off").checked=true}});if(!n){i.append("hr");var a=e.append("form").attr("class","ranking-menu");a.append("label").html("Top 10 median price");a.append("input").attr("type","radio").attr("id","top10MediansOn").attr("value","top10MediansOn").attr("name","top10Toggle").on("click",function(){G();Z();q()});a.append("br");a.append("label").html("Top 10 growth rates");a.append("input").attr("type","radio").attr("id","top10ChangesOn").attr("value","top10ChangesOn").attr("name","top10Toggle").on("click",function(){$();V();q()});a.append("br");a.append("label").html("Turn rankings off");a.append("input").attr("type","radio").attr("id","top10Off").attr("value","top10Off").attr("name","top10Toggle").attr("checked","checked").on("click",function(){$();G();B()})}if(n){e.append("img").attr("src","src/img/domain.png").attr("height","18px").attr("width","80px").style("margin-top","5px")}}function R(){t.select(".app__loading").classed("app__loading--hidden",false)}function F(){t.select(".app__loading").classed("app__loading--hidden",true)}function U(t,n){R();var e=new Miso.Dataset({importer:Miso.Dataset.Importers.GoogleSpreadsheet,parser:Miso.Dataset.Parsers.GoogleSpreadsheet,key:u[t],worksheet:"1"});e.fetch({success:function(){n(e);F()},error:function(e){console.error("Error: "+e+" Attempting fallback.");H(t,n)}})}function H(t,n){var e=new Miso.Dataset({url:"./src/data/"+t+".csv",delimiter:","});e.fetch({success:function(){n(e);F()},error:function(t){console.error("Error: "+t);n(e,t);F()}})}function X(n){t.select(this).select("circle").style("stroke-width",2).style("stroke",function(){if(n.change===-5e4){return b(0)}else if(n.change>0){return M(n.change)}return b(n.change)}).attr("fill",function(){if(n.change===-5e4){return t.rgb(b(0)).brighter(.5)}else if(n.change>0){return t.rgb(M(n.change)).brighter(.5)}return t.rgb(b(n.change)).brighter(.5)});I(this)}function W(n,e){t.select(this).select("circle").style("stroke-width",0).attr("fill",function(){if(n.change===-5e4){return b(0)}else if(n.change>0){return M(n.change)}return b(n.change)});k.attr("class","ttip ttip--hidden")}function Z(){var n={x:[799.556,851.112,902.668,948.831,994.998,1041.165,1087.332,1133.499,1179.666,1225.833],y:598};m.call(g.event);g.scale(1);g.translate([-55,0]);m.transition().duration(500).call(g.event);t.selectAll(".top-ten-median").each(function(){var e=t.select(this),r=+e.attr("rank-median");e.transition().duration(500).attr("transform",function(){return"translate("+_(n.x[r-1])+","+w(n.y)+")"});e.select(".station__major-label").classed("station__major-label--hidden",true);e.select(".station__median-rank").classed("station__median-rank--hidden",false);e.select(".station__change-rank").classed("station__change-rank--hidden",true)})}function $(){t.selectAll(".top-ten-median").each(function(n){var e=t.select(this);e.transition().duration(500).attr("transform",function(){return"translate("+_(+n.x)+","+w(+n.y)+")"});e.select(".station__major-label").classed("station__major-label--hidden",false);e.select(".station__median-rank").classed("station__median-rank--hidden",true)})}function V(){var n={x:[799.556,851.112,902.668,948.831,994.998,1041.165,1087.332,1133.499,1179.666,1225.833],y:598};m.call(g.event);g.scale(1);g.translate([-55,0]);m.transition().duration(500).call(g.event);t.selectAll(".top-ten-change").each(function(){var e=t.select(this),r=+e.attr("rank-change");t.select(this).transition().duration(500).attr("transform",function(){return"translate("+_(n.x[r-1])+","+w(n.y)+")"});t.select(this).select(".station__major-label").classed("station__major-label--hidden",true);t.select(this).select(".station__change-rank").classed("station__change-rank--hidden",false);t.select(this).select(".station__median-rank").classed("station__median-rank--hidden",true)})}function G(){t.selectAll(".top-ten-change").each(function(n){var e=t.select(this);e.transition().duration(500).attr("transform",function(){return"translate("+_(+n.x)+","+w(+n.y)+")"});e.select(".station__major-label").classed("station__major-label--hidden",false);t.select(this).select(".station__change-rank").classed("station__change-rank--hidden",true)})}})(d3);